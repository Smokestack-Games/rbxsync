<!DOCTYPE html>
<!-- RbxSync Website -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Prevent theme flash - must be first -->
    <script>
        (function() {
            var theme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', theme);
        })();
    </script>
    <!-- Loading overlay styles - inline to prevent flash -->
    <style>
        .page-loader {
            position: fixed;
            inset: 0;
            z-index: 99999;
            background: #09090b;
            transition: opacity 0.3s ease;
        }
        [data-theme="light"] .page-loader {
            background: #ffffff;
        }
        .page-loader.fade-out {
            opacity: 0;
            pointer-events: none;
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RbxSync – Two-Way Sync for All Instance Types + AI Integration</title>
    <meta name="description" content="The sync tool that should have been. One-click extraction, two-way sync for Scripts, Parts, GUIs, Animations & more. Native AI integration & E2E testing. Zero setup.">
    <meta name="keywords" content="roblox, rojo, sync, studio, vscode, luau, git">
    <meta name="author" content="RbxSync">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://rbxsync.dev/">
    <meta property="og:title" content="RbxSync – Two-Way Sync for All Instance Types + AI Integration">
    <meta property="og:description" content="The sync tool that should have been. One-click extraction, two-way sync for Scripts, Parts, GUIs, Animations & more. Native AI integration & E2E testing. Zero setup.">
    <meta property="og:image" content="https://rbxsync.dev/og-image.png">
    <meta property="og:image:width" content="1456">
    <meta property="og:image:height" content="816">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://rbxsync.dev/">
    <meta name="twitter:title" content="RbxSync – Two-Way Sync for All Instance Types + AI Integration">
    <meta name="twitter:description" content="The sync tool that should have been. One-click extraction, two-way sync for Scripts, Parts, GUIs, Animations & more. Native AI integration & E2E testing. Zero setup.">
    <meta name="twitter:image" content="https://rbxsync.dev/og-image.png">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/logo.png">
    <link rel="apple-touch-icon" href="/logo.png">
    <link rel="canonical" href="https://rbxsync.dev/">

    <!-- Inter Font -->
    <link rel="preconnect" href="https://rsms.me/">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">

    <style>
        :root {
            font-family: 'Inter', sans-serif;
            font-feature-settings: 'liga' 1, 'calt' 1;
        }
        @supports (font-variation-settings: normal) {
            :root { font-family: 'Inter var', sans-serif; }
        }

        :root {
            /* Colors */
            --bg-primary: #08080a;
            --bg-secondary: #0c0c0e;
            --bg-tertiary: #111113;
            --bg-elevated: #161618;
            --rbx-red: #c23c40;
            --rbx-red-light: #dc4a4f;
            --rbx-red-glow: rgba(194, 60, 64, 0.3);
            --gold: #d4a438;
            --gold-light: #f0c14b;
            --gold-dark: #b8922e;
            --gold-glow: rgba(212, 164, 56, 0.4);
            --text-primary: #fafafa;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --border: rgba(255, 255, 255, 0.1);
            --border-hover: rgba(255, 255, 255, 0.18);
            --success: #22c55e;
            --warning: #eab308;

            /* Type Scale - Desktop */
            --text-5xl: 2.5rem;    /* 40px - Hero display */
            --text-4xl: 2rem;      /* 32px - Section titles */
            --text-3xl: 1.75rem;   /* 28px - Large headings */
            --text-2xl: 1.5rem;    /* 24px - Card headings */
            --text-xl: 1.25rem;    /* 20px - Subtitle/large body */
            --text-lg: 1.0625rem;  /* 17px - Body emphasis */
            --text-base: 1rem;     /* 16px - Body */
            --text-sm: 0.875rem;   /* 14px - Small */
            --text-xs: 0.75rem;    /* 12px - Extra small */
            --text-2xs: 0.625rem;  /* 10px - Tiny (badges) */
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html {
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 16px;
            overflow-x: hidden;
        }

        a { color: var(--rbx-red); }

        /* Rainbow animated .rbxjson */
        .rbxjson-rainbow {
            background: linear-gradient(
                90deg,
                #ff7b7b, #ffdd67, #5ce1ff, #ffafff, #64b0ff, #8b5cf6, #ff7b7b
            );
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbow-flow 3s linear infinite;
            font-weight: 700;
            font-family: 'SF Mono', 'Fira Code', monospace;
            text-decoration: none !important;
        }

        @keyframes rainbow-flow {
            0% { background-position: 0% center; }
            100% { background-position: 200% center; }
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            padding: 1rem 2rem;
            background: rgba(9, 9, 11, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
        }

        .nav-inner {
            max-width: 1100px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            font-size: 1.125rem;
            color: var(--text-primary);
            text-decoration: none;
        }

        .logo img { width: 26px; height: 26px; }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            transition: color 0.15s;
        }

        .nav-links a:hover { color: var(--text-primary); }

        .nav-cta {
            background: var(--rbx-red);
            color: white !important;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.875rem;
            text-decoration: none;
            transition: all 0.15s, filter 0s;
            animation: primary-hue-shift 7s ease-in-out infinite;
        }

        .nav-cta:hover {
            background: var(--rbx-red-light);
            box-shadow: 0 0 20px var(--rbx-red-glow);
            animation: primary-hue-shift-hover 4s ease-in-out infinite;
        }

        /* Nav right section */
        .nav-right {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        /* Search bar */
        .nav-search {
            position: relative;
            display: flex;
            align-items: center;
        }

        .nav-search input {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.45rem 0.75rem 0.45rem 2.25rem;
            font-size: 0.8rem;
            color: var(--text-primary);
            width: 180px;
            height: 34px;
            box-sizing: border-box;
            transition: all 0.2s;
        }

        .nav-search input::placeholder {
            color: var(--text-muted);
        }

        .nav-search input:focus {
            outline: none;
            border-color: var(--rbx-red);
            background: var(--bg-primary);
            width: 240px;
        }

        .nav-search-icon {
            position: absolute;
            left: 0.75rem;
            color: var(--text-muted);
            pointer-events: none;
        }

        .nav-search-kbd {
            position: absolute;
            right: 0.5rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 0.1rem 0.35rem;
            font-size: 0.65rem;
            font-family: 'SF Mono', monospace;
            color: var(--text-muted);
        }

        /* Mobile search button - hidden by default */
        .nav-search-mobile {
            display: none;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0;
            width: 34px;
            height: 34px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.2s;
            align-items: center;
            justify-content: center;
        }

        .nav-search-mobile:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-color: var(--border-hover);
        }

        /* Theme toggle */
        .theme-toggle {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            width: 34px;
            height: 34px;
            box-sizing: border-box;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-color: var(--border-hover);
        }

        .theme-toggle svg {
            width: 18px;
            height: 18px;
        }

        .theme-toggle .sun-icon { display: none; }
        .theme-toggle .moon-icon { display: block; }

        [data-theme="light"] .theme-toggle .sun-icon { display: block; }
        [data-theme="light"] .theme-toggle .moon-icon { display: none; }

        /* GitHub Stars Button */
        .github-stars-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.45rem 0.75rem;
            height: 34px;
            box-sizing: border-box;
            text-decoration: none;
            color: var(--text-primary);
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        .github-stars-btn:hover {
            background: var(--bg-tertiary);
            border-color: var(--border-hover);
            transform: translateY(-1px);
        }

        .github-stars-btn svg {
            width: 18px;
            height: 18px;
        }

        .github-stars-count {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            padding-left: 0.5rem;
            border-left: 1px solid var(--border);
            color: var(--text-secondary);
        }

        .github-stars-count svg {
            width: 14px;
            height: 14px;
            color: #f0c14b;
        }

        /* Discord Button - Icon only */
        .discord-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 34px;
            height: 34px;
            border-radius: 8px;
            border: 1px solid transparent;
            box-sizing: border-box;
            text-decoration: none;
            color: white;
            background: #5865F2;
            transition: all 0.2s;
        }

        .discord-btn:hover {
            transform: translateY(-1px);
            background: #4752c4;
            box-shadow: 0 4px 12px rgba(88, 101, 242, 0.4);
        }

        .discord-btn svg {
            width: 18px;
            height: 18px;
        }

        @keyframes rainbow-shift {
            0% { background-position: 0% center; }
            100% { background-position: 200% center; }
        }

        /* Instant theme transitions - disable during theme toggle */
        .theme-transitioning *,
        .theme-transitioning *::before,
        .theme-transitioning *::after {
            transition: none !important;
        }
        /* Exclude stars from instant transition */
        .theme-transitioning .star {
            transition: background-color 0.8s ease, opacity 0.3s ease !important;
        }

        /* Light theme overrides */
        [data-theme="light"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #f0f1f3;
            --bg-elevated: #e4e6e9;
            --text-primary: #1a1a2e;
            --text-secondary: #4a5568;
            --text-muted: #718096;
            --border: #e2e8f0;
            --border-hover: #cbd5e0;
        }

        /* Particle colors/sizes now controlled via JS interpolation for smooth transitions */

        [data-theme="light"] nav {
            background: rgba(255, 255, 255, 0.9);
            border-bottom-color: var(--border);
        }

        [data-theme="light"] .code-box {
            background: #f1f5f9;
            border-color: #e2e8f0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        [data-theme="light"] .code-cursor {
            background: #0369a1;
        }

        /* Light mode syntax highlighting for code-example */
        [data-theme="light"] .code-example .key { color: #0369a1; }
        [data-theme="light"] .code-example .string { color: #15803d; }
        [data-theme="light"] .code-example .number { color: #b45309; }
        [data-theme="light"] .code-example .bool { color: #7c3aed; }

        /* Light mode CLI colors - darker for readability */
        [data-theme="light"] {
            --success: #15803d;
        }

        [data-theme="light"] .terminal-output .info {
            color: #0369a1;
        }

        [data-theme="light"] .cli-command-prompt {
            color: #15803d;
        }

        [data-theme="light"] .cli-command-text .flag {
            color: #0369a1;
        }

        [data-theme="light"] .cli-command-text .arg {
            color: #15803d;
        }

        [data-theme="light"] .value-card,
        [data-theme="light"] .feature-card,
        [data-theme="light"] .testimonial-card,
        [data-theme="light"] .update-card {
            background: white;
            border-color: var(--border);
        }

        [data-theme="light"] .section-alt {
            background: #f1f5f9;
        }

        [data-theme="light"] .comparison-feature:hover {
            background: #e2e8f0;
        }

        [data-theme="light"] .comparison-table-wrapper::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.15);
        }

        [data-theme="light"] .comparison-table-wrapper::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.25);
        }

        [data-theme="light"] .comparison-table-wrapper::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.02);
        }

        [data-theme="light"] .release-badge {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid var(--border);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }

        [data-theme="light"] .release-badge::before {
            background: linear-gradient(
                -75deg,
                rgba(0, 0, 0, 0.02) calc(var(--shine-pos) + 20%),
                rgba(0, 0, 0, 0.08) calc(var(--shine-pos) + 25%),
                rgba(0, 0, 0, 0.02) calc(var(--shine-pos) + 100%)
            );
        }

        /* Command Palette Modal */
        .command-palette-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.15s ease, visibility 0.15s ease;
        }

        .command-palette-backdrop.open {
            opacity: 1;
            visibility: visible;
        }

        .command-palette {
            position: fixed;
            top: 15%;
            left: 50%;
            transform: translateX(-50%) scale(0.96);
            width: 90%;
            max-width: 560px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.15s ease, visibility 0.15s ease, transform 0.15s ease;
            overflow: hidden;
        }

        .command-palette-backdrop.open .command-palette {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) scale(1);
        }

        .command-palette-header {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border);
            gap: 0.75rem;
        }

        .command-palette-header svg {
            color: var(--text-muted);
            flex-shrink: 0;
        }

        .command-palette-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            font-size: 1rem;
            color: var(--text-primary);
            font-family: inherit;
        }

        .command-palette-input::placeholder {
            color: var(--text-muted);
        }

        .command-palette-close {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 0.15rem 0.4rem;
            font-size: 0.7rem;
            font-family: 'SF Mono', monospace;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.15s;
        }

        .command-palette-close:hover {
            background: var(--bg-elevated);
            color: var(--text-secondary);
        }

        .command-palette-results {
            max-height: 360px;
            overflow-y: auto;
            padding: 0.5rem;
        }

        .command-palette-results::-webkit-scrollbar {
            width: 6px;
        }

        .command-palette-results::-webkit-scrollbar-track {
            background: transparent;
        }

        .command-palette-results::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        .command-palette-group {
            margin-bottom: 0.5rem;
        }

        .command-palette-group-label {
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0.5rem 0.75rem 0.25rem;
        }

        .command-palette-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.65rem 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.1s;
            text-decoration: none;
            color: inherit;
        }

        .command-palette-item:hover,
        .command-palette-item.selected {
            background: var(--bg-tertiary);
        }

        .command-palette-item.selected {
            background: rgba(194, 60, 64, 0.15);
        }

        .command-palette-item-icon {
            width: 32px;
            height: 32px;
            background: var(--bg-tertiary);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            flex-shrink: 0;
        }

        .command-palette-item.selected .command-palette-item-icon {
            background: rgba(194, 60, 64, 0.2);
            color: var(--rbx-red);
        }

        .command-palette-item-content {
            flex: 1;
            min-width: 0;
        }

        .command-palette-item-title {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .command-palette-item-title mark {
            background: rgba(194, 60, 64, 0.3);
            color: inherit;
            padding: 0 0.1em;
            border-radius: 2px;
        }

        .command-palette-item-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .command-palette-item-path {
            font-size: 0.7rem;
            color: var(--text-muted);
            font-family: 'SF Mono', monospace;
        }

        .command-palette-empty {
            padding: 2rem;
            text-align: center;
            color: var(--text-muted);
        }

        .command-palette-empty svg {
            width: 40px;
            height: 40px;
            margin-bottom: 0.75rem;
            opacity: 0.5;
        }

        .command-palette-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem 1rem;
            border-top: 1px solid var(--border);
            background: var(--bg-primary);
        }

        .command-palette-hints {
            display: flex;
            gap: 1rem;
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .command-palette-hint {
            display: flex;
            align-items: center;
            gap: 0.35rem;
        }

        .command-palette-hint kbd {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 3px;
            padding: 0.1rem 0.3rem;
            font-family: 'SF Mono', monospace;
            font-size: 0.65rem;
        }

        .command-palette-brand {
            display: flex;
            align-items: center;
            gap: 0.35rem;
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .command-palette-brand img {
            width: 14px;
            height: 14px;
        }

        [data-theme="light"] .command-palette {
            background: white;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        [data-theme="light"] .command-palette-backdrop {
            background: rgba(0, 0, 0, 0.3);
        }

        /* Hero */
        .hero {
            padding: 10rem 2rem 6rem;
            text-align: center;
            max-width: 900px;
            margin: 0 auto;
            overflow: visible;
        }

        .release-badge {
            --shine-pos: 100%;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            background: radial-gradient(circle at 50% 0%, rgba(194, 60, 64, 0.1) 0%, transparent 60%);
            padding: 0.5rem 1rem;
            border-radius: 100px;
            font-size: 0.8125rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            text-decoration: none;
            transition: box-shadow 0.3s ease;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            overflow: hidden;
        }

        .release-badge:hover {
            box-shadow: 0 0 20px rgba(194, 60, 64, 0.15);
        }

        /* Shiny border sweep */
        .release-badge::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            padding: 1px;
            background: linear-gradient(
                -75deg,
                rgba(255, 255, 255, 0.1) calc(var(--shine-pos) + 20%),
                rgba(255, 255, 255, 0.4) calc(var(--shine-pos) + 25%),
                rgba(255, 255, 255, 0.1) calc(var(--shine-pos) + 100%)
            );
            -webkit-mask:
                linear-gradient(#fff 0 0) content-box,
                linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: shiny-sweep 3s ease-in-out infinite;
        }

        @keyframes shiny-sweep {
            0% { --shine-pos: 100%; }
            50% { --shine-pos: -100%; }
            50.01%, 100% { --shine-pos: 100%; }
        }

        @property --shine-pos {
            syntax: '<percentage>';
            initial-value: 100%;
            inherits: false;
        }

        .release-badge .tag {
            background: rgba(194, 60, 64, 0.2);
            color: var(--rbx-red);
            padding: 0.125rem 0.5rem;
            border-radius: 100px;
            font-weight: 600;
            font-size: 0.6875rem;
            letter-spacing: 0.02em;
            border: 1px solid rgba(194, 60, 64, 0.3);
        }

        .release-date {
            color: var(--text-muted);
            font-size: 0.7rem;
            font-weight: 500;
            opacity: 0.6;
            padding-left: 0.5rem;
            border-left: 1px solid var(--border);
        }

        .hero h1 {
            font-size: clamp(2.25rem, 5vw, 3.25rem);
            font-weight: 700;
            line-height: 1.25;
            letter-spacing: -0.025em;
            margin-bottom: 1.25rem;
        }

        .hero h1 .accent {
            display: inline-block;
            margin-top: 0.25em;
            color: var(--rbx-red);
            animation: primary-hue-shift 8s ease-in-out infinite;
        }

        /* Rotating text - IDE code box style */
        .code-box {
            display: inline-flex;
            align-items: center;
            vertical-align: middle;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 0.2em 0.4em;
            margin: 0 0.15em;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            white-space: nowrap;
            transition: width 0.25s ease;
            position: relative;
            top: -0.09em;
        }

        .rotating-wrapper {
            display: inline-flex;
            align-items: center;
            vertical-align: middle;
            position: relative;
            height: 1.2em;
            transition: width 0.25s ease;
        }

        .rotating-text span {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            white-space: nowrap;
            font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', 'Consolas', monospace;
            font-size: inherit;
            font-weight: 600;
            line-height: 1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .rotating-text span.active {
            opacity: 1;
        }

        /* IDE-inspired syntax colors - will be applied dynamically */
        .rotating-text span { color: #4EC9B0; }

        /* Blinking cursor */
        .code-cursor {
            display: inline-block;
            width: 2px;
            height: 1em;
            background: #569CD6;
            margin-left: 2px;
            animation: blink-cursor 1s step-end infinite;
            border-radius: 1px;
        }

        @keyframes blink-cursor {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .hero-subtitle {
            font-size: var(--text-xl);
            color: var(--text-secondary);
            max-width: 680px;
            margin: 0 auto 2.5rem;
            line-height: 2;
            letter-spacing: -0.01em;
        }

        .hero-subtitle br {
            display: block;
            content: '';
            margin-top: 0.25rem;
        }

        /* Apple-style phrase highlighting */
        .hero-phrase {
            display: block;
            margin-bottom: 0.125rem;
        }

        .hero-phrase:last-child {
            margin-bottom: 0;
        }

        .hero-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 4rem;
            padding: 12px;
            overflow: visible;
            position: relative;
            z-index: 1;
        }

        /* Shiny gold beta button - Ultra Premium */
        .btn-beta {
            --shine-deg: 105deg;
            position: relative;
            padding: 0.875rem 1.75rem;
            border-radius: 10px;
            font-weight: 700;
            font-size: 0.9375rem;
            letter-spacing: 0.01em;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: #1a1400;
            isolation: isolate;
            background:
                linear-gradient(165deg,
                    rgba(255,255,255,0.15) 0%,
                    transparent 40%),
                linear-gradient(145deg,
                    #c9980a 0%,
                    #e8b810 18%,
                    #f5d442 38%,
                    #fff176 50%,
                    #f5d442 62%,
                    #e8b810 82%,
                    #c9980a 100%);
            box-shadow:
                0 0 0 1px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.1),
                0 4px 12px rgba(201, 152, 10, 0.15),
                0 0 15px rgba(245, 212, 66, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.5),
                inset 0 -1px 0 rgba(0, 0, 0, 0.08);
            border: none;
            box-sizing: border-box;
            overflow: hidden;
            transition:
                transform 0.3s cubic-bezier(0.22, 1, 0.36, 1),
                box-shadow 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Animated shine - moves left to right with persistent subtle shimmer */
        .btn-beta::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            background:
                /* Persistent subtle shimmer */
                linear-gradient(
                    110deg,
                    transparent 20%,
                    rgba(255, 255, 255, 0.08) 40%,
                    rgba(255, 255, 255, 0.15) 50%,
                    rgba(255, 255, 255, 0.08) 60%,
                    transparent 80%
                ),
                /* Animated bright shine */
                linear-gradient(
                    105deg,
                    transparent 0%,
                    transparent 40%,
                    rgba(255, 255, 255, 0.5) 48%,
                    rgba(255, 255, 255, 0.7) 50%,
                    rgba(255, 255, 255, 0.5) 52%,
                    transparent 60%,
                    transparent 100%
                );
            background-size: 100% 100%, 300% 100%;
            background-position: 0 0, -100% 0;
            animation: shiny-btn 4s ease-in-out infinite;
            pointer-events: none;
            z-index: 1;
        }

        /* Subtle ambient glow pulse */
        .btn-beta::after {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 12px;
            background: radial-gradient(ellipse at 50% 50%, rgba(255, 215, 0, 0.4) 0%, transparent 70%);
            opacity: 0;
            z-index: -1;
            animation: gold-pulse 3s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes shiny-btn {
            0%, 100% { background-position: 0 0, -100% 0; }
            40% { background-position: 0 0, 200% 0; }
            40.001%, 99.999% { background-position: 0 0, -100% 0; }
        }

        @keyframes gold-pulse {
            0%, 100% { opacity: 0; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.02); }
        }

        /* Hover background layer - fades in smoothly */
        .btn-beta .hover-bg {
            position: absolute;
            inset: 0;
            border-radius: inherit;
            background:
                linear-gradient(165deg,
                    rgba(255,255,255,0.35) 0%,
                    transparent 40%),
                linear-gradient(145deg,
                    #e8b810 0%,
                    #f5d442 18%,
                    #ffe566 38%,
                    #fffacc 50%,
                    #ffe566 62%,
                    #f5d442 82%,
                    #e8b810 100%);
            box-shadow: inset 0 0 20px rgba(255, 252, 240, 0.45);
            opacity: 0;
            transition: opacity 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
            z-index: 0;
        }

        .btn-beta:hover .hover-bg {
            opacity: 1;
        }

        .btn-beta:hover {
            box-shadow:
                0 0 0 1px rgba(0, 0, 0, 0.08),
                0 2px 8px rgba(0, 0, 0, 0.1),
                0 4px 12px rgba(201, 152, 10, 0.12),
                0 0 18px rgba(245, 212, 66, 0.22),
                inset 0 1px 0 rgba(255, 255, 255, 0.7),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
        }

        .btn-beta .beta-tag,
        .btn-beta .btn-text {
            position: relative;
            z-index: 2;
        }

        .btn-beta .beta-tag {
            background: rgba(0, 0, 0, 0.12);
            color: rgba(0, 0, 0, 0.75);
            padding: 0.15rem 0.5rem;
            border-radius: 4px;
            font-size: 0.625rem;
            font-weight: 700;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            border: 1px solid rgba(0, 0, 0, 0.06);
        }

        .btn-primary {
            background: var(--rbx-red);
            color: white;
            padding: 0.875rem 1.75rem;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.9375rem;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.15s, filter 0s;
            animation: primary-hue-shift 6s ease-in-out infinite;
        }

        @keyframes primary-hue-shift {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(15deg); }
        }

        .btn-primary:hover {
            background: var(--rbx-red-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px var(--rbx-red-glow);
            animation: primary-hue-shift-hover 4s ease-in-out infinite;
        }

        @keyframes primary-hue-shift-hover {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(20deg); }
        }

        /* Aurora color shift animation */
        @keyframes aurora-hue-shift {
            0% { filter: blur(var(--aurora-blur, 6px)) hue-rotate(0deg); }
            50% { filter: blur(var(--aurora-blur, 6px)) hue-rotate(30deg); }
            100% { filter: blur(var(--aurora-blur, 6px)) hue-rotate(0deg); }
        }

        @keyframes aurora-hue-shift-reverse {
            0% { filter: blur(var(--aurora-blur, 6px)) hue-rotate(0deg); }
            50% { filter: blur(var(--aurora-blur, 6px)) hue-rotate(-25deg); }
            100% { filter: blur(var(--aurora-blur, 6px)) hue-rotate(0deg); }
        }

        /* Aurora wrapper for btn-secondary - matches search input style */
        .btn-secondary-wrapper {
            position: relative;
            display: inline-flex;
            overflow: visible;
            z-index: 1;
            isolation: isolate;
            --aurora-brightness: 0;
        }

        .btn-secondary-wrapper::before {
            content: '';
            position: absolute;
            inset: -6px;
            border-radius: 14px;
            background: conic-gradient(
                from var(--aurora-rotate, 0deg),
                rgba(45, 212, 191, 0.95) 0deg,
                rgba(45, 212, 191, 0.4) 12deg,
                transparent 20deg,
                transparent 35deg,
                rgba(34, 211, 238, 0.8) 42deg,
                rgba(34, 211, 238, 0.3) 55deg,
                transparent 65deg,
                transparent 88deg,
                rgba(99, 102, 241, 0.9) 95deg,
                transparent 115deg,
                transparent 145deg,
                rgba(244, 114, 182, 0.7) 152deg,
                rgba(244, 114, 182, 0.25) 168deg,
                transparent 178deg,
                transparent 200deg,
                rgba(251, 146, 60, 0.75) 208deg,
                transparent 225deg,
                transparent 255deg,
                rgba(74, 222, 128, 0.85) 268deg,
                rgba(74, 222, 128, 0.35) 285deg,
                transparent 298deg,
                transparent 322deg,
                rgba(45, 212, 191, 0.6) 335deg,
                rgba(45, 212, 191, 0.95) 360deg
            );
            opacity: calc(0.5 + var(--aurora-brightness) * 0.45);
            --aurora-blur: calc(6px - var(--aurora-brightness) * 4px);
            z-index: -1;
            pointer-events: none;
            animation: aurora-hue-shift 8s ease-in-out infinite;
        }

        .btn-secondary-wrapper .aurora-layer {
            position: absolute;
            inset: -8px;
            border-radius: 16px;
            background: conic-gradient(
                from var(--aurora-rotate-2, 180deg),
                transparent 0deg,
                transparent 25deg,
                rgba(217, 70, 239, 0.7) 35deg,
                rgba(217, 70, 239, 0.3) 52deg,
                transparent 68deg,
                transparent 120deg,
                rgba(56, 189, 248, 0.8) 135deg,
                rgba(56, 189, 248, 0.25) 158deg,
                transparent 175deg,
                transparent 230deg,
                rgba(168, 85, 247, 0.7) 248deg,
                transparent 275deg,
                transparent 310deg,
                rgba(251, 191, 36, 0.5) 325deg,
                transparent 345deg,
                transparent 360deg
            );
            opacity: calc(0.35 + var(--aurora-brightness) * 0.45);
            --aurora-blur: calc(7px - var(--aurora-brightness) * 4px);
            z-index: -2;
            pointer-events: none;
            animation: aurora-hue-shift-reverse 12s ease-in-out infinite;
            -webkit-mask-image: radial-gradient(ellipse 65% 75% at center, black 45%, transparent 100%);
            mask-image: radial-gradient(ellipse 65% 75% at center, black 45%, transparent 100%);
        }

        .btn-secondary-wrapper .aurora-layer::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 18px;
            background: conic-gradient(
                from var(--aurora-rotate-3, 90deg),
                transparent 0deg,
                rgba(34, 197, 94, 0.5) 60deg,
                transparent 100deg,
                transparent 180deg,
                rgba(139, 92, 246, 0.45) 220deg,
                transparent 270deg,
                transparent 360deg
            );
            filter: blur(6px);
            opacity: 0.6;
            -webkit-mask-image: radial-gradient(ellipse 60% 70% at center, black 40%, transparent 100%);
            mask-image: radial-gradient(ellipse 60% 70% at center, black 40%, transparent 100%);
        }

        .btn-secondary {
            --x: 0;
            --y: 0;
            --glow-opacity: 0;
            --spotlight-hue: 0;
            --spotlight-size: 60;
            --spotlight-intensity: 0.6;
            position: relative;
            /* Frosted glass - lets aurora show through */
            background: rgba(10, 10, 12, 0.5);
            backdrop-filter: blur(12px) saturate(1.4);
            -webkit-backdrop-filter: blur(12px) saturate(1.4);
            color: var(--text-primary);
            padding: 0.875rem 1.75rem;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.9375rem;
            letter-spacing: 0.01em;
            text-decoration: none;
            border: 1px solid rgba(255, 255, 255, 0.15);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            transition:
                box-shadow 0.4s cubic-bezier(0.22, 1, 0.36, 1),
                border-color 0.3s ease,
                background 0.3s ease;
            overflow: hidden;
            z-index: 1;
        }

        /* Aurora-revealing lens - brightens aurora where cursor hovers */
        .btn-secondary::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            /* Vertical brightness column - "clears the fog" to reveal aurora */
            background:
                /* Primary brightness lens - wide vertical column */
                radial-gradient(
                    ellipse calc(var(--spotlight-size) * 1.5px) 150% at calc(var(--x) * 1px) 50%,
                    rgba(255, 255, 255, calc(var(--spotlight-intensity) * 0.35)),
                    rgba(255, 255, 255, calc(var(--spotlight-intensity) * 0.15)) 40%,
                    transparent 80%
                ),
                /* Soft edge glow */
                radial-gradient(
                    ellipse calc(var(--spotlight-size) * 2px) 200% at calc(var(--x) * 1px) 50%,
                    rgba(255, 255, 255, calc(var(--spotlight-intensity) * 0.08)),
                    transparent 60%
                );
            opacity: var(--glow-opacity);
            transition: opacity 0.3s ease;
            pointer-events: none;
            mix-blend-mode: overlay;
        }


        .btn-secondary:hover {
            background: rgba(14, 14, 16, 0.45);
            border-color: rgba(255, 255, 255, 0.22);
            box-shadow:
                0 4px 16px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.06);
        }

        /* Light theme frosted glass */
        [data-theme="light"] .btn-secondary {
            background: rgba(255, 255, 255, 0.55);
            border: 1px solid rgba(0, 0, 0, 0.08);
            color: #1a1a2e;
            box-shadow:
                0 2px 8px rgba(0, 0, 0, 0.08),
                0 0 0 1px rgba(0, 0, 0, 0.04);
        }

        [data-theme="light"] .btn-secondary::before {
            /* Brightness lens for light theme - darkens slightly to reveal aurora */
            background:
                radial-gradient(
                    ellipse calc(var(--spotlight-size) * 1.5px) 150% at calc(var(--x) * 1px) 50%,
                    rgba(0, 0, 0, calc(var(--spotlight-intensity) * 0.08)),
                    rgba(0, 0, 0, calc(var(--spotlight-intensity) * 0.03)) 40%,
                    transparent 80%
                ),
                radial-gradient(
                    ellipse calc(var(--spotlight-size) * 2px) 200% at calc(var(--x) * 1px) 50%,
                    rgba(0, 0, 0, calc(var(--spotlight-intensity) * 0.02)),
                    transparent 60%
                );
            mix-blend-mode: multiply;
            opacity: var(--glow-opacity);
            transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }


        [data-theme="light"] .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.65);
            border-color: rgba(0, 0, 0, 0.12);
            box-shadow:
                0 4px 16px rgba(0, 0, 0, 0.1),
                0 0 0 1px rgba(0, 0, 0, 0.06);
        }

        /* Sync Visual */
        .sync-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
        }

        .sync-node {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
            transition: all 0.3s ease;
        }

        @media (hover: hover) {
            .sync-node:hover {
                border-color: var(--rbx-red);
                transform: translateY(-4px);
                box-shadow: 0 8px 30px rgba(194, 60, 64, 0.15);
            }
        }

        .sync-node img { width: 48px; height: 48px; }
        .sync-node span { font-weight: 600; font-size: 0.875rem; }

        .sync-arrows {
            display: flex;
            flex-direction: column;
            gap: 0;
            color: var(--rbx-red);
            font-weight: 700;
            font-size: 2rem;
        }

        .sync-arrows span {
            animation: pulse-arrow 1.5s ease-in-out infinite;
        }

        .sync-arrows span:first-child {
            animation-delay: 0s;
        }

        .sync-arrows span:last-child {
            animation-delay: 0.75s;
        }

        @keyframes pulse-arrow {
            0%, 100% { opacity: 0.5; transform: scaleX(1); }
            50% { opacity: 1; transform: scaleX(1.1); }
        }

        /* Sections */
        .section {
            padding: 5rem 2rem;
            scroll-margin-top: var(--nav-height, 56px);
            overflow: visible;
        }

        .section-alt {
            background: #121214;
        }

        .section-inner {
            max-width: 1100px;
            margin: 0 auto;
            overflow: visible;
        }

        .section-header {
            text-align: center;
            max-width: 600px;
            margin: 0 auto 3rem;
        }

        .section-tag {
            font-size: var(--text-xs);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--rbx-red);
            margin-bottom: 0.5rem;
        }

        .section-title {
            font-size: var(--text-4xl);
            font-weight: 700;
            letter-spacing: -0.025em;
            margin-bottom: 0.75rem;
            line-height: 1.2;
        }

        .section-desc {
            color: var(--text-secondary);
            font-size: var(--text-lg);
            line-height: 1.7;
            letter-spacing: -0.01em;
        }

        /* Why RbxSync - Bento Box Layout */
        .bento-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: auto auto auto;
            gap: 1.25rem;
            margin-bottom: 0;
        }

        .bento-hero {
            grid-column: 1 / 2;
            grid-row: 1 / 2;
            background: linear-gradient(145deg, rgba(194, 60, 64, 0.08), var(--bg-primary));
            border-color: rgba(194, 60, 64, 0.3);
            border-top: 3px solid var(--rbx-red);
            animation: primary-hue-shift 10s ease-in-out infinite;
        }

        .bento-hero h3 {
            font-size: var(--text-xl);
            margin-bottom: 1rem;
        }

        .bento-hero p {
            font-size: var(--text-base);
            line-height: 1.7;
        }

        .bento-medium {
            padding: 1.75rem;
        }

        .bento-small {
            padding: 1.25rem;
        }

        .bento-small h4 {
            font-size: var(--text-sm);
        }

        .bento-small p {
            font-size: var(--text-sm);
        }

        /* Icon badges for bento cards */
        .bento-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            font-size: 1.25rem;
        }

        .bento-icon.red { background: rgba(194, 60, 64, 0.15); }
        .bento-icon.cyan { background: rgba(34, 211, 238, 0.15); }
        .bento-icon.purple { background: rgba(168, 85, 247, 0.15); }
        .bento-icon.gold { background: rgba(212, 164, 56, 0.15); }
        .bento-icon.green { background: rgba(34, 197, 94, 0.15); }

        /* Legacy value-grid for compatibility */
        .value-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .value-card, .feature-card {
            --x: 0;
            --y: 0;
            --glow-opacity: 0;
            position: relative;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: default;
            overflow: hidden;
        }

        /* Spotlight glow on the card surface */
        .value-card::before, .feature-card::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            background: radial-gradient(
                600px circle at calc(var(--x) * 1px) calc(var(--y) * 1px),
                rgba(194, 60, 64, 0.15),
                transparent 40%
            );
            opacity: var(--glow-opacity);
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        /* Glowing border effect */
        .value-card::after, .feature-card::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            padding: 1px;
            background: radial-gradient(
                400px circle at calc(var(--x) * 1px) calc(var(--y) * 1px),
                rgba(194, 60, 64, 0.7),
                rgba(139, 92, 246, 0.4) 40%,
                transparent 60%
            );
            -webkit-mask:
                linear-gradient(#fff 0 0) content-box,
                linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: var(--glow-opacity);
            transition: opacity 0.3s ease;
            pointer-events: none;
        }


        .value-card h3 {
            position: relative;
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            z-index: 1;
        }

        .value-card p {
            position: relative;
            color: var(--text-secondary);
            font-size: 0.9375rem;
            line-height: 1.6;
            z-index: 1;
        }

        /* Feature Grid */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .feature-card {
            padding: 1.5rem;
            border-radius: 10px;
        }

        .feature-card h4 {
            position: relative;
            font-size: var(--text-base);
            font-weight: 600;
            margin-bottom: 0.5rem;
            z-index: 1;
        }

        .feature-card p {
            position: relative;
            color: var(--text-secondary);
            font-size: var(--text-sm);
            line-height: 1.6;
            z-index: 1;
        }

        /* Extract Section - Premium Redesign */
        .extract-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: stretch;
        }

        .extract-info h3 {
            font-size: var(--text-4xl);
            font-weight: 700;
            margin-bottom: 1.25rem;
            line-height: 1.25;
            letter-spacing: -0.02em;
        }

        .extract-info p {
            color: var(--text-secondary);
            margin-bottom: 1.75rem;
            line-height: 1.8;
            font-size: var(--text-lg);
        }

        /* Punchy copy - stacked lines with breathing room */
        .copy-line {
            display: block;
            margin-bottom: 0.625rem;
            line-height: 1.4;
        }

        .copy-line:last-child {
            margin-bottom: 0;
        }

        .extract-info .kicker {
            display: block;
            margin-top: 0.875rem;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 1.0625rem;
        }

        /* ===== EXTRACT VIDEO PLAYER ===== */
        .extract-video-wrapper {
            position: relative;
            border-radius: 12px;
            isolation: isolate;
        }

        /* Aurora glow behind video */
        .extract-video-wrapper::before {
            content: '';
            position: absolute;
            inset: -8px;
            border-radius: 20px;
            background: conic-gradient(
                from var(--aurora-rotate, 0deg),
                rgba(194, 60, 64, 0.6) 0deg,
                rgba(194, 60, 64, 0.2) 30deg,
                transparent 60deg,
                rgba(45, 212, 191, 0.5) 120deg,
                rgba(45, 212, 191, 0.2) 150deg,
                transparent 180deg,
                rgba(99, 102, 241, 0.4) 240deg,
                transparent 300deg,
                rgba(194, 60, 64, 0.6) 360deg
            );
            filter: blur(16px);
            opacity: calc(0.5 + var(--aurora-brightness, 0) * 0.4);
            z-index: -1;
        }

        .extract-video-container {
            position: relative;
            background: var(--bg-primary);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 12px;
            overflow: hidden;
        }

        /* Video element */
        .extract-video {
            display: block;
            width: 100%;
            height: auto;
            aspect-ratio: 16 / 10;
            object-fit: cover;
            background: #000;
        }

        /* Light theme */
        [data-theme="light"] .extract-video-container {
            border-color: rgba(0, 0, 0, 0.1);
        }

        .extract-file.extract-rainbow .rainbow-text {
            background: linear-gradient(90deg, #ff7b7b, #ffdd67, #5ce1ff, #ffafff, #64b0ff, #8b5cf6, #ff7b7b);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbow-flow 3s linear infinite;
        }

        /* Light theme extract files */
        [data-theme="light"] .extract-file {
            background: #f8f9fa;
            border-color: #e2e8f0;
        }
        [data-theme="light"] .extract-file:hover {
            background: #f1f5f9;
        }

        /* E2E Testing Section */
        .e2e-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .e2e-info h3 {
            font-size: var(--text-4xl);
            font-weight: 700;
            margin-bottom: 1.25rem;
            line-height: 1.25;
            letter-spacing: -0.02em;
        }

        .e2e-info p {
            color: var(--text-secondary);
            margin-bottom: 1.75rem;
            line-height: 1.8;
            font-size: var(--text-lg);
        }

        .e2e-features {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .e2e-feature {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.9375rem;
        }

        .e2e-feature-icon {
            color: var(--success);
            font-weight: 700;
        }

        .demo-video {
            background: var(--bg-tertiary);
            border: 2px dashed var(--border);
            border-radius: 16px;
            aspect-ratio: 16 / 9;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            transition: all 0.3s ease;
        }

        .demo-video:hover {
            border-color: var(--rbx-red);
            background: #1e1e22;
        }

        .demo-video-icon {
            width: 64px;
            height: 64px;
            background: var(--rbx-red);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .demo-video-text {
            font-size: 1rem;
            font-weight: 600;
        }

        .demo-video-subtitle {
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        /* Light theme demo video */
        [data-theme="light"] .demo-video {
            background: #f8f9fa;
            border-color: #e2e8f0;
        }
        [data-theme="light"] .demo-video:hover {
            background: #e8eaed;
            border-color: #c23c40;
        }

        /* Comparison Section - Drop Shadow Design */
        .comparison-aurora-wrapper {
            position: relative;
            border-radius: 16px;
            box-shadow:
                0 4px 24px rgba(0, 0, 0, 0.3),
                0 8px 48px rgba(0, 0, 0, 0.2);
        }

        [data-theme="light"] .comparison-aurora-wrapper {
            box-shadow:
                0 4px 24px rgba(0, 0, 0, 0.08),
                0 8px 48px rgba(0, 0, 0, 0.06);
        }

        .comparison-table-wrapper {
            position: relative;
            z-index: 1;
            overflow-x: auto;
            overflow-y: visible;
            scrollbar-width: none;
            border-radius: 14px;
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.12);
        }

        [data-theme="light"] .comparison-table-wrapper {
            border-color: rgba(0, 0, 0, 0.1);
        }

        .comparison-table-wrapper::-webkit-scrollbar {
            display: none;
        }

        .comparison-table {
            width: 100%;
            min-width: 800px;
            border-collapse: separate;
            border-spacing: 0;
            font-size: 0.8125rem;
        }

        /* ===== TABLE CELLS - Clean, minimal design ===== */
        .comparison-table th,
        .comparison-table td {
            padding: 0.875rem 1rem;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
            vertical-align: middle;
            box-sizing: border-box;
            width: 110px;
            min-width: 110px;
            background: var(--bg-secondary);
        }

        /* Last row - no bottom border */
        .comparison-table tbody tr:last-child td {
            border-bottom: none;
        }

        /* First column (feature names) - sticky */
        .comparison-table th:first-child,
        .comparison-table td:first-child {
            text-align: left;
            position: sticky;
            left: 0;
            z-index: 4;
            width: 240px !important;
            min-width: 240px !important;
            max-width: 240px !important;
            padding-right: 1.5rem;
            border-right: 1px solid rgba(255, 255, 255, 0.08);
        }

        /* RbxSync column - sticky, same background */
        .comparison-table th:nth-child(2),
        .comparison-table td:nth-child(2) {
            position: sticky !important;
            left: 240px !important;
            z-index: 3;
            width: 110px !important;
            min-width: 110px !important;
            max-width: 110px !important;
            border-right: 1px solid rgba(255, 255, 255, 0.08);
        }

        /* Header row styling */
        .comparison-table thead th {
            background: var(--bg-tertiary);
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            padding: 1.125rem 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Light theme adjustments */
        [data-theme="light"] .comparison-table th,
        [data-theme="light"] .comparison-table td {
            border-bottom-color: rgba(0, 0, 0, 0.06);
        }

        [data-theme="light"] .comparison-table th:first-child,
        [data-theme="light"] .comparison-table td:first-child,
        [data-theme="light"] .comparison-table th:nth-child(2),
        [data-theme="light"] .comparison-table td:nth-child(2) {
            border-right-color: rgba(0, 0, 0, 0.08);
        }

        [data-theme="light"] .comparison-table thead th {
            border-bottom-color: rgba(0, 0, 0, 0.1);
        }

        /* Row hover - subtle uniform highlight */
        .comparison-table tbody tr {
            transition: background 0.15s ease;
        }

        .comparison-table tbody tr:hover td {
            background: var(--bg-tertiary);
        }

        [data-theme="light"] .comparison-table tbody tr:hover td {
            background: var(--bg-tertiary);
        }

        /* Tool header cells */
        .tool-header {
            position: relative;
            padding: 0.5rem 0.75rem !important;
            vertical-align: middle;
            height: 72px;
        }

        .tool-header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0;
            height: 100%;
        }

        .tool-header-logo-wrap {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .tool-header-logo {
            width: 40px;
            height: 40px;
            object-fit: contain;
        }

        .tool-header-name {
            display: none; /* Hide tool names, icons only */
        }

        /* Column highlight when selected via pills */
        .comparison-table th.column-highlight,
        .comparison-table td.column-highlight {
            background: var(--bg-elevated) !important;
        }

        [data-theme="light"] .comparison-table th.column-highlight,
        [data-theme="light"] .comparison-table td.column-highlight {
            background: var(--bg-tertiary) !important;
        }

        /* RbxSync column class - inherits aurora from nth-child(2) */
        .col-rbxsync {
            /* Styles handled by td:nth-child(2) selector */
        }

        /* Feature name styling */
        .feature-name {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            font-weight: 500;
            white-space: nowrap;
        }

        .feature-name .rbxjson-text {
            background: linear-gradient(90deg, #2dd4bf, #22d3ee, #6366f1, #f472b6, #fb923c, #4ade80, #2dd4bf);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbow-shift 3s linear infinite;
            font-weight: 600;
        }

        /* Exclusive tag - rainbow animated text and border */
        .exclusive-tag {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.25rem 0.6rem;
            padding-left: calc(0.6rem + 0.08em); /* compensate for letter-spacing on last char */
            font-size: 0.625rem;
            font-weight: 700;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            border-radius: 4px;
            line-height: 1;
            background: linear-gradient(90deg, #2dd4bf, #22d3ee, #6366f1, #f472b6, #fb923c, #4ade80, #2dd4bf);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbow-shift 3s linear infinite;
            z-index: 1;
        }

        .exclusive-tag::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 4px;
            padding: 1px;
            background: linear-gradient(90deg, #2dd4bf, #22d3ee, #6366f1, #f472b6, #fb923c, #4ade80, #2dd4bf);
            background-size: 200% 100%;
            animation: rainbow-shift 3s linear infinite;
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            z-index: -1;
        }

        [data-theme="light"] .exclusive-tag::before {
            opacity: 0.8;
        }

        /* Status icons - SVG based */
        .status-icon {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .status-icon svg {
            width: 14px;
            height: 14px;
        }

        /* Yes - green checkmarks */
        .status-icon.yes {
            background: rgba(34, 197, 94, 0.15);
            color: var(--success);
        }

        /* No - subtle dash */
        .status-icon.no {
            background: transparent;
            color: rgba(255, 255, 255, 0.2);
        }

        /* Partial - orange */
        .status-icon.partial {
            background: rgba(251, 146, 60, 0.15);
            color: #fb923c;
        }

        /* Light theme adjustments */
        [data-theme="light"] .status-icon.no {
            color: rgba(0, 0, 0, 0.2);
        }

        [data-theme="light"] .status-icon.partial {
            background: rgba(251, 146, 60, 0.12);
            color: #ea580c;
        }

        [data-theme="light"] .status-icon.no {
            background: transparent;
            color: rgba(0, 0, 0, 0.15);
        }

        [data-theme="light"] .status-icon.partial {
            background: rgba(0, 0, 0, 0.03);
            color: rgba(0, 0, 0, 0.3);
        }

        /* Comparison legend */
        /* Legend row in table footer */
        .comparison-legend-row td {
            background: rgba(255, 255, 255, 0.02) !important;
            border-top: 1px solid rgba(255, 255, 255, 0.06);
            padding: 0.75rem 1rem !important;
        }

        [data-theme="light"] .comparison-legend-row td {
            background: rgba(0, 0, 0, 0.02) !important;
            border-top-color: rgba(0, 0, 0, 0.06);
        }

        .comparison-legend {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 0;
        }

        .comparison-legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .check { color: var(--success); font-weight: 600; }
        .cross { color: var(--text-muted); }
        .partial { color: var(--warning); }

        /* Animated check marks */
        .check {
            display: inline-block;
            animation: pop-in 0.3s ease-out;
        }

        @keyframes pop-in {
            0% { transform: scale(0); }
            70% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* Mobile Competitor Selector */
        .mobile-competitor-selector {
            display: block; /* Show on desktop too */
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .competitor-selector-label {
            font-size: 0.6875rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
            padding-left: 0.25rem;
        }

        .competitor-pills {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 0.5rem;
            padding: 0.25rem;
        }

        /* Centered selector in compact mode */
        .comparison-compact .mobile-competitor-selector {
            display: block;
            text-align: center;
            margin-bottom: 2rem;
        }

        .comparison-compact .competitor-selector-label {
            padding-left: 0;
            text-align: center;
        }

        .comparison-compact .competitor-pills {
            display: inline-flex;
            justify-content: center;
            flex-wrap: wrap;
            overflow-x: visible;
            mask-image: none;
            -webkit-mask-image: none;
            padding: 0.5rem;
            margin: 0;
            gap: 0.625rem;
        }

        .comparison-compact .competitor-pills::after {
            display: none;
        }

        .competitor-pills::-webkit-scrollbar {
            display: none;
        }

        .competitor-pill {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.875rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 100px;
            cursor: pointer;
            transition: all 0.2s ease;
            flex-shrink: 0;
            -webkit-tap-highlight-color: transparent;
        }

        .competitor-pill:hover {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(255, 255, 255, 0.12);
        }

        .competitor-pill.active {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .competitor-pill-logo {
            width: 20px;
            height: 20px;
            object-fit: contain;
            border-radius: 4px;
        }

        .competitor-pill-name {
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-secondary);
            white-space: nowrap;
        }

        .competitor-pill.active .competitor-pill-name {
            color: #fff;
        }

        /* Swipe hint animation for pills */
        .competitor-pills::after {
            content: '';
            flex-shrink: 0;
            width: 1.5rem;
        }

        /* Transition for column switching */
        .comparison-table td,
        .comparison-table th {
            transition: opacity 0.15s ease;
        }

        .comparison-table td.mobile-visible,
        .comparison-table th.mobile-visible {
            animation: fadeIn 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(8px); }
            to { opacity: 1; transform: translateX(0); }
        }

        [data-theme="light"] .competitor-pill {
            background: rgba(0, 0, 0, 0.02);
            border-color: rgba(0, 0, 0, 0.08);
        }

        [data-theme="light"] .competitor-pill:hover {
            background: rgba(0, 0, 0, 0.04);
            border-color: rgba(0, 0, 0, 0.12);
        }

        [data-theme="light"] .competitor-pill.active {
            background: rgba(0, 0, 0, 0.08);
            border-color: rgba(0, 0, 0, 0.25);
        }

        [data-theme="light"] .competitor-pill.active .competitor-pill-name {
            color: #0f172a;
        }

        /* Compact comparison mode - triggered by JS when table is too wide */
        .comparison-compact .mobile-competitor-selector {
            display: block;
        }

        .comparison-compact .section-inner {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .comparison-compact .comparison-aurora-wrapper {
            width: auto;
        }

        .comparison-compact .comparison-table-wrapper {
            width: auto;
        }

        .comparison-compact .comparison-table {
            min-width: unset !important;
            width: auto !important;
        }

        .comparison-compact .comparison-table th,
        .comparison-compact .comparison-table td {
            width: auto !important;
            min-width: unset !important;
            max-width: unset !important;
        }

        /* Feature column in compact mode */
        .comparison-compact .comparison-table th:first-child,
        .comparison-compact .comparison-table td:first-child {
            width: auto !important;
            min-width: 0 !important;
            max-width: none !important;
            position: relative !important;
            left: auto !important;
            padding-right: 1.5rem !important;
        }

        /* RbxSync column in compact mode */
        .comparison-compact .comparison-table th:nth-child(2),
        .comparison-compact .comparison-table td:nth-child(2) {
            width: 140px !important;
            min-width: 140px !important;
            max-width: 140px !important;
            position: relative !important;
            left: auto !important;
        }

        /* All competitor columns - hidden by default in compact mode */
        .comparison-compact .comparison-table th:nth-child(n+3),
        .comparison-compact .comparison-table td:nth-child(n+3) {
            display: none;
        }

        /* Show only the selected competitor column in compact mode */
        .comparison-compact .comparison-table th.mobile-visible,
        .comparison-compact .comparison-table td.mobile-visible {
            display: table-cell !important;
            width: 140px !important;
            min-width: 140px !important;
            max-width: 140px !important;
        }

        /* Adjust table wrapper in compact mode */
        .comparison-compact .comparison-table-wrapper {
            overflow-x: hidden;
        }

        /* Hide tool names in compact mode - icons only */
        .comparison-compact .tool-header-name {
            display: none;
        }

        .comparison-compact .tool-header-content {
            gap: 0;
        }

        /* Hide table legend in compact mode (battle has its own) */
        .comparison-compact .comparison-legend-row {
            display: none;
        }

        /* ===== BATTLE MODE - Mobile Comparison ===== */
        .comparison-battle {
            display: none;
        }

        .comparison-compact .comparison-aurora-wrapper {
            display: none;
        }

        /* Battle wrapper - drop shadow design */
        .battle-aurora-wrapper {
            display: none;
            position: relative;
            border-radius: 16px;
            box-shadow:
                0 4px 24px rgba(0, 0, 0, 0.3),
                0 8px 48px rgba(0, 0, 0, 0.2);
        }

        .comparison-compact .battle-aurora-wrapper {
            display: block;
            width: calc(100% - 2rem);
            max-width: 600px;
        }

        [data-theme="light"] .battle-aurora-wrapper {
            box-shadow:
                0 4px 24px rgba(0, 0, 0, 0.08),
                0 8px 48px rgba(0, 0, 0, 0.06);
        }

        .comparison-compact .comparison-battle {
            display: block;
            background: #0c0c0e;
            border-radius: 16px;
            overflow: hidden;
        }

        .battle-header {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1.25rem;
            padding: 1.25rem 1rem;
            background: rgba(255, 255, 255, 0.02);
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        }

        .battle-tool {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.375rem;
        }

        .battle-tool-logo {
            width: 44px;
            height: 44px;
            object-fit: contain;
            border-radius: 6px;
        }

        .battle-tool-name {
            font-size: 0.6875rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .battle-tool-name {
            display: none; /* Hide tool names, icons only */
        }

        .battle-vs {
            font-size: 0.875rem;
            font-weight: 900;
            color: var(--rbx-red);
            text-shadow: 0 0 20px rgba(194, 60, 64, 0.4);
            letter-spacing: 0.1em;
        }

        .battle-rows {
            padding: 0;
        }

        /* Hide score tally */
        .battle-score {
            display: none;
        }

        .battle-row {
            display: grid;
            grid-template-columns: 1.2fr 1fr 1fr;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
            padding: 0;
        }

        .battle-row:last-child {
            border-bottom: none;
        }

        .battle-feature-name {
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-secondary);
            padding: 0.5rem 0.75rem;
            border-right: 1px solid rgba(255, 255, 255, 0.06);
        }

        .battle-cell {
            display: flex;
            justify-content: center;
            padding: 0.5rem 0;
            border-right: 1px solid rgba(255, 255, 255, 0.06);
        }

        .battle-cell:last-child {
            border-right: none;
        }

        .battle-cell-inner {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .battle-cell .status-icon {
            width: 24px;
            height: 24px;
        }

        .battle-cell .status-icon svg {
            width: 12px;
            height: 12px;
        }

        .battle-cell .exclusive-tag {
            font-size: 0.5625rem;
            padding: 0.2rem 0.4rem;
            padding-left: calc(0.4rem + 0.05em);
            letter-spacing: 0.06em;
        }

        /* Battle legend */
        .battle-legend {
            display: flex;
            justify-content: center;
            gap: 1.25rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.02);
            border-top: 1px solid rgba(255, 255, 255, 0.06);
        }

        .battle-legend-item {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            font-size: 0.625rem;
            color: var(--text-muted);
        }

        .battle-legend-item .status-icon {
            width: 18px;
            height: 18px;
        }

        .battle-legend-item .status-icon svg {
            width: 10px;
            height: 10px;
        }

        /* Battle mode transition */
        .battle-cell.fade-out {
            opacity: 0;
            transform: translateX(-10px);
            transition: opacity 0.15s ease, transform 0.15s ease;
        }

        .battle-cell.fade-in {
            animation: battleFadeIn 0.2s ease forwards;
        }

        @keyframes battleFadeIn {
            from {
                opacity: 0;
                transform: translateX(10px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Light theme */
        [data-theme="light"] .comparison-compact .comparison-battle {
            background: rgba(255, 255, 255, 0.98);
            border-color: rgba(0, 0, 0, 0.08);
        }

        [data-theme="light"] .battle-header {
            background: rgba(0, 0, 0, 0.02);
            border-bottom-color: rgba(0, 0, 0, 0.06);
        }

        [data-theme="light"] .battle-row {
            border-bottom-color: rgba(0, 0, 0, 0.04);
        }

        [data-theme="light"] .battle-feature-name {
            border-right-color: rgba(0, 0, 0, 0.06);
        }

        [data-theme="light"] .battle-cell {
            border-right-color: rgba(0, 0, 0, 0.06);
        }

        [data-theme="light"] .battle-cell.rbxsync {
            background: rgba(45, 212, 191, 0.05);
        }

        [data-theme="light"] .battle-legend {
            background: rgba(0, 0, 0, 0.02);
            border-top-color: rgba(0, 0, 0, 0.06);
        }

        /* rbxjson Section */
        .format-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            overflow: visible;
            position: relative;
        }

        .format-section > .format-info {
            /* Left column determines the row height */
        }

        .format-section > .code-example {
            /* Right column fills the height set by left column */
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            width: calc(50% - 1.5rem);
        }

        .format-info {
            overflow: visible;
        }

        .format-info h3 {
            font-size: var(--text-3xl);
            font-weight: 700;
            margin-bottom: 1.5rem;
            letter-spacing: -0.02em;
        }

        .format-info p {
            color: var(--text-secondary);
            margin-bottom: 1.25rem;
            line-height: 1.8;
            font-size: var(--text-lg);
        }

        .format-types {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }

        .format-type {
            background: var(--bg-tertiary);
            padding: 0.375rem 0.75rem;
            border-radius: 6px;
            font-size: 0.8rem;
            font-family: 'SF Mono', monospace;
            color: var(--text-secondary);
            transition: all 0.2s;
            cursor: pointer;
            border: 1px solid transparent;
        }

        .format-type:hover {
            background: rgba(194, 60, 64, 0.15);
            color: var(--rbx-red);
            border-color: var(--rbx-red);
            transform: translateY(-2px);
        }

        .format-type.active {
            background: var(--rbx-red);
            color: white;
            border-color: var(--rbx-red);
        }

        .format-hint {
            font-size: 0.8125rem;
            color: var(--text-muted);
            margin-top: 1rem;
            opacity: 0.8;
            font-style: italic;
        }

        /* Class Search UI */
        .class-search-container {
            position: relative;
            overflow: visible;
            padding: 12px 12px 16px 12px;
            margin: 1.5rem -12px 0 -12px;
        }

        .class-search-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            overflow: visible;
            z-index: 1;
            isolation: isolate;
            --aurora-brightness: 0;
        }

        /* Aurora borealis glow - organic, varied spots flowing around */
        .class-search-input-wrapper::before {
            content: '';
            position: absolute;
            inset: -8px;
            border-radius: 16px;
            background: conic-gradient(
                from var(--aurora-rotate, 0deg),
                rgba(45, 212, 191, 0.95) 0deg,
                rgba(45, 212, 191, 0.4) 12deg,
                transparent 20deg,
                transparent 35deg,
                rgba(34, 211, 238, 0.8) 42deg,
                rgba(34, 211, 238, 0.3) 55deg,
                transparent 65deg,
                transparent 88deg,
                rgba(99, 102, 241, 0.9) 95deg,
                transparent 115deg,
                transparent 145deg,
                rgba(244, 114, 182, 0.7) 152deg,
                rgba(244, 114, 182, 0.25) 168deg,
                transparent 178deg,
                transparent 200deg,
                rgba(251, 146, 60, 0.75) 208deg,
                transparent 225deg,
                transparent 255deg,
                rgba(74, 222, 128, 0.85) 268deg,
                rgba(74, 222, 128, 0.35) 285deg,
                transparent 298deg,
                transparent 322deg,
                rgba(45, 212, 191, 0.6) 335deg,
                rgba(45, 212, 191, 0.95) 360deg
            );
            opacity: calc(0.5 + var(--aurora-brightness) * 0.45);
            --aurora-blur: calc(6px - var(--aurora-brightness) * 4px);
            z-index: -1;
            animation: aurora-hue-shift 10s ease-in-out infinite;
            -webkit-mask-image: radial-gradient(ellipse 70% 80% at center, black 50%, transparent 100%);
            mask-image: radial-gradient(ellipse 70% 80% at center, black 50%, transparent 100%);
        }

        /* Second layer - counter-rotating with different spot sizes */
        .class-search-input-wrapper .aurora-layer {
            position: absolute;
            inset: -10px;
            border-radius: 18px;
            background: conic-gradient(
                from var(--aurora-rotate-2, 180deg),
                transparent 0deg,
                transparent 25deg,
                rgba(217, 70, 239, 0.7) 35deg,
                rgba(217, 70, 239, 0.3) 52deg,
                transparent 68deg,
                transparent 120deg,
                rgba(56, 189, 248, 0.8) 135deg,
                rgba(56, 189, 248, 0.25) 158deg,
                transparent 175deg,
                transparent 230deg,
                rgba(168, 85, 247, 0.7) 248deg,
                transparent 275deg,
                transparent 310deg,
                rgba(251, 191, 36, 0.5) 325deg,
                transparent 345deg,
                transparent 360deg
            );
            opacity: calc(0.35 + var(--aurora-brightness) * 0.45);
            --aurora-blur: calc(7px - var(--aurora-brightness) * 4px);
            z-index: -2;
            pointer-events: none;
            animation: aurora-hue-shift-reverse 14s ease-in-out infinite;
            -webkit-mask-image: radial-gradient(ellipse 65% 75% at center, black 45%, transparent 100%);
            mask-image: radial-gradient(ellipse 65% 75% at center, black 45%, transparent 100%);
        }

        /* Third layer - slow pulsing accents for extra depth */
        .class-search-input-wrapper .aurora-layer::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 20px;
            background: conic-gradient(
                from var(--aurora-rotate-3, 90deg),
                transparent 0deg,
                rgba(34, 197, 94, 0.5) 60deg,
                transparent 100deg,
                transparent 180deg,
                rgba(139, 92, 246, 0.45) 220deg,
                transparent 270deg,
                transparent 360deg
            );
            filter: blur(6px);
            opacity: 0.6;
            -webkit-mask-image: radial-gradient(ellipse 60% 70% at center, black 40%, transparent 100%);
            mask-image: radial-gradient(ellipse 60% 70% at center, black 40%, transparent 100%);
        }

        .class-search-input-wrapper::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 8px;
            background: var(--bg-tertiary);
            z-index: -1;
        }

        @property --aurora-rotate {
            syntax: '<angle>';
            initial-value: 0deg;
            inherits: true;
        }

        @property --aurora-rotate-2 {
            syntax: '<angle>';
            initial-value: 180deg;
            inherits: true;
        }

        @property --aurora-rotate-3 {
            syntax: '<angle>';
            initial-value: 90deg;
            inherits: true;
        }

        /* Animation driven by JS for smooth acceleration/deceleration */

        .class-search-icon {
            position: absolute;
            left: 0.875rem;
            width: 18px;
            height: 18px;
            color: var(--text-muted);
            pointer-events: none;
        }

        .class-search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.75rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-family: 'SF Mono', 'Fira Code', monospace;
            font-size: 0.875rem;
            color: var(--text-primary);
            outline: none;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .class-search-input::placeholder {
            color: var(--text-muted);
        }

        .class-search-input:focus {
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
        }

        [data-theme="light"] .class-search-input:focus {
            border-color: rgba(0, 0, 0, 0.2);
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.05);
        }

        .class-search-count {
            position: absolute;
            right: 0.875rem;
            font-size: 0.75rem;
            color: var(--text-muted);
            font-family: 'SF Mono', monospace;
        }

        .class-search-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            margin-top: 4px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            max-height: min(60vh, 400px);
            overflow-y: auto;
            overflow-x: hidden;
            z-index: 100;
            display: none;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        .class-search-dropdown.open {
            display: block;
        }

        /* Custom scrollbar for class dropdown */
        .class-search-dropdown::-webkit-scrollbar {
            width: 6px;
        }
        .class-search-dropdown::-webkit-scrollbar-track {
            background: transparent;
        }
        .class-search-dropdown::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 3px;
        }
        .class-search-dropdown::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.25);
        }
        [data-theme="light"] .class-search-dropdown::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.15);
        }
        [data-theme="light"] .class-search-dropdown::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.25);
        }

        .class-search-item {
            padding: 0.5rem 0.75rem;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            transition: background 0.15s;
            border-bottom: 1px solid var(--border);
        }

        .class-search-item:last-child {
            border-bottom: none;
        }

        .class-search-item:hover,
        .class-search-item.selected {
            background: rgba(194, 60, 64, 0.08);
        }

        .class-search-item.selected {
            background: rgba(194, 60, 64, 0.12);
        }

        .class-search-item-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.5rem;
            min-width: 0;
        }

        .class-search-item-name {
            font-family: 'SF Mono', monospace;
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            min-width: 0;
            flex-shrink: 1;
        }

        .class-search-item-name .match {
            color: var(--rbx-red);
            font-weight: 600;
        }

        .class-search-item-meta {
            font-size: 0.7rem;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap;
        }

        .class-search-item-meta .divider {
            color: var(--border);
        }

        .class-search-empty {
            padding: 1.5rem 1rem;
            text-align: center;
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        .class-search-badges {
            display: flex;
            gap: 0.25rem;
            flex-shrink: 0;
        }

        .class-badge {
            font-size: 0.6rem;
            padding: 0.125rem 0.35rem;
            border-radius: 3px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.02em;
        }

        .class-badge.blue {
            background: rgba(59, 130, 246, 0.15);
            color: #60a5fa;
        }

        .class-badge.purple {
            background: rgba(139, 92, 246, 0.15);
            color: #a78bfa;
        }

        .class-badge.orange {
            background: rgba(251, 146, 60, 0.15);
            color: #fb923c;
        }

        .class-badge.gray {
            background: rgba(107, 114, 128, 0.15);
            color: #9ca3af;
        }

        [data-theme="light"] .class-badge.blue {
            background: rgba(59, 130, 246, 0.1);
            color: #2563eb;
        }

        [data-theme="light"] .class-badge.purple {
            background: rgba(139, 92, 246, 0.1);
            color: #7c3aed;
        }

        [data-theme="light"] .class-badge.orange {
            background: rgba(251, 146, 60, 0.1);
            color: #ea580c;
        }

        [data-theme="light"] .class-badge.gray {
            background: rgba(107, 114, 128, 0.1);
            color: #4b5563;
        }

        /* Quick picks */
        .format-types-quick {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .format-type-quick {
            background: var(--bg-tertiary);
            padding: 0.375rem 0.75rem;
            border-radius: 6px;
            font-size: 0.8rem;
            font-family: 'SF Mono', monospace;
            color: var(--text-secondary);
            transition: all 0.2s;
            cursor: pointer;
            border: 1px solid transparent;
        }

        .format-type-quick:hover {
            background: rgba(194, 60, 64, 0.15);
            color: var(--rbx-red);
            border-color: var(--rbx-red);
            transform: translateY(-2px);
        }

        .format-type-quick.active {
            background: var(--rbx-red);
            color: white;
            border-color: var(--rbx-red);
        }

        .format-section > .code-example {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 10px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .code-header {
            background: var(--bg-tertiary);
            padding: 0 12px;
            height: 38px;
            font-size: 0.8125rem;
            font-weight: 500;
            border-bottom: 1px solid var(--border);
            flex-shrink: 0;
            display: flex;
            align-items: center;
            position: relative;
        }

        .code-header-dots {
            display: flex;
            gap: 6px;
            margin-right: 12px;
        }

        .code-header-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .code-header-dot.red { background: #ff5f57; }
        .code-header-dot.yellow { background: #febc2e; }
        .code-header-dot.green { background: #28c840; }

        .code-header-title {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .code-example pre {
            padding: 1rem;
            font-family: 'SF Mono', 'Fira Code', monospace;
            font-size: 0.8125rem;
            line-height: 1.6;
            overflow: auto;
            flex: 1;
            margin: 0;
        }

        .code-example .key { color: #7dd3fc; }
        .code-example .string { color: #86efac; }
        .code-example .number { color: #fcd34d; }
        .code-example .bool { color: #c4b5fd; }
        .code-example .null { color: #f87171; }

        /* Custom scrollbar for code example */
        .code-example pre::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        .code-example pre::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
            border-radius: 4px;
        }
        .code-example pre::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }
        .code-example pre::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.35);
        }
        .code-example pre::-webkit-scrollbar-corner {
            background: var(--bg-tertiary);
        }
        /* Firefox */
        .code-example pre {
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.2) var(--bg-tertiary);
        }

        /* Light theme scrollbar */
        [data-theme="light"] .code-example pre::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.25);
        }
        [data-theme="light"] .code-example pre::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.4);
        }
        [data-theme="light"] .code-example pre {
            scrollbar-color: rgba(0, 0, 0, 0.25) var(--bg-tertiary);
        }

        /* Light theme containers */
        [data-theme="light"] .code-example {
            background: #f8f9fa;
            border-color: #e2e8f0;
        }
        [data-theme="light"] .code-header {
            background: #edf2f7;
            border-bottom-color: #e2e8f0;
        }
        [data-theme="light"] .interactive-shell {
            background: #f8f9fa;
            border-color: #e2e8f0;
        }
        [data-theme="light"] .shell-header {
            background: #edf2f7;
            border-bottom-color: #e2e8f0;
        }

        /* CLI Section - Terminal Style Premium Redesign */
        .cli-terminal {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .cli-terminal-header {
            background: var(--bg-tertiary);
            padding: 0.875rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            border-bottom: 1px solid var(--border);
        }

        .cli-terminal-dots {
            display: flex;
            gap: 0.5rem;
        }

        .cli-terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .cli-terminal-dot.red { background: #ff5f57; }
        .cli-terminal-dot.yellow { background: #febc2e; }
        .cli-terminal-dot.green { background: #28c840; }

        .cli-terminal-title {
            flex: 1;
            text-align: center;
            font-size: 0.8125rem;
            color: var(--text-muted);
            font-family: 'SF Mono', monospace;
        }

        .cli-terminal-body {
            padding: 1.5rem;
        }

        /* Terminal - matches site theme */
        .interactive-shell {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 10px;
            overflow: hidden;
            font-family: 'SF Mono', 'Menlo', 'Monaco', monospace;
            font-size: 13px;
            line-height: 1.4;
        }

        /* Title bar */
        .shell-header {
            background: var(--bg-tertiary);
            padding: 0 12px;
            height: 38px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid var(--border);
            position: relative;
        }

        .shell-dots {
            display: flex;
            gap: 8px;
            position: absolute;
            left: 12px;
        }

        .shell-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .shell-dot.red { background: #ff5f57; }
        .shell-dot.yellow { background: #febc2e; }
        .shell-dot.green { background: #28c840; }

        .shell-title {
            flex: 1;
            text-align: center;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
        }

        .shell-actions {
            position: absolute;
            right: 12px;
        }

        .shell-clear-btn {
            background: transparent;
            border: none;
            padding: 4px 8px;
            font-size: 11px;
            color: var(--text-muted);
            cursor: pointer;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            border-radius: 4px;
        }

        .shell-clear-btn:hover {
            background: var(--bg-secondary);
            color: var(--text-secondary);
        }

        /* Terminal body */
        .shell-body {
            padding: 12px 16px;
            min-height: 240px;
            max-height: 340px;
            overflow-y: auto;
            color: var(--text-primary);
        }

        .shell-welcome {
            margin-bottom: 16px;
            color: var(--text-muted);
        }

        .shell-welcome-text {
            font-size: 13px;
        }

        .shell-welcome-text code {
            background: var(--bg-secondary);
            color: var(--rbx-red);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: inherit;
        }

        .shell-link {
            color: #7dd3fc;
            text-decoration: none;
            transition: color 0.15s ease;
        }

        .shell-link:hover {
            color: #bae6fd;
            text-decoration: underline;
        }

        /* Command history */
        .shell-history-item {
            margin-bottom: 12px;
        }

        .shell-history-cmd {
            display: flex;
            align-items: center;
            gap: 0;
            margin-bottom: 4px;
        }

        .shell-history-cmd .prompt {
            color: #10b981;
        }

        .shell-history-cmd .cmd {
            color: var(--text-primary);
        }

        .shell-history-cmd .cmd .prefix {
            color: #7dd3fc;
        }

        .shell-history-cmd .cmd .subcmd {
            color: #fcd34d;
        }

        .shell-history-cmd .cmd .args {
            color: #c4b5fd;
        }

        /* Output styling */
        .shell-output {
            padding-left: 0;
            font-size: 13px;
            line-height: 1.5;
            white-space: pre-wrap;
            color: var(--text-secondary);
        }

        .shell-output .info {
            color: #7dd3fc;
        }

        .shell-output .success {
            color: #86efac;
        }

        .shell-output .error {
            color: #f87171;
        }

        .shell-output .muted {
            color: var(--text-muted);
        }

        .shell-output .highlight {
            color: #fcd34d;
        }

        /* Input line */
        .shell-input-line {
            display: flex;
            align-items: center;
            gap: 0;
            padding: 8px 16px 12px;
            background: transparent;
            position: relative;
        }

        .shell-prompt {
            color: #10b981;
            flex-shrink: 0;
        }

        .shell-prefix {
            color: #7dd3fc;
            flex-shrink: 0;
            margin-right: 4px;
        }

        .shell-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            font-family: inherit;
            font-size: 13px;
            color: var(--text-primary);
            caret-color: var(--rbx-red);
            padding: 0;
        }

        .shell-input::placeholder {
            color: var(--text-muted);
        }

        /* Autocomplete dropdown */
        .shell-autocomplete {
            position: absolute;
            bottom: 100%;
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-bottom: none;
            border-radius: 6px 6px 0 0;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }

        .shell-autocomplete.open {
            display: block;
        }

        .shell-autocomplete-item {
            padding: 8px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .shell-autocomplete-item:hover,
        .shell-autocomplete-item.selected {
            background: var(--bg-tertiary);
        }

        .shell-autocomplete-item .cmd-name {
            color: #fcd34d;
            font-weight: 500;
        }

        .shell-autocomplete-item .cmd-desc {
            color: var(--text-muted);
            font-size: 12px;
        }

        /* Scrollbar */
        .shell-body::-webkit-scrollbar {
            width: 8px;
        }
        .shell-body::-webkit-scrollbar-track {
            background: transparent;
        }
        .shell-body::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 4px;
        }
        .shell-body::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        /* Light theme scrollbar */
        [data-theme="light"] .shell-body::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
        }
        [data-theme="light"] .shell-body::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }

        /* Light theme prompt colors */
        [data-theme="light"] .shell-history-cmd .prompt,
        [data-theme="light"] .shell-prompt {
            color: #059669;
        }
        [data-theme="light"] .shell-history-cmd .cmd .prefix,
        [data-theme="light"] .shell-prefix {
            color: #0284c7;
        }
        [data-theme="light"] .shell-history-cmd .cmd .subcmd {
            color: #d97706;
        }
        [data-theme="light"] .shell-history-cmd .cmd .args {
            color: #7c3aed;
        }
        [data-theme="light"] .shell-output .info {
            color: #0284c7;
        }
        [data-theme="light"] .shell-output .success {
            color: #059669;
        }
        [data-theme="light"] .shell-output .highlight,
        [data-theme="light"] .shell-autocomplete-item .cmd-name {
            color: #d97706;
        }
        [data-theme="light"] .shell-link {
            color: #0284c7;
        }
        [data-theme="light"] .shell-link:hover {
            color: #0369a1;
        }

        .cli-categories {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            align-items: start;
        }

        .cli-category {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .cli-category-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.25rem;
        }

        .cli-category-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
        }

        .cli-category-title {
            font-size: 0.6875rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            font-weight: 600;
        }

        .cli-command {
            position: relative;
            display: flex;
            align-items: flex-start;
            gap: 0.625rem;
            padding: 0.75rem 2.5rem 0.75rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .cli-command:hover {
            border-color: var(--border-hover);
            background: var(--bg-tertiary);
        }

        .cli-command .cli-copy-btn {
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            width: 28px;
            height: 28px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-muted);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.2s;
        }

        .cli-command:hover .cli-copy-btn {
            opacity: 1;
        }

        .cli-command .cli-copy-btn:hover {
            background: var(--bg-elevated);
            border-color: var(--rbx-red);
            color: var(--text-primary);
        }

        .cli-command .cli-copy-btn svg {
            width: 14px;
            height: 14px;
        }

        [data-theme="light"] .cli-command .cli-copy-btn {
            background: #f1f5f9;
            border-color: #e2e8f0;
            color: #4a5568;
        }
        [data-theme="light"] .cli-command .cli-copy-btn:hover {
            background: #e2e8f0;
            border-color: #c23c40;
            color: #1a1a2e;
        }

        .cli-command .cli-copy-btn .check-icon {
            position: absolute;
            color: var(--success);
            transform: scale(0);
            transition: transform 0.2s;
        }

        .cli-command .cli-copy-btn.copied .copy-icon { transform: scale(0); }
        .cli-command .cli-copy-btn.copied .check-icon { transform: scale(1); }

        .cli-command.new {
            border-color: var(--rbx-red);
            background: linear-gradient(135deg, rgba(194, 60, 64, 0.05), var(--bg-secondary));
        }

        .cli-command-new-badge {
            position: absolute;
            top: -1px;
            right: 0.75rem;
            background: var(--rbx-red);
            color: white;
            font-size: 0.5625rem;
            font-weight: 700;
            padding: 0.125rem 0.375rem;
            border-radius: 0 0 4px 4px;
            letter-spacing: 0.05em;
        }

        .cli-command-prompt {
            color: var(--success);
            font-family: 'SF Mono', monospace;
            font-size: 0.8125rem;
            font-weight: 600;
            user-select: none;
            position: relative;
        }

        .cli-command-content {
            flex: 1;
            position: relative;
        }

        .cli-command-text {
            font-family: 'SF Mono', monospace;
            font-size: 0.8125rem;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .cli-command-text .cmd {
            color: var(--rbx-red);
            font-weight: 600;
        }

        .cli-command-text .flag {
            color: #7dd3fc;
        }

        .cli-command-text .arg {
            color: #86efac;
        }

        .cli-command-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* CLI grid for responsive */
        .cli-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .cli-card {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.25rem;
            transition: all 0.2s;
        }

        .cli-card:hover {
            border-color: rgba(194, 60, 64, 0.5);
            transform: translateX(4px);
        }

        .cli-card code {
            display: block;
            font-family: 'SF Mono', monospace;
            font-size: 0.8125rem;
            color: var(--rbx-red);
            margin-bottom: 0.5rem;
        }

        .cli-card p {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        .cli-card.new {
            border-color: var(--rbx-red);
            position: relative;
        }

        .cli-card.new::before {
            content: 'NEW';
            position: absolute;
            top: -0.5rem;
            right: 0.75rem;
            background: var(--rbx-red);
            color: white;
            font-size: 0.625rem;
            font-weight: 700;
            padding: 0.125rem 0.375rem;
            border-radius: 3px;
        }

        /* Install Section */
        .install-steps {
            max-width: 700px;
            margin: 0 auto;
        }

        .install-step {
            display: flex;
            gap: 1.25rem;
            margin-bottom: 2rem;
        }

        /* OS Content Visibility */
        .os-content {
            display: none;
        }

        .os-content.active {
            display: block;
        }

        .os-inline {
            display: none;
        }

        .os-inline.active {
            display: inline;
        }

        /* Mode Content (Simple/Advanced) */
        .mode-content {
            display: none;
            animation: fadeSlideIn 0.3s ease-out;
        }

        .mode-content.active {
            display: block;
        }

        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(8px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Install Action Cards (for Simple mode) */
        .install-action-card {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1.25rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .install-action-card:hover {
            border-color: var(--rbx-red);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        .install-action-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .install-action-icon.roblox {
            background: linear-gradient(135deg, #e53935, #c62828);
        }

        .install-action-icon.vscode {
            background: linear-gradient(135deg, #007ACC, #005A9E);
        }

        .install-action-icon svg {
            width: 24px;
            height: 24px;
            color: white;
        }

        .install-action-content {
            flex: 1;
        }

        .install-action-content h5 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }

        .install-action-content p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin: 0;
        }

        .install-action-btn {
            padding: 0.625rem 1.25rem;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        .install-action-btn.primary {
            background: var(--rbx-red);
            color: white;
            border: none;
        }

        .install-action-btn.primary:hover {
            background: #c62828;
            transform: scale(1.02);
        }

        .install-action-btn.secondary {
            background: transparent;
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .install-action-btn.secondary:hover {
            border-color: var(--rbx-red);
            color: var(--rbx-red);
        }

        .install-action-btn svg {
            width: 16px;
            height: 16px;
        }

        /* NEW Install Section Styles - Unified Control Bar */
        .install-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .install-control-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .install-control-label {
            font-size: 0.6875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
        }

        .install-toggle {
            display: flex;
            gap: 2px;
            background: var(--bg-secondary);
            padding: 3px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .install-toggle-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.375rem;
            padding: 0.5rem 0.75rem;
            background: transparent;
            border: none;
            border-radius: 6px;
            color: var(--text-muted);
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .install-toggle-btn:hover {
            color: var(--text-secondary);
        }

        .install-toggle-btn.active {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .install-toggle-btn svg {
            width: 14px;
            height: 14px;
        }

        /* Icon-only variant for OS toggle */
        .install-toggle-btn.icon-only {
            padding: 0.5rem;
            width: 34px;
        }

        /* Light theme */
        [data-theme="light"] .install-toggle {
            background: #f1f5f9;
            border-color: #e2e8f0;
        }
        [data-theme="light"] .install-toggle-btn:hover {
            color: #1a1a2e;
            background: rgba(0, 0, 0, 0.03);
        }
        [data-theme="light"] .install-toggle-btn.active {
            background: #ffffff;
            color: #1a1a2e;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        /* Legacy support - keep old classes working */
        .install-mode-switch {
            display: none;
        }

        /* Install Cards Grid */
        .install-cards-grid {
            display: flex;
            justify-content: center;
            gap: 1rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .install-card-wrapper {
            display: flex;
            flex-direction: column;
            gap: 0.625rem;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .install-card-wrapper.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .install-card-wrapper:nth-child(1) { transition-delay: 0s; }
        .install-card-wrapper:nth-child(2) { transition-delay: 0.309s; }
        .install-card-wrapper:nth-child(3) { transition-delay: 0.618s; }

        .install-card-wrapper .install-card {
            flex: 1;
        }

        .install-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
            transition: all 0.2s ease;
            min-width: 0;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .install-card:hover {
            border-color: var(--border-hover);
        }

        .install-card-header {
            display: flex;
            align-items: center;
            gap: 0.625rem;
            height: 28px;
        }

        .install-card-num {
            width: 24px;
            height: 24px;
            background: var(--rbx-red);
            color: white;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.75rem;
            flex-shrink: 0;
            animation: primary-hue-shift 6s ease-in-out infinite;
        }

        .install-card-header h4 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }

        .optional-badge {
            background: var(--bg-tertiary);
            color: var(--text-muted);
            font-size: 0.625rem;
            font-weight: 600;
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            margin-left: auto;
        }

        /* Alt-link below card */
        .install-card-wrapper .install-alt-link {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-decoration: none;
            text-align: center;
        }

        .install-card-wrapper .install-alt-link:hover {
            color: var(--rbx-red);
        }

        .install-store-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            align-self: center;
            gap: 0.5rem;
            height: 38px;
            padding: 0 1rem;
            border-radius: 8px;
            text-decoration: none;
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .install-store-btn.roblox {
            background: #c62828;
            color: white;
        }

        .install-store-btn.roblox:hover {
            background: #d32f2f;
        }

        .install-store-btn.vscode {
            background: #0066b8;
            color: white;
        }

        .install-store-btn.vscode:hover {
            background: #0078d4;
        }

        /* Extension buttons - refined two-option layout */
        .extension-buttons {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .extension-buttons .install-store-btn {
            flex: 1;
            font-size: 0.75rem;
            height: 36px;
            padding: 0 0.875rem;
        }

        .extension-buttons .install-store-btn.openvsx {
            background: #a60ee5;
            color: white;
        }

        .extension-buttons .install-store-btn.openvsx:hover {
            background: #b835f0;
        }

        .install-store-btn .store-icon {
            width: 18px;
            height: 18px;
            flex-shrink: 0;
        }

        .install-alt-link {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-decoration: none;
            text-align: center;
        }

        .install-alt-link:hover {
            color: var(--rbx-red);
        }

        .install-oneliner {
            display: flex;
            align-items: center;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
            height: 38px;
            min-width: 0;
        }

        .install-oneliner code {
            flex: 1;
            min-width: 0;
            padding: 0 0.75rem;
            font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
            font-size: 0.7rem;
            color: var(--text-primary);
            white-space: nowrap;
            overflow-x: auto;
            overflow-y: hidden;
            display: flex;
            align-items: center;
            height: 100%;
            scrollbar-width: none; /* Firefox */
        }

        .install-oneliner code::-webkit-scrollbar {
            display: none; /* Chrome/Safari */
        }

        .copy-oneliner-btn {
            width: 38px;
            height: 38px;
            background: var(--bg-tertiary);
            border: none;
            border-left: 1px solid var(--border);
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .copy-oneliner-btn:hover {
            background: var(--bg-elevated);
            color: var(--text-primary);
        }

        .copy-oneliner-btn svg {
            width: 16px;
            height: 16px;
        }

        /* Install Final Step - Two Equal Paths */
        .install-final-step {
            margin-top: 2.5rem;
            padding-top: 2.5rem;
            border-top: 1px solid var(--border);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease, transform 0.8s ease;
            transition-delay: 0.927s;
        }

        .install-final-step.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .final-step-paths {
            display: flex;
            align-items: flex-start;
            justify-content: center;
            gap: 2.5rem;
            text-align: center;
        }

        .final-step-path {
            flex: 1;
            max-width: 280px;
        }

        .final-step-divider {
            font-size: var(--text-sm);
            color: var(--text-muted);
            opacity: 0.4;
            padding-top: 0.25rem;
        }

        .final-step-action {
            font-size: var(--text-lg);
            font-weight: 600;
            font-style: normal;
            color: var(--text-primary);
            letter-spacing: -0.01em;
            line-height: 1.4;
            margin: 0 0 0.375rem 0;
        }

        .final-step-action .action-extract {
            color: var(--rbx-red);
        }

        .final-step-action code.action-migrate {
            font-family: 'SF Mono', monospace;
            font-size: 0.875em;
            color: var(--gold);
            background: transparent;
            padding: 0;
            white-space: nowrap;
        }

        .final-step-sub {
            font-size: var(--text-sm);
            font-style: normal;
            color: var(--text-muted);
            margin: 0;
        }

        @media (max-width: 650px) {
            .final-step-paths {
                flex-direction: column;
                align-items: center;
                gap: 1.25rem;
            }

            .final-step-path {
                max-width: 100%;
            }
        }

        /* Responsive */
        @media (max-width: 900px) {
            .install-cards-grid {
                flex-direction: column;
                align-items: center;
            }

            .install-card-wrapper {
                width: 100%;
                max-width: 400px;
            }
        }

        @media (max-width: 600px) {
            .install-oneliner code {
                font-size: 0.625rem;
            }

            .install-card-wrapper {
                width: fit-content;
                max-width: 100%;
            }

            .install-card {
                width: fit-content;
                min-width: 0;
            }

            .install-cards-grid {
                width: 100%;
            }
        }

        .step-num {
            flex-shrink: 0;
            width: 32px;
            height: 32px;
            background: var(--rbx-red);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.875rem;
        }

        .step-content { flex: 1; }

        .step-content h4 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.375rem;
        }

        .step-content > p {
            font-size: 0.9375rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }

        /* Update Cards Grid */
        .update-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        @media (max-width: 900px) {
            .update-cards {
                grid-template-columns: 1fr;
                max-width: 500px;
            }
        }

        .update-card {
            --x: 0;
            --y: 0;
            --glow-opacity: 0;
            position: relative;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: hidden;
        }

        .update-card::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            background: radial-gradient(
                400px circle at calc(var(--x) * 1px) calc(var(--y) * 1px),
                rgba(194, 60, 64, 0.12),
                transparent 40%
            );
            opacity: var(--glow-opacity);
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .update-card.auto::before {
            background: radial-gradient(
                400px circle at calc(var(--x) * 1px) calc(var(--y) * 1px),
                rgba(45, 212, 191, 0.12),
                transparent 40%
            );
        }

        .update-card::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            padding: 1px;
            background: radial-gradient(
                300px circle at calc(var(--x) * 1px) calc(var(--y) * 1px),
                rgba(194, 60, 64, 0.6),
                transparent 50%
            );
            -webkit-mask:
                linear-gradient(#fff 0 0) content-box,
                linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: var(--glow-opacity);
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .update-card.auto::after {
            background: radial-gradient(
                300px circle at calc(var(--x) * 1px) calc(var(--y) * 1px),
                rgba(45, 212, 191, 0.6),
                transparent 50%
            );
        }

        .update-card:hover {
            transform: translateY(-2px);
        }

        .update-card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .update-label {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.375rem 0.75rem;
            background: var(--rbx-red);
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: white;
        }

        .update-label svg {
            width: 12px;
            height: 12px;
        }

        .update-card.auto .update-label {
            background: #0d9488;
            color: white;
        }

        .auto-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.25rem 0.6rem;
            background: rgba(45, 212, 191, 0.1);
            border: 1px solid rgba(45, 212, 191, 0.2);
            border-radius: 12px;
            font-size: 0.65rem;
            font-weight: 500;
            color: var(--accent-primary);
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .auto-badge svg {
            width: 10px;
            height: 10px;
        }

        .update-card h4 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .update-card > p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .update-card > p a {
            color: var(--accent-primary);
            text-decoration: none;
            font-weight: 500;
        }

        .update-card > p a:hover {
            text-decoration: underline;
        }

        .update-card .code-block-wrapper {
            margin-top: 1rem;
        }

        .update-card .code-block {
            font-size: 0.8125rem;
            padding: 1rem;
        }

        .update-os-toggle {
            display: flex;
            gap: 2px;
            margin-bottom: 0.75rem;
            background: var(--bg-tertiary);
            border-radius: 6px;
            padding: 2px;
            width: fit-content;
        }

        .update-os-btn {
            display: flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.35rem 0.65rem;
            background: transparent;
            border: none;
            border-radius: 4px;
            color: var(--text-muted);
            font-size: 0.7rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .update-os-btn:hover {
            color: var(--text-secondary);
        }

        .update-os-btn.active {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .update-os-btn svg {
            width: 12px;
            height: 12px;
        }

        .update-os-content {
            display: none;
        }

        .update-os-content.active {
            display: block;
        }

        .code-block {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            font-family: 'SF Mono', monospace;
            font-size: 0.8125rem;
            overflow-x: auto;
            line-height: 1.7;
        }

        .code-block .comment { color: var(--text-muted); }
        .code-block .cmd { color: var(--rbx-red); }

        /* Stars Background with Parallax */
        .stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: -1;
            background: radial-gradient(ellipse at bottom, #1a1a1a 0%, var(--bg-primary) 100%);
        }

        [data-theme="light"] .stars-container {
            background: radial-gradient(ellipse at bottom, #e8e8ec 0%, var(--bg-primary) 100%);
        }

        /* Twinkling stars - squares, no transitions (JS handles animation) */
        .twinkle-star {
            position: absolute;
            background: #fff;
            opacity: 0.4;
            will-change: transform;
        }

        .twinkle-star.twinkle {
            animation: twinkle 0.6s ease-out forwards;
        }

        @keyframes twinkle {
            0%, 100% { background-color: rgba(255, 255, 255, 0.4); }
            50% { background-color: rgba(255, 255, 255, 1); }
        }

        /* Gradient overlay inside stars container - only affects stars */
        .stars-gradient-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(9, 9, 11, 1) 0%, rgba(9, 9, 11, 0.8) 40%, rgba(9, 9, 11, 0) 85%);
            pointer-events: none;
            z-index: 1;
        }

        [data-theme="light"] .stars-gradient-overlay {
            background: linear-gradient(to top, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.8) 40%, rgba(255, 255, 255, 0) 85%);
        }




        /* Animated Shiny Text */
        .shiny-text {
            --shiny-width: 120px;
            position: relative;
            display: inline-block;
            color: var(--text-secondary);
        }

        .shiny-text::before {
            content: attr(data-text);
            position: absolute;
            inset: 0;
            background: linear-gradient(
                120deg,
                transparent 0%,
                transparent 40%,
                rgba(255, 255, 255, 0.9) 50%,
                transparent 60%,
                transparent 100%
            );
            background-size: 200% 100%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: shiny-text 3s ease-in-out infinite;
        }

        @keyframes shiny-text {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Copy Button for Code Blocks */
        .code-block-wrapper {
            position: relative;
        }

        .copy-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            width: 32px;
            height: 32px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            color: var(--text-secondary);
        }

        .copy-btn:hover {
            background: var(--bg-elevated);
            border-color: var(--rbx-red);
            color: var(--text-primary);
        }

        .copy-btn svg {
            width: 16px;
            height: 16px;
            transition: all 0.2s;
        }

        .copy-btn .check-icon {
            position: absolute;
            color: var(--success);
            transform: scale(0);
        }

        .copy-btn.copied .copy-icon { transform: scale(0); }
        .copy-btn.copied .check-icon { transform: scale(1); }
        .copy-btn.copied { border-color: var(--success); }

        /* Light theme copy buttons */
        [data-theme="light"] .copy-btn {
            background: #f1f5f9;
            border-color: #e2e8f0;
            color: #4a5568;
        }
        [data-theme="light"] .copy-btn:hover {
            background: #e2e8f0;
            border-color: #c23c40;
            color: #1a1a2e;
        }
        [data-theme="light"] .copy-oneliner-btn {
            background: #f1f5f9;
            color: #4a5568;
            border-left-color: #e2e8f0;
        }
        [data-theme="light"] .copy-oneliner-btn:hover {
            background: #e2e8f0;
            color: #1a1a2e;
        }
        [data-theme="light"] .install-card {
            background: #f8f9fa;
            border-color: #e2e8f0;
        }
        [data-theme="light"] .install-card:hover {
            border-color: #cbd5e0;
        }
        /* Testimonial Cards - 3D Tilt Effect */
        .testimonials-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1.5rem;
            perspective: 1000px;
        }

        .testimonials-grid .testimonial-card {
            flex: 0 1 calc(25% - 1.25rem);
            min-width: 240px;
        }

        .testimonial-card {
            --tilt-x: 0deg;
            --tilt-y: 0deg;
            --shine-x: 50%;
            --shine-y: 50%;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
            transform: perspective(1000px) rotateX(var(--tilt-x)) rotateY(var(--tilt-y));
            transition: transform 0.15s ease-out, box-shadow 0.15s ease-out, border-color 0.15s ease-out, opacity 0.5s ease;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            cursor: default;
        }


        /* Decorative quote mark */
        .testimonial-card::after {
            content: '"';
            position: absolute;
            top: 0.5rem;
            right: 1rem;
            font-size: 4rem;
            font-family: Georgia, serif;
            color: rgba(194, 60, 64, 0.1);
            line-height: 1;
            pointer-events: none;
            z-index: 1;
            transform: translateZ(20px);
        }

        .testimonial-card:hover {
            border-color: rgba(194, 60, 64, 0.3);
            box-shadow:
                0 25px 50px rgba(0, 0, 0, 0.25),
                0 0 0 1px rgba(194, 60, 64, 0.15);
            z-index: 10;
        }

        /* Inner content gets slight 3D lift */
        .testimonial-card .testimonial-header,
        .testimonial-card .testimonial-text {
            transform: translateZ(30px);
        }

        .testimonial-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .testimonial-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--rbx-red), #8b5cf6);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.125rem;
            color: white;
        }

        .testimonial-avatar-img {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
        }

        .testimonial-info {
            flex: 1;
        }

        .testimonial-name {
            font-weight: 600;
            font-size: 0.9375rem;
            margin-bottom: 0.125rem;
        }

        .testimonial-handle {
            color: var(--text-muted);
            font-size: 0.8125rem;
        }

        .testimonial-twitter {
            color: #1DA1F2;
            width: 20px;
            height: 20px;
        }

        .testimonial-discord {
            color: #5865F2;
            width: 20px;
            height: 20px;
        }

        .testimonial-text {
            font-size: 0.9375rem;
            line-height: 1.6;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            position: relative;
        }

        .testimonial-text strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .testimonial-date {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Footer */
        footer {
            padding: 3rem 2rem;
            border-top: 1px solid var(--border);
            text-align: center;
        }

        .footer-logo {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
        }

        .footer-logo img { width: 24px; height: 24px; }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1.5rem;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            transition: color 0.15s;
        }

        .footer-links a:hover { color: var(--text-primary); }

        .footer-copy {
            color: var(--text-muted);
            font-size: 0.8125rem;
        }

        .footer-copy a {
            color: var(--text-muted);
            text-decoration: none;
            transition: color 0.15s ease;
        }

        .footer-copy a:hover {
            color: var(--text-secondary);
        }

        .footer-copy a.footer-company {
            color: var(--text-secondary);
        }

        .footer-copy a.footer-company:hover {
            color: var(--text-primary);
        }

        .footer-copy .footer-tech {
            opacity: 0.85;
        }

        .footer-copy .footer-tech:hover {
            opacity: 1;
        }

        /* Responsive */
        @media (max-width: 1100px) {
            .testimonials-grid .testimonial-card { flex: 0 1 calc(50% - 1rem); }
        }

        @media (max-width: 1000px) {
            /* Hide nav links on tablet */
            .nav-links { display: none; }

            .bento-grid {
                grid-template-columns: 1fr 1fr;
            }
            .bento-hero {
                grid-column: 1 / -1;
                grid-row: auto;
                min-height: auto;
            }
            .value-grid { grid-template-columns: 1fr; }
            .feature-grid { grid-template-columns: 1fr; }
            .format-section { grid-template-columns: 1fr; }
            .format-section > .code-example {
                position: relative;
                width: 100%;
                max-height: 350px;
            }
            .extract-section { grid-template-columns: 1fr; }
            .e2e-section { grid-template-columns: 1fr; }
            .cli-grid { grid-template-columns: 1fr 1fr; }
            .cli-categories { grid-template-columns: 1fr; gap: 1.5rem; }
        }

        @media (max-width: 768px) {
            /* Mobile Type Scale */
            :root {
                --text-5xl: 2rem;      /* 32px */
                --text-4xl: 1.75rem;   /* 28px */
                --text-3xl: 1.5rem;    /* 24px */
                --text-2xl: 1.25rem;   /* 20px */
                --text-xl: 1.125rem;   /* 18px */
                --text-lg: 1rem;       /* 16px */
                --text-base: 0.9375rem;/* 15px */
                --text-sm: 0.8125rem;  /* 13px */
                --text-xs: 0.75rem;    /* 12px */
                --text-2xs: 0.625rem;  /* 10px */
            }

            .comparison-table { min-width: 700px; }
            .comparison-table th:first-child,
            .comparison-table td:first-child { width: 200px; min-width: 200px; padding-right: 1rem; }
            .comparison-table th:nth-child(2),
            .comparison-table td:nth-child(2) { left: 200px; }

            /* Install section - full width buttons */
            .install-store-btn {
                width: 100%;
                justify-content: center;
            }

            /* Hide full search, show mobile search button */
            .nav-search { display: none; }
            .nav-search-mobile { display: flex; }

            /* Simplify GitHub button - icon only */
            .github-stars-btn {
                padding: 0;
                width: 34px;
                height: 34px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .github-stars-btn svg:first-child {
                display: block;
                flex-shrink: 0;
            }
            .github-stars-btn .github-stars-count { display: none; }

            /* Tighten nav spacing */
            .nav-right {
                gap: 0.5rem;
            }
        }

        @media (max-width: 600px) {
            /* Navigation - clean and minimal */
            nav {
                padding: 0.75rem 1rem;
            }

            .nav-inner {
                gap: 0.5rem;
            }

            .nav-right {
                gap: 0.4rem;
            }

            .logo {
                font-size: 1rem;
            }

            .logo img {
                width: 22px;
                height: 22px;
            }

            /* Hero - improved mobile layout */
            .hero {
                padding: 6rem 1.25rem 3rem;
            }

            /* Release badge - more compact */
            .release-badge {
                padding: 0.4rem 0.75rem;
                gap: 0.4rem;
                font-size: 0.75rem;
                margin-bottom: 1.25rem;
            }

            .release-badge .tag {
                padding: 0.1rem 0.4rem;
                font-size: 0.625rem;
            }

            .release-date {
                font-size: 0.65rem;
                padding-left: 0.4rem;
            }

            /* Hero heading - bigger impact on mobile */
            .hero h1 {
                font-size: 2rem;
                line-height: 1.3;
                margin-bottom: 1rem;
            }

            /* Code box - better mobile sizing */
            .code-box {
                padding: 0.15em 0.3em;
                border-radius: 5px;
                margin: 0 0.1em;
            }

            /* Hero subtitle - improved readability */
            .hero-subtitle {
                line-height: 1.6;
                margin: 0 auto 1.5rem;
                padding: 0 0.5rem;
            }

            .hero-phrase {
                display: inline;
                margin-bottom: 0;
            }

            /* Hero buttons - keep inline, just tighten spacing */
            .hero-actions {
                gap: 0.75rem;
                margin-bottom: 2.5rem;
            }

            .btn-beta,
            .btn-secondary {
                padding: 0.75rem 1.25rem;
                font-size: var(--text-sm);
            }

            /* Sync visual - keep horizontal, just smaller */
            .sync-visual {
                gap: 0.75rem;
                transform: scale(0.85);
            }

            .sync-node {
                font-size: var(--text-xs);
            }

            .sync-node img {
                width: 24px;
                height: 24px;
            }

            /* Sections - tighter on mobile */
            .section {
                padding: 3rem 1.25rem;
            }

            .section-header {
                margin-bottom: 2rem;
            }

            .section-title {
                font-size: 1.5rem;
            }

            /* Grids */
            .cli-grid { grid-template-columns: 1fr; }
            .bento-grid { grid-template-columns: 1fr; }

            /* Testimonials - keep 2 columns on mobile */
            .testimonials-grid {
                gap: 1rem;
            }

            .testimonials-grid .testimonial-card {
                flex: 0 1 calc(50% - 0.5rem);
                min-width: 140px;
            }

            .testimonial-card {
                padding: 1rem;
            }

            .testimonial-card::after {
                font-size: 2.5rem;
                right: 0.5rem;
            }

            .testimonial-avatar {
                width: 32px;
                height: 32px;
            }

            .testimonial-name {
                font-size: var(--text-sm);
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
                max-width: 100%;
            }

            .testimonial-info {
                min-width: 0;
                overflow: hidden;
            }

            .testimonial-role {
                font-size: var(--text-xs);
            }

            .testimonial-text {
                font-size: var(--text-sm);
                line-height: 1.5;
            }

            /* Cards - reduced padding */
            .value-card {
                padding: 1.25rem;
            }

            .value-card h3 {
                font-size: var(--text-base);
            }

            .value-card p {
                font-size: var(--text-sm);
            }

            /* Footer - tighter spacing on mobile */
            .footer-links {
                gap: 1rem;
                flex-wrap: wrap;
            }

            /* Install controls - tighter on mobile */
            .install-controls {
                gap: 1rem;
            }

            .install-control-label {
                display: none;
            }

            /* Install card - constrain width to prevent overflow */
            .install-card {
                max-width: 100%;
                overflow: hidden;
            }

            .install-oneliner {
                max-width: 100%;
            }

            .install-oneliner code {
                font-size: 0.6rem;
                word-break: break-all;
            }

            /* Ensure sections don't cause overflow */
            .section-inner {
                max-width: 100%;
            }

            /* Comparison legend - wrap and tighter gap on mobile */
            .comparison-legend {
                gap: 0.75rem 1rem;
                flex-wrap: wrap;
            }

            .comparison-legend-item {
                font-size: 0.65rem;
            }

            /* Prevent iOS zoom on input focus - must be 16px+ */
            .class-search-input,
            input[type="text"],
            input[type="search"],
            textarea,
            select {
                font-size: 16px;
            }

            /* Class search dropdown - prevent horizontal scroll */
            .class-search-dropdown {
                overflow-x: hidden;
            }

            .class-search-item {
                flex-wrap: wrap;
                gap: 0.25rem;
            }

            .class-search-item-name {
                font-size: 0.8rem;
                flex: 1;
                min-width: 0;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .class-search-item-meta {
                font-size: 0.65rem;
                gap: 0.5rem;
                flex-basis: 100%;
            }

            /* Rotating text - slightly smaller on mobile */
            .rotating-text span {
                font-size: 0.9em;
            }

            /* Code example - constrain on mobile */
            .code-example {
                max-width: calc(100vw - 2.5rem);
            }

            .code-example pre {
                font-size: 0.7rem;
            }

            /* Format cards - constrain overflow */
            .format-card {
                max-width: 100%;
                overflow: hidden;
            }

            .format-card pre {
                font-size: 0.7rem !important;
                max-width: 100%;
            }

            /* Format comparison grid list items */
            .format-card ul {
                font-size: 0.75rem !important;
            }

            .format-card li {
                font-size: 0.75rem !important;
            }

            /* Code blocks in Build from Source - constrain on mobile */
            .code-block {
                font-size: 0.7rem;
                padding: 0.75rem;
                overflow-x: auto;
                max-width: 100%;
            }

            .code-block-wrapper {
                max-width: 100%;
                overflow: hidden;
            }

            /* Install steps in advanced mode */
            .install-step {
                gap: 0.75rem;
            }

            .step-content h4 {
                font-size: 0.875rem;
            }

            .step-content p {
                font-size: 0.8rem;
            }

            /* Interactive CLI - keep compact on mobile */
            .shell-output,
            .shell-prompt,
            .shell-prefix,
            .shell-welcome-text,
            .shell-history-cmd,
            .shell-history-cmd .prompt,
            .shell-history-cmd .cmd {
                font-size: 11px;
            }

            .shell-body {
                min-height: 160px;
            }

            /* Shell input needs 16px to prevent iOS zoom, but scale it down visually */
            .shell-input {
                font-size: 16px;
                transform: scale(0.6875);
                transform-origin: left center;
                width: 145%;
            }
        }

        /* Extra small screens */
        @media (max-width: 380px) {
            .hero h1 {
                font-size: var(--text-3xl);
            }

            .hero h1 .accent {
                font-size: 0.9em;
            }

            .hero-subtitle {
                font-size: var(--text-sm);
            }

            .btn-beta,
            .btn-secondary {
                padding: 0.75rem 1.25rem;
                font-size: var(--text-sm);
            }

            .beta-tag {
                font-size: var(--text-2xs);
                padding: 0.15rem 0.4rem;
            }

            /* Testimonials - stack to single column on extra small screens */
            .testimonials-grid .testimonial-card {
                flex: 1 1 100%;
                min-width: unset;
            }

            /* Footer - even tighter on extra small */
            .footer-links {
                gap: 0.75rem;
            }

            /* Sync visual - scale down more */
            .sync-visual {
                transform: scale(0.75);
            }
        }
    </style>
</head>
<body>
    <!-- Page loader overlay - hides content until JS is ready -->
    <div class="page-loader" id="page-loader"></div>

    <!-- Stars Background - unified particle system -->
    <div class="stars-container" id="stars-container">
        <!-- Gradient overlay - inside container so it only affects stars -->
        <div class="stars-gradient-overlay"></div>
    </div>

    <nav>
        <div class="nav-inner">
            <a href="#" class="logo">
                <img src="logo.png" alt="RbxSync">
                RbxSync
            </a>
            <div class="nav-links">
                <a href="#features">Features</a>
                <a href="https://docs.rbxsync.dev" target="_blank">Docs</a>
                <a href="#format" class="rbxjson-rainbow">.rbxjson</a>
                <a href="#install">Install</a>
            </div>
            <div class="nav-right">
                <!-- Search (desktop) -->
                <div class="nav-search">
                    <svg class="nav-search-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/>
                    </svg>
                    <input type="text" placeholder="Search docs..." id="search-input">
                    <span class="nav-search-kbd">⌘K</span>
                </div>

                <!-- Search (mobile) -->
                <button class="nav-search-mobile" id="search-mobile-btn" aria-label="Search">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/>
                    </svg>
                </button>

                <!-- Theme Toggle -->
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                    <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                    <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                    </svg>
                </button>

                <!-- Discord Button -->
                <a href="https://discord.gg/dURVrFVAEs" class="discord-btn" target="_blank" title="Join Discord">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
                    </svg>
                </a>

                <!-- GitHub Stars Button -->
                <a href="https://github.com/devmarissa/rbxsync" class="github-stars-btn" target="_blank">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    <span class="github-stars-count">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/>
                        </svg>
                        <span id="star-count">-</span>
                    </span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section class="hero">
        <a href="https://github.com/devmarissa/rbxsync/releases" class="release-badge">
            <span class="tag">NEW</span>
            <span class="shiny-text" data-text="Windows build fixes + platform docs">Windows build fixes + platform docs</span>
            <span class="release-date">Jan 10</span>
        </a>

        <h1>
            Sync <span class="code-box"><span class="rotating-wrapper"><span class="rotating-text" id="rotating-classnames">
                <span class="active">Scripts</span>
            </span></span><span class="code-cursor"></span></span> to Git.<br>
            <span class="accent">The sync tool that should have been.</span>
        </h1>

        <p class="hero-subtitle">
            <span class="hero-phrase">Extract any game in one click.</span>
            <span class="hero-phrase">Sync everything in real-time.</span>
            <span class="hero-phrase">Native AI integration. Zero configuration.</span>
        </p>

        <div class="hero-actions">
            <a href="#install" class="btn-beta">
                <span class="hover-bg"></span>
                <span class="btn-text">Get Started</span>
                <span class="beta-tag">FREE BETA</span>
            </a>
            <div class="btn-secondary-wrapper">
                <div class="aurora-layer"></div>
                <a href="https://github.com/devmarissa/rbxsync" class="btn-secondary">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
                    View on GitHub
                </a>
            </div>
        </div>

        <div class="sync-visual">
            <div class="sync-node">
                <img src="https://devicon-website.vercel.app/api/vscode/original.svg" alt="VS Code">
                <span>VS Code</span>
            </div>
            <div class="sync-arrows">
                <span>→</span>
                <span>←</span>
            </div>
            <div class="sync-node">
                <img src="https://upload.wikimedia.org/wikipedia/commons/5/58/Roblox_Studio_logo_2021_present.svg" alt="Roblox Studio">
                <span>Roblox Studio</span>
            </div>
        </div>
    </section>

    <!-- Why RbxSync -->
    <section class="section section-alt" id="features">
        <div class="section-inner">
            <div class="section-header">
                <div class="section-tag">Why RbxSync</div>
                <h2 class="section-title">Professional Sync for Professional Teams</h2>
            </div>

            <div class="bento-grid">
                <!-- Hero Card - spans 2 rows -->
                <div class="value-card bento-hero">
                    <div class="bento-icon red">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--rbx-red)"><circle cx="12" cy="12" r="3"/><path d="M12 2v4m0 12v4M2 12h4m12 0h4m-2.636-7.364-2.828 2.828m-8.486 8.486-2.828 2.828m0-14.142 2.828 2.828m8.486 8.486 2.828 2.828"/></svg>
                    </div>
                    <h3>One Source of Truth</h3>
                    <p>
                        Everyone syncs from Git. No more passing around .rbxl files.
                        No more asking "is this the latest version?" Code review your game changes.
                        Branch and merge like real software.
                    </p>
                </div>

                <!-- Medium Cards - right column -->
                <div class="value-card bento-medium">
                    <div class="bento-icon cyan">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#22d3ee" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14,2 14,8 20,8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
                    </div>
                    <h3>Full Property Extraction</h3>
                    <p>
                        Captures ALL properties using Roblox API dump reflection.
                        Parts, MeshParts, Attachments, Scripts. Every class, every property.
                    </p>
                </div>

                <div class="value-card bento-medium">
                    <div class="bento-icon purple">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#a855f7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 16V4m10 16V8M3 12h4m10 0h4"/></svg>
                    </div>
                    <h3>True Two-Way Sync</h3>
                    <p>
                        Edit in Studio, changes appear in files. Edit in VS Code, changes appear in Studio.
                        Real-time, automatic, bidirectional.
                    </p>
                </div>

                <!-- Bottom row - 3 smaller cards -->
                <div class="feature-card bento-small">
                    <div class="bento-icon gold">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#d4a438" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg>
                    </div>
                    <h4>Multi-Studio Sessions</h4>
                    <p>Run multiple Studio instances, each synced to different projects simultaneously.</p>
                </div>
                <div class="feature-card bento-small">
                    <div class="bento-icon green">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4,17 10,11 4,5"/><line x1="12" y1="19" x2="20" y2="19"/></svg>
                    </div>
                    <h4>Console Streaming</h4>
                    <p>See print(), warn(), and error() output in your terminal.</p>
                </div>
                <div class="feature-card bento-small">
                    <div class="bento-icon cyan">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#22d3ee" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
                    </div>
                    <h4>Build to .rbxl/.rbxm</h4>
                    <p>Build place or model files from your project. Watch mode auto-rebuilds.</p>
                </div>

                <!-- Second bottom row - 3 more cards -->
                <div class="feature-card bento-small">
                    <div class="bento-icon purple">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#a855f7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><path d="M12 18v-6"/><path d="M9 15l3 3 3-3"/></svg>
                    </div>
                    <h4>Sourcemap Generation</h4>
                    <p>Generate sourcemap.json for Luau LSP. Full IntelliSense in VS Code.</p>
                </div>
                <div class="feature-card bento-small">
                    <div class="bento-icon red">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--rbx-red)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 10 10H12V2z"/><path d="M12 2a10 10 0 0 1 10 10"/></svg>
                    </div>
                    <h4>MCP Integration</h4>
                    <p>AI agents can read, write, and test your game through MCP.</p>
                </div>
                <div class="feature-card bento-small">
                    <div class="bento-icon green">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                    </div>
                    <h4>E2E Testing</h4>
                    <p>Run live playtests from CLI. Capture console output for verification.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Extract Any Game -->
    <section class="section" id="extract">
        <div class="section-inner">
            <div class="extract-section">
                <div class="extract-info">
                    <div class="section-tag">Exclusive to RbxSync</div>
                    <h3>One Click. Your Entire Game in Git.</h3>
                    <p>
                        <span class="copy-line">Open any game in Studio. Click Extract.</span>
                        <span class="copy-line">50,000 instances become version-controlled files in seconds.</span>
                        <span class="copy-line">Every property preserved perfectly in <span class="rbxjson-rainbow">.rbxjson</span> format.</span>
                        <span class="kicker">No other tool does this.</span>
                    </p>
                </div>
                <div class="extract-video-wrapper">
                    <div class="extract-video-container">
                        <video class="extract-video" autoplay loop muted playsinline>
                            <source src="videos/extract-demo.mp4" type="video/mp4">
                        </video>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- E2E Testing -->
    <section class="section section-alt" id="e2e">
        <div class="section-inner">
            <div class="e2e-section">
                <div class="demo-video">
                    <div class="demo-video-icon">▶</div>
                    <span class="demo-video-text">Demo Coming Soon</span>
                    <span class="demo-video-subtitle">Watch AI build entire games autonomously</span>
                </div>
                <div class="e2e-info">
                    <div class="section-tag">AI-Native Development</div>
                    <h3>Build, Test, and Iterate - Autonomously</h3>
                    <p>
                        <span class="copy-line">AI agents write code. Run playtests. See errors. Fix them. Repeat.</span>
                        <span class="copy-line">RbxSync streams console output directly to your terminal or MCP-connected agent.</span>
                        <span class="copy-line">The feedback loop that makes AI-assisted development actually work.</span>
                    </p>
                    <div class="e2e-features">
                        <div class="e2e-feature">
                            <span class="e2e-feature-icon">✓</span>
                            <span>Real-time console streaming to terminal</span>
                        </div>
                        <div class="e2e-feature">
                            <span class="e2e-feature-icon">✓</span>
                            <span>MCP tools for AI agent integration</span>
                        </div>
                        <div class="e2e-feature">
                            <span class="e2e-feature-icon">✓</span>
                            <span>Execute Luau code remotely in Studio</span>
                        </div>
                        <div class="e2e-feature">
                            <span class="e2e-feature-icon">✓</span>
                            <span>Run playtests and capture output</span>
                        </div>
                        <div class="e2e-feature">
                            <span class="e2e-feature-icon">✓</span>
                            <span>Autonomous debug → fix → test loops</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- rbxjson Format -->
    <section class="section" id="format">
        <div class="section-inner">
            <div class="format-section">
                <div class="format-info">
                    <div class="section-tag">File Format</div>
                    <h3>Human-readable. AI-readable. Git-friendly.</h3>
                    <p>
                        <span class="copy-line">Scripts are .luau files. Everything else is <span class="rbxjson-rainbow">.rbxjson</span>.</span>
                        <span class="copy-line">A clean JSON format with explicit types that preserves every property exactly.</span>
                        <span class="copy-line">Readable diffs. Easy merges. Zero data loss.</span>
                    </p>

                    <div class="class-search-container">
                        <div class="class-search-input-wrapper">
                            <div class="aurora-layer"></div>
                            <svg class="class-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
                            </svg>
                            <input type="text" id="class-search-input" class="class-search-input" placeholder="Search any class..." autocomplete="off" spellcheck="false">
                            <span class="class-search-count" id="class-search-count"></span>
                        </div>
                        <div class="class-search-dropdown" id="class-search-dropdown"></div>
                    </div>
                    <div class="format-types-quick">
                        <span class="format-type-quick" data-class="Part">Part</span>
                        <span class="format-type-quick" data-class="Frame">Frame</span>
                        <span class="format-type-quick" data-class="Sound">Sound</span>
                        <span class="format-type-quick" data-class="ProximityPrompt">ProximityPrompt</span>
                    </div>
                    <p class="format-hint">Search any class or click a quick pick →</p>
                </div>

                <div class="code-example">
                    <div class="code-header">
                        <div class="code-header-dots">
                            <span class="code-header-dot red"></span>
                            <span class="code-header-dot yellow"></span>
                            <span class="code-header-dot green"></span>
                        </div>
                        <span class="code-header-title"><span id="template-name">Baseplate</span><span class="rbxjson-rainbow">.rbxjson</span></span>
                    </div>
                    <pre id="template-code">{
  <span class="key">"className"</span>: <span class="string">"Part"</span>,
  <span class="key">"properties"</span>: {
    <span class="key">"Anchored"</span>: {
      <span class="key">"type"</span>: <span class="string">"bool"</span>,
      <span class="key">"value"</span>: <span class="bool">true</span>
    },
    <span class="key">"Size"</span>: {
      <span class="key">"type"</span>: <span class="string">"Vector3"</span>,
      <span class="key">"value"</span>: { <span class="key">"x"</span>: <span class="number">512</span>, <span class="key">"y"</span>: <span class="number">20</span>, <span class="key">"z"</span>: <span class="number">512</span> }
    },
    <span class="key">"Material"</span>: {
      <span class="key">"type"</span>: <span class="string">"Enum"</span>,
      <span class="key">"value"</span>: { <span class="key">"enumType"</span>: <span class="string">"Material"</span>, <span class="key">"value"</span>: <span class="string">"Grass"</span> }
    }
  }
}</pre>
                </div>
            </div>

            <!-- Why .rbxjson? comparison -->
            <div class="section-header" style="margin-top: 4rem;">
                <h2 class="section-title">Why <span class="rbxjson-rainbow">.rbxjson</span>?</h2>
                <p class="section-desc">A format designed for real-world workflows.</p>
            </div>

            <div class="format-comparison-grid">
                <div class="format-card">
                    <h4 style="color: var(--text-primary); margin-bottom: 1rem; font-size: 1rem;">RbxSync (<span class="rbxjson-rainbow">.rbxjson</span>)</h4>
                    <pre style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; overflow-x: auto; font-size: 0.8rem; line-height: 1.5;"><code>{
  <span style="color: #f472b6;">"className"</span>: <span style="color: #4ade80;">"Part"</span>,
  <span style="color: #f472b6;">"properties"</span>: {
    <span style="color: #60a5fa;">"Size"</span>: {
      <span style="color: #c084fc;">"type"</span>: <span style="color: #fbbf24;">"Vector3"</span>,
      <span style="color: #c084fc;">"value"</span>: { <span style="color: #94a3b8;">"x"</span>: <span style="color: #4ade80;">4</span>, <span style="color: #94a3b8;">"y"</span>: <span style="color: #4ade80;">1</span>, <span style="color: #94a3b8;">"z"</span>: <span style="color: #4ade80;">2</span> }
    },
    <span style="color: #60a5fa;">"Anchored"</span>: {
      <span style="color: #c084fc;">"type"</span>: <span style="color: #fbbf24;">"bool"</span>,
      <span style="color: #c084fc;">"value"</span>: <span style="color: #4ade80;">true</span>
    }
  }
}</code></pre>
                    <ul style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.875rem; list-style: none; padding: 0;">
                        <li style="margin-bottom: 0.5rem;"><span style="color: var(--success);">+</span> Clean Git diffs - see exactly what changed</li>
                        <li style="margin-bottom: 0.5rem;"><span style="color: var(--success);">+</span> Explicit types - no ambiguity</li>
                        <li style="margin-bottom: 0.5rem;"><span style="color: var(--success);">+</span> AI/LLM readable - agents can parse and modify</li>
                        <li><span style="color: var(--success);">+</span> Human editable - fix properties by hand if needed</li>
                    </ul>
                </div>

                <div class="format-card">
                    <h4 style="color: var(--text-primary); margin-bottom: 1rem; font-size: 1rem;">Traditional (.rbxmx / XML)</h4>
                    <pre style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; overflow-x: auto; font-size: 0.8rem; line-height: 1.5;"><code style="color: var(--text-secondary);">&lt;Item class="Part"&gt;
  &lt;Properties&gt;
    &lt;Vector3 name="Size"&gt;
      &lt;X&gt;4&lt;/X&gt;
      &lt;Y&gt;1&lt;/Y&gt;
      &lt;Z&gt;2&lt;/Z&gt;
    &lt;/Vector3&gt;
    &lt;bool name="Anchored"&gt;true&lt;/bool&gt;
  &lt;/Properties&gt;
&lt;/Item&gt;</code></pre>
                    <ul style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.875rem; list-style: none; padding: 0;">
                        <li style="margin-bottom: 0.5rem;"><span style="color: var(--text-muted);">-</span> Verbose - more lines for same data</li>
                        <li style="margin-bottom: 0.5rem;"><span style="color: var(--text-muted);">-</span> Noisy diffs - hard to review in PRs</li>
                        <li style="margin-bottom: 0.5rem;"><span style="color: var(--text-muted);">-</span> Harder for AI to parse reliably</li>
                        <li><span style="color: var(--text-muted);">-</span> Error-prone manual editing</li>
                    </ul>
                </div>
            </div>

            <style>
                .format-comparison-grid {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 1.5rem;
                }
                .format-card {
                    background: var(--bg-primary);
                    border: 1px solid var(--border);
                    border-radius: 12px;
                    padding: 1.5rem;
                    overflow: hidden;
                    min-width: 0;
                }
                .format-card pre {
                    background: #0c0c0e !important;
                    border: 1px solid var(--border);
                    max-width: 100%;
                    overflow-x: auto;
                }
                [data-theme="light"] .format-card pre {
                    background: #f1f5f9 !important;
                    border: 1px solid #e2e8f0;
                }
                @media (max-width: 768px) {
                    .format-comparison-grid {
                        grid-template-columns: 1fr;
                    }
                }
                @media (max-width: 600px) {
                    .format-card {
                        padding: 1rem;
                    }
                    .format-card pre {
                        font-size: 0.7rem !important;
                        padding: 0.75rem !important;
                    }
                    .format-card h4 {
                        font-size: 0.875rem !important;
                    }
                    .format-card ul {
                        font-size: 0.75rem !important;
                    }
                }
            </style>
        </div>
    </section>

    <!-- Comparison -->
    <section class="section section-alt" id="comparison">
        <div class="section-inner">
            <div class="section-header">
                <div class="section-tag">Comparison</div>
                <h2 class="section-title">How RbxSync Compares</h2>
                <p class="section-desc">Feature comparison across Roblox sync tools.</p>
            </div>

            <!-- Mobile Competitor Selector -->
            <div class="mobile-competitor-selector">
                <div class="competitor-selector-label">Compare against</div>
                <div class="competitor-pills">
                    <button class="competitor-pill active" data-column="3">
                        <img src="https://rojo.space/img/logo.png" alt="Rojo" class="competitor-pill-logo">
                        <span class="competitor-pill-name">Rojo</span>
                    </button>
                    <button class="competitor-pill" data-column="4">
                        <img src="images/argon.svg" alt="Argon" class="competitor-pill-logo">
                        <span class="competitor-pill-name">Argon</span>
                    </button>
                    <button class="competitor-pill" data-column="5">
                        <img src="https://tr.rbxcdn.com/180DAY-f955c288b7f0f28cd1c8f5e2b56b0d12/420/420/Image/Webp/noFilter" alt="Pesto" class="competitor-pill-logo">
                        <span class="competitor-pill-name">Pesto</span>
                    </button>
                    <button class="competitor-pill" data-column="6">
                        <img src="images/scriptsync.svg" alt="Script Sync" class="competitor-pill-logo">
                        <span class="competitor-pill-name">Script Sync</span>
                    </button>
                    <button class="competitor-pill" data-column="7">
                        <img src="images/azullogo.png" alt="Azul" class="competitor-pill-logo">
                        <span class="competitor-pill-name">Azul</span>
                    </button>
                </div>
            </div>

            <div class="comparison-aurora-wrapper">
            <div class="comparison-table-wrapper">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th></th>
                            <th class="tool-header tool-header-aurora">
                                <div class="tool-header-content">
                                    <div class="tool-header-logo-wrap"><img src="logo.png" alt="RbxSync" class="tool-header-logo"></div>
                                    <span class="tool-header-name">RbxSync</span>
                                </div>
                            </th>
                            <th class="tool-header">
                                <div class="tool-header-content">
                                    <div class="tool-header-logo-wrap"><img src="https://rojo.space/img/logo.png" alt="Rojo" class="tool-header-logo"></div>
                                    <span class="tool-header-name">Rojo</span>
                                </div>
                            </th>
                            <th class="tool-header">
                                <div class="tool-header-content">
                                    <div class="tool-header-logo-wrap"><img src="images/argon.svg" alt="Argon" class="tool-header-logo"></div>
                                    <span class="tool-header-name">Argon</span>
                                </div>
                            </th>
                            <th class="tool-header">
                                <div class="tool-header-content">
                                    <div class="tool-header-logo-wrap"><img src="https://tr.rbxcdn.com/180DAY-f955c288b7f0f28cd1c8f5e2b56b0d12/420/420/Image/Webp/noFilter" alt="Pesto" class="tool-header-logo"></div>
                                    <span class="tool-header-name">Pesto</span>
                                </div>
                            </th>
                            <th class="tool-header">
                                <div class="tool-header-content">
                                    <div class="tool-header-logo-wrap"><img src="images/scriptsync.svg" alt="Script Sync" class="tool-header-logo"></div>
                                    <span class="tool-header-name">Script Sync</span>
                                </div>
                            </th>
                            <th class="tool-header">
                                <div class="tool-header-content">
                                    <div class="tool-header-logo-wrap"><img src="images/azullogo.png" alt="Azul" class="tool-header-logo"></div>
                                    <span class="tool-header-name">Azul</span>
                                </div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Lead with unique differentiators (Exclusive features) -->
                        <tr>
                            <td><span class="feature-name">AI integration (MCP)</span></td>
                            <td class="col-rbxsync"><span class="exclusive-tag">Exclusive</span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon partial" title="Sourcemaps only"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 2a8 8 0 110 16V4z"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                        </tr>
                        <tr>
                            <td><span class="feature-name">E2E testing</span></td>
                            <td class="col-rbxsync"><span class="exclusive-tag">Exclusive</span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                        </tr>
                        <tr>
                            <td><span class="feature-name">Console streaming</span></td>
                            <td class="col-rbxsync"><span class="exclusive-tag">Exclusive</span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                        </tr>
                        <tr>
                            <td><span class="feature-name"><span class="rbxjson-text">.rbxjson</span> format</span></td>
                            <td class="col-rbxsync"><span class="exclusive-tag">Exclusive</span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                        </tr>
                        <!-- Core differentiating features -->
                        <tr>
                            <td><span class="feature-name">Two-way sync</span></td>
                            <td class="col-rbxsync"><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon partial" title="Via syncback"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 2a8 8 0 110 16V4z"/></svg></span></td>
                            <td><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon partial" title="Pro $6.99"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 2a8 8 0 110 16V4z"/></svg></span></td>
                            <td><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                        </tr>
                        <tr>
                            <td><span class="feature-name">Full properties</span></td>
                            <td class="col-rbxsync"><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon partial"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 2a8 8 0 110 16V4z"/></svg></span></td>
                            <td><span class="status-icon partial"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 2a8 8 0 110 16V4z"/></svg></span></td>
                            <td><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                        </tr>
                        <tr>
                            <td><span class="feature-name">One-click extract</span></td>
                            <td class="col-rbxsync"><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon partial"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 2a8 8 0 110 16V4z"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                        </tr>
                        <!-- Standard features -->
                        <tr>
                            <td><span class="feature-name">Zero config</span></td>
                            <td class="col-rbxsync"><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon partial"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 2a8 8 0 110 16V4z"/></svg></span></td>
                            <td><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                        </tr>
                        <tr>
                            <td><span class="feature-name">Build .rbxl/.rbxm</span></td>
                            <td class="col-rbxsync"><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                        </tr>
                        <tr>
                            <td><span class="feature-name">Sourcemap (LSP)</span></td>
                            <td class="col-rbxsync"><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                            <td><span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span></td>
                            <td><span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span></td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr class="comparison-legend-row">
                            <td colspan="7">
                                <div class="comparison-legend">
                                    <div class="comparison-legend-item">
                                        <span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span>
                                        <span>Supported</span>
                                    </div>
                                    <div class="comparison-legend-item">
                                        <span class="status-icon partial"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 2a8 8 0 110 16V4z"/></svg></span>
                                        <span>Partial</span>
                                    </div>
                                    <div class="comparison-legend-item">
                                        <span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span>
                                        <span>Not available</span>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>
            </div>

            <!-- Battle Mode - Mobile Comparison -->
            <div class="battle-aurora-wrapper">
            <div class="comparison-battle" id="comparison-battle">
                <div class="battle-header">
                    <div class="battle-tool rbxsync">
                        <img src="logo.png" alt="RbxSync" class="battle-tool-logo">
                        <span class="battle-tool-name">RbxSync</span>
                    </div>
                    <span class="battle-vs">VS</span>
                    <div class="battle-tool competitor" id="battle-competitor">
                        <img src="https://rojo.space/img/logo.png" alt="Rojo" class="battle-tool-logo" id="battle-competitor-logo">
                        <span class="battle-tool-name" id="battle-competitor-name">Rojo</span>
                    </div>
                </div>
                <div class="battle-score" id="battle-score">
                    <div class="battle-score-item rbxsync">
                        <span>RbxSync</span>
                        <span class="battle-score-value" id="rbxsync-score">10</span>
                    </div>
                    <div class="battle-score-item competitor">
                        <span id="competitor-score-name">Rojo</span>
                        <span class="battle-score-value" id="competitor-score">4</span>
                    </div>
                </div>
                <div class="battle-rows" id="battle-rows">
                    <!-- Generated by JS -->
                </div>
                <div class="battle-legend">
                    <div class="battle-legend-item">
                        <span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span>
                        <span>Supported</span>
                    </div>
                    <div class="battle-legend-item">
                        <span class="status-icon partial"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 2a8 8 0 110 16V4z"/></svg></span>
                        <span>Partial</span>
                    </div>
                    <div class="battle-legend-item">
                        <span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span>
                        <span>N/A</span>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </section>

    <!-- CLI -->
    <section class="section" id="cli">
        <div class="section-inner">
            <div class="section-header">
                <div class="section-tag">CLI</div>
                <h2 class="section-title">Try the CLI</h2>
                <p class="section-desc">Type commands below to explore. Tab to autocomplete, ↑↓ for history.</p>
            </div>

            <div class="interactive-shell" id="interactive-shell">
                <div class="shell-header">
                    <div class="shell-dots">
                        <span class="shell-dot red"></span>
                        <span class="shell-dot yellow"></span>
                        <span class="shell-dot green"></span>
                    </div>
                    <span class="shell-title">dev@macbook — my-game — zsh</span>
                    <div class="shell-actions">
                        <button class="shell-clear-btn" id="shell-clear" title="Clear terminal">clear</button>
                    </div>
                </div>
                <div class="shell-body" id="shell-body">
                    <div class="shell-welcome">
                        <span class="shell-welcome-text">Last login: Sat Jan 11 01:30:42 on ttys001
Try: <code>help</code>, <code>init</code>, <code>serve</code>, <code>extract</code> · <a href="https://docs.rbxsync.dev/cli/commands" target="_blank" class="shell-link">View all commands</a></span>
                    </div>
                </div>
                <div class="shell-input-line">
                    <span class="shell-prompt">my-game %&nbsp;</span>
                    <span class="shell-prefix">rbxsync </span>
                    <input type="text" id="shell-input" class="shell-input" placeholder="" autocomplete="off" spellcheck="false">
                    <div class="shell-autocomplete" id="shell-autocomplete"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Install -->
    <section class="section section-alt" id="install" style="position: relative; overflow: hidden;">
        <canvas id="install-confetti-canvas" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0;"></canvas>
        <div class="section-inner">
            <div class="section-header">
                <div class="section-tag">Get Started</div>
                <h2 class="section-title">Migrate in Minutes</h2>
                <p class="section-desc">Three commands. Ready to ship.</p>
            </div>

            <!-- Unified Control Bar -->
            <div class="install-controls">
                <!-- Platform Toggle -->
                <div class="install-control-group">
                    <span class="install-control-label">Platform</span>
                    <div class="install-toggle" id="platform-toggle">
                        <button class="install-toggle-btn icon-only active" data-platform="mac" title="macOS">
                            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>
                        </button>
                        <button class="install-toggle-btn icon-only" data-platform="windows" title="Windows">
                            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 12V6.75l6-1.32v6.48L3 12zm17-9v8.75l-10 .15V5.21L20 3zM3 13l6 .09v6.81l-6-1.15V13zm17 .25V22l-10-1.91V13.1l10 .15z"/></svg>
                        </button>
                    </div>
                </div>

                <!-- Method Toggle -->
                <div class="install-control-group">
                    <span class="install-control-label">Method</span>
                    <div class="install-toggle">
                        <button class="install-toggle-btn active" data-mode="simple">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                            Quick Install
                        </button>
                        <button class="install-toggle-btn" data-mode="advanced">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 17l6-6-6-6M12 19h8"/></svg>
                            Build from Source
                        </button>
                    </div>
                </div>
            </div>

            <!-- SIMPLE MODE: Three clean cards -->
            <div class="mode-content active" data-mode="simple">
                <div class="install-cards-grid">
                    <!-- Step 1: CLI Install -->
                    <div class="install-card-wrapper">
                        <div class="install-card">
                            <div class="install-card-header">
                                <span class="install-card-num">1</span>
                                <h4>CLI</h4>
                            </div>
                            <div class="install-oneliner" data-cli-os="mac">
                                <code>curl -fsSL https://rbxsync.dev/install.sh | sh</code>
                                <button class="copy-oneliner-btn" data-copy="curl -fsSL https://raw.githubusercontent.com/devmarissa/rbxsync/master/scripts/install.sh | sh" aria-label="Copy">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                                </button>
                            </div>
                            <div class="install-oneliner" data-cli-os="windows" style="display: none;">
                                <code>irm https://rbxsync.dev/install.ps1 | iex</code>
                                <button class="copy-oneliner-btn" data-copy="irm https://raw.githubusercontent.com/devmarissa/rbxsync/master/scripts/install.ps1 | iex" aria-label="Copy">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                                </button>
                            </div>
                        </div>
                        <a href="https://github.com/devmarissa/rbxsync/releases/latest" class="install-alt-link">
                            or download binary
                        </a>
                    </div>

                    <!-- Step 2: Studio Plugin -->
                    <div class="install-card-wrapper">
                        <div class="install-card">
                            <div class="install-card-header">
                                <span class="install-card-num">2</span>
                                <h4>Plugin</h4>
                            </div>
                            <a href="https://create.roblox.com/store/asset/89280418878393/RbxSync" target="_blank" rel="noopener noreferrer" class="install-store-btn roblox">
                                <img class="store-icon" src="images/Roblox_Logo.svg" alt="Roblox">
                                <span>Creator Store</span>
                            </a>
                        </div>
                        <a href="https://github.com/devmarissa/rbxsync/releases/latest" class="install-alt-link">
                            or download .rbxm
                        </a>
                    </div>

                    <!-- Step 3: VS Code Extension -->
                    <div class="install-card-wrapper">
                        <div class="install-card">
                            <div class="install-card-header">
                                <span class="install-card-num">3</span>
                                <h4>Extension</h4>
                                <span class="optional-badge">Optional</span>
                            </div>
                            <div class="extension-buttons">
                                <a href="https://marketplace.visualstudio.com/items?itemName=rbxsync.rbxsync" target="_blank" rel="noopener noreferrer" class="install-store-btn vscode">
                                    <img class="store-icon" src="https://code.visualstudio.com/assets/branding/code-stable-white.png" alt="VS Code">
                                    <span>Marketplace</span>
                                </a>
                                <a href="https://open-vsx.org/extension/rbxsync/rbxsync" target="_blank" rel="noopener noreferrer" class="install-store-btn openvsx">
                                    <svg class="store-icon" viewBox="0 0 100 128">
                                        <path d="M30 44.2L52.6 5H7.3zM4.6 88.5h45.3L27.2 49.4zm51 0l22.6 39.2 22.6-39.2z" fill="rgba(255,255,255,0.7)"/>
                                        <path d="M52.6 5L30 44.2h45.2zM27.2 49.4l22.7 39.1 22.6-39.1zm51 0L55.6 88.5h45.2z" fill="white"/>
                                    </svg>
                                    <span>Open VSX</span>
                                </a>
                            </div>
                        </div>
                        <a href="https://github.com/devmarissa/rbxsync/releases/latest" class="install-alt-link">
                            or download .vsix
                        </a>
                    </div>
                </div>

                <!-- Final Step -->
                <div class="install-final-step">
                    <div class="final-step-paths">
                        <div class="final-step-path">
                            <p class="final-step-action">Open Studio. Click <span class="action-extract">Extract</span>.</p>
                            <p class="final-step-sub">Your game, now in Git.</p>
                        </div>
                        <span class="final-step-divider">or</span>
                        <div class="final-step-path migrate">
                            <p class="final-step-action">From Rojo? <code class="action-migrate">rbxsync migrate</code></p>
                            <p class="final-step-sub">Converts project.json instantly</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ADVANCED MODE: Build from source steps -->
            <div class="mode-content" data-mode="advanced">
                <div class="install-steps">
                    <div class="install-step">
                        <div class="step-num">1</div>
                        <div class="step-content">
                            <h4>Build CLI from Source</h4>
                            <p>Requires Rust toolchain.</p>

                            <!-- macOS -->
                            <div class="os-content active" data-os="mac">
                                <div class="code-block-wrapper">
                                    <div class="code-block" data-copy="curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh && git clone https://github.com/devmarissa/rbxsync && cd rbxsync && cargo build --release && sudo cp target/release/rbxsync /usr/local/bin/">
                                        <span class="comment"># Install Rust (if needed)</span><br>
                                        <span class="cmd">curl</span> --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh<br><br>
                                        <span class="comment"># Clone and build</span><br>
                                        <span class="cmd">git clone</span> https://github.com/devmarissa/rbxsync<br>
                                        <span class="cmd">cd</span> rbxsync && <span class="cmd">cargo build</span> --release<br><br>
                                        <span class="comment"># Add to PATH</span><br>
                                        <span class="cmd">sudo cp</span> target/release/rbxsync /usr/local/bin/
                                    </div>
                                    <button class="copy-btn" aria-label="Copy to clipboard">
                                        <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                                        <svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                    </button>
                                </div>
                            </div>

                            <!-- Windows -->
                            <div class="os-content" data-os="windows">
                                <div class="code-block-wrapper">
                                    <div class="code-block">
                                        <span class="comment"># 1. Install VS Build Tools with "Desktop dev with C++"</span><br>
                                        <span class="comment">#    https://visualstudio.microsoft.com/visual-cpp-build-tools/</span><br><br>
                                        <span class="comment"># 2. Install Rust from rustup.rs</span><br><br>
                                        <span class="comment"># 3. Clone and build</span><br>
                                        <span class="cmd">git clone</span> https://github.com/devmarissa/rbxsync<br>
                                        <span class="cmd">cd</span> rbxsync && <span class="cmd">cargo build</span> --release<br><br>
                                        <span class="comment"># 4. Add target\release to PATH</span>
                                    </div>
                                    <button class="copy-btn" aria-label="Copy to clipboard">
                                        <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                                        <svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="install-step">
                        <div class="step-num">2</div>
                        <div class="step-content">
                            <h4>Build & Install Plugin</h4>
                            <div class="code-block-wrapper">
                                <div class="code-block" data-copy="rbxsync build-plugin --install">
                                    <span class="cmd">rbxsync build-plugin</span> --install
                                </div>
                                <button class="copy-btn" aria-label="Copy to clipboard">
                                    <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                                    <svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="install-step">
                        <div class="step-num">3</div>
                        <div class="step-content">
                            <h4>Build VS Code Extension</h4>
                            <p style="font-size: 0.8125rem; color: var(--text-muted); margin-bottom: 0.75rem;">Optional - requires Node.js</p>
                            <div class="code-block-wrapper">
                                <div class="code-block" data-copy="cd rbxsync-vscode && npm install && npm run package && code --install-extension rbxsync-*.vsix">
                                    <span class="cmd">cd</span> rbxsync-vscode<br>
                                    <span class="cmd">npm install</span> && <span class="cmd">npm run package</span><br>
                                    <span class="cmd">code</span> --install-extension rbxsync-*.vsix
                                </div>
                                <button class="copy-btn" aria-label="Copy to clipboard">
                                    <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                                    <svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Update -->
    <section class="section" id="update">
        <div class="section-inner">
            <div class="section-header">
                <div class="section-tag">Stay Current</div>
                <h2 class="section-title">Updating RbxSync</h2>
                <p class="section-desc">Keep your tools in sync with the latest features and fixes.</p>
            </div>

            <div class="update-cards">
                <!-- CLI Card -->
                <div class="update-card" data-glow>
                    <h4>CLI</h4>
                    <p>Run the update command to pull latest changes.</p>
                    <div class="code-block-wrapper" style="margin-top: 1rem;">
                        <div class="code-block" data-copy="rbxsync update">
                            <span class="cmd">rbxsync</span> update
                        </div>
                        <button class="copy-btn" aria-label="Copy to clipboard">
                            <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                            <svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                        </button>
                    </div>
                </div>

                <!-- Plugin Card -->
                <div class="update-card" data-glow>
                    <h4>Studio Plugin</h4>
                    <p>In Studio: <strong>Toolbox</strong> &rarr; <strong>Inventory</strong> &rarr; <strong>My Plugins</strong> &rarr; click <strong>Update</strong>.</p>
                </div>

                <!-- Extension Card -->
                <div class="update-card" data-glow>
                    <h4>Extension</h4>
                    <p>In VS Code or Open VSX-compatible editor: <strong>Extensions</strong> &rarr; find RbxSync &rarr; click <strong>Update</strong>.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials -->
    <section class="section section-alt" id="testimonials">
        <div class="section-inner">
            <div class="section-header">
                <div class="section-tag">Community</div>
                <h2 class="section-title">What Developers Are Saying</h2>
            </div>

            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <img class="testimonial-avatar-img" src="stellar.png" alt="Stellar">
                        <div class="testimonial-info">
                            <div class="testimonial-name">Stellar</div>
                        </div>
                    </div>
                    <p class="testimonial-text">
                        godsend, might be the only tool i use now
                    </p>
                    <span class="testimonial-date">Jan 9, 2026</span>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <img class="testimonial-avatar-img" src="velibor.png" alt="Velibor">
                        <div class="testimonial-info">
                            <div class="testimonial-name">Velibor</div>
                        </div>
                    </div>
                    <p class="testimonial-text">
                        Really enjoying it so far..
                    </p>
                    <span class="testimonial-date">Jan 9, 2026</span>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <img class="testimonial-avatar-img" src="the_pr0fessor.png" alt="The_Pr0fessor">
                        <div class="testimonial-info">
                            <div class="testimonial-name">The_Pr0fessor</div>
                        </div>
                    </div>
                    <p class="testimonial-text">
                        actually raw
                    </p>
                    <span class="testimonial-date">Jan 8, 2026</span>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <img class="testimonial-avatar-img" src="vexture.png" alt="Vexture">
                        <div class="testimonial-info">
                            <div class="testimonial-name">Vexture</div>
                        </div>
                    </div>
                    <p class="testimonial-text">
                        wow yeah that is cool
                    </p>
                    <span class="testimonial-date">Jan 7, 2026</span>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <img class="testimonial-avatar-img" src="microk.png" alt="MicroK">
                        <div class="testimonial-info">
                            <div class="testimonial-name">MicroK</div>
                        </div>
                    </div>
                    <p class="testimonial-text">
                        w?
                    </p>
                    <span class="testimonial-date">Jan 9, 2026</span>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <img class="testimonial-avatar-img" src="fifo.png" alt="fifo">
                        <div class="testimonial-info">
                            <div class="testimonial-name">fifo</div>
                        </div>
                    </div>
                    <p class="testimonial-text">
                        The MCP integration changes everything for AI-assisted dev
                    </p>
                    <span class="testimonial-date">Jan 9, 2026</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-logo">
            <img src="logo.png" alt="RbxSync">
            RbxSync
        </div>
        <div class="footer-links">
            <a href="https://github.com/devmarissa/rbxsync">GitHub</a>
            <a href="https://docs.rbxsync.dev">Documentation</a>
            <a href="https://github.com/devmarissa/rbxsync/issues">Issues</a>
            <a href="https://github.com/devmarissa/rbxsync/releases">Releases</a>
        </div>
        <p class="footer-copy">© 2026 <a href="https://smokestackgames.com/" target="_blank" rel="noopener noreferrer" class="footer-company">Smokestack Games</a> · Built with <a href="https://www.rust-lang.org/" target="_blank" rel="noopener noreferrer" class="footer-tech">Rust</a>, <a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer" class="footer-tech">TypeScript</a>, and <a href="https://luau-lang.org/" target="_blank" rel="noopener noreferrer" class="footer-tech">Luau</a></p>
    </footer>

    <!-- Command Palette Modal -->
    <div class="command-palette-backdrop" id="command-palette-backdrop">
        <div class="command-palette" id="command-palette">
            <div class="command-palette-header">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/>
                </svg>
                <input type="text" class="command-palette-input" id="command-palette-input" placeholder="Search documentation...">
                <button class="command-palette-close" id="command-palette-close">esc</button>
            </div>
            <div class="command-palette-results" id="command-palette-results"></div>
            <div class="command-palette-footer">
                <div class="command-palette-hints">
                    <div class="command-palette-hint"><kbd>↑</kbd><kbd>↓</kbd> Navigate</div>
                    <div class="command-palette-hint"><kbd>↵</kbd> Open</div>
                    <div class="command-palette-hint"><kbd>esc</kbd> Close</div>
                </div>
                <div class="command-palette-brand">
                    <img src="/logo.png" alt="">
                    RbxSync Docs
                </div>
            </div>
        </div>
    </div>

    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

    <script>
        // Dynamic nav height
        (function() {
            function updateNavHeight() {
                const nav = document.querySelector('nav');
                if (nav) {
                    document.documentElement.style.setProperty('--nav-height', nav.offsetHeight + 'px');
                }
            }
            updateNavHeight();
            window.addEventListener('resize', updateNavHeight);
        })();

        // Comparison table scroll detection for shadow effect
        (function() {
            const wrapper = document.querySelector('.comparison-table-wrapper');
            if (wrapper) {
                wrapper.addEventListener('scroll', function() {
                    if (wrapper.scrollLeft > 5) {
                        wrapper.classList.add('scrolled');
                    } else {
                        wrapper.classList.remove('scrolled');
                    }
                });
            }
        })();

        // Comparison table compact mode detection + Battle Mode
        (function() {
            const section = document.getElementById('comparison');
            const sectionInner = section?.querySelector('.section-inner');
            const wrapper = document.querySelector('.comparison-table-wrapper');
            const table = document.querySelector('.comparison-table');
            const pills = document.querySelectorAll('.competitor-pill');
            const battleContainer = document.getElementById('comparison-battle');
            const battleRows = document.getElementById('battle-rows');
            const battleCompetitorLogo = document.getElementById('battle-competitor-logo');
            const battleCompetitorName = document.getElementById('battle-competitor-name');
            if (!section || !sectionInner || !wrapper || !table || !pills.length || !battleContainer) return;

            let isCompact = false;
            let activeColumn = 3; // Default to Rojo
            let naturalTableWidth = null;

            // Competitor data for battle mode
            const competitors = {
                3: { name: 'Rojo', logo: 'https://rojo.space/img/logo.png' },
                4: { name: 'Argon', logo: 'images/argon.svg' },
                5: { name: 'Pesto', logo: 'https://tr.rbxcdn.com/180DAY-f955c288b7f0f28cd1c8f5e2b56b0d12/420/420/Image/Webp/noFilter' },
                6: { name: 'Script Sync', logo: 'images/scriptsync.svg' },
                7: { name: 'Azul', logo: 'images/azullogo.png' }
            };

            // Extract feature data from table
            function extractFeatureData() {
                const features = [];
                const rows = table.querySelectorAll('tbody tr');
                rows.forEach(row => {
                    const cells = row.querySelectorAll('td');
                    if (cells.length < 7) return;

                    const featureName = cells[0].querySelector('.feature-name')?.textContent || '';
                    const rbxsyncCell = cells[1];
                    const isExclusive = rbxsyncCell.querySelector('.exclusive-tag') !== null;
                    const rbxsyncStatus = isExclusive ? 'exclusive' :
                        rbxsyncCell.querySelector('.status-icon.yes') ? 'yes' :
                        rbxsyncCell.querySelector('.status-icon.partial') ? 'partial' : 'no';

                    const competitorStatuses = {};
                    for (let i = 2; i <= 6; i++) {
                        const cell = cells[i];
                        const colIndex = i + 1; // columns are 3-7
                        competitorStatuses[colIndex] =
                            cell.querySelector('.status-icon.yes') ? 'yes' :
                            cell.querySelector('.status-icon.partial') ? 'partial' : 'no';
                    }

                    features.push({ featureName, rbxsyncStatus, competitorStatuses });
                });
                return features;
            }

            const featureData = extractFeatureData();

            // Generate status icon HTML (compact = true for battle mode)
            function getStatusIcon(status, compact = false) {
                if (status === 'exclusive') {
                    const text = compact ? 'Excl' : 'Exclusive';
                    return `<span class="exclusive-tag">${text}</span>`;
                } else if (status === 'yes') {
                    return '<span class="status-icon yes"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg></span>';
                } else if (status === 'partial') {
                    return '<span class="status-icon partial"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 2a8 8 0 110 16V4z"/></svg></span>';
                } else {
                    return '<span class="status-icon no"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 12h12"/></svg></span>';
                }
            }

            // Score elements
            const rbxsyncScoreEl = document.getElementById('rbxsync-score');
            const competitorScoreEl = document.getElementById('competitor-score');
            const competitorScoreNameEl = document.getElementById('competitor-score-name');

            // Determine winner for a row
            function getWinner(rbxStatus, compStatus) {
                const statusValue = { 'exclusive': 3, 'yes': 2, 'partial': 1, 'no': 0 };
                const rbxVal = statusValue[rbxStatus] || 0;
                const compVal = statusValue[compStatus] || 0;
                if (rbxVal > compVal) return 'rbxsync';
                if (compVal > rbxVal) return 'competitor';
                return 'tie';
            }

            // Update battle view with selected competitor
            function updateBattleView(columnIndex, animate = false) {
                const competitor = competitors[columnIndex];
                if (!competitor) return;

                // Update header
                battleCompetitorLogo.src = competitor.logo;
                battleCompetitorLogo.alt = competitor.name;
                battleCompetitorName.textContent = competitor.name;

                // Calculate scores and generate rows
                let rbxsyncScore = 0;
                let competitorScore = 0;
                let rowsHtml = '';

                featureData.forEach(feature => {
                    const competitorStatus = feature.competitorStatuses[columnIndex] || 'no';
                    const winner = getWinner(feature.rbxsyncStatus, competitorStatus);

                    if (winner === 'rbxsync') rbxsyncScore++;
                    else if (winner === 'competitor') competitorScore++;
                    else if (winner === 'tie') { rbxsyncScore++; competitorScore++; }

                    rowsHtml += `
                        <div class="battle-row">
                            <div class="battle-feature-name">${feature.featureName}</div>
                            <div class="battle-cell rbxsync${animate ? ' fade-in' : ''}">${getStatusIcon(feature.rbxsyncStatus, true)}</div>
                            <div class="battle-cell competitor${animate ? ' fade-in' : ''}">${getStatusIcon(competitorStatus, true)}</div>
                        </div>
                    `;
                });

                battleRows.innerHTML = rowsHtml;

                // Update score display
                if (rbxsyncScoreEl) rbxsyncScoreEl.textContent = rbxsyncScore;
                if (competitorScoreEl) competitorScoreEl.textContent = competitorScore;
                if (competitorScoreNameEl) competitorScoreNameEl.textContent = competitor.name;
            }

            function setActiveCompetitor(columnIndex, animate = false) {
                activeColumn = columnIndex;

                // Update pill states
                pills.forEach(pill => {
                    pill.classList.toggle('active', pill.dataset.column === String(columnIndex));
                });

                // Update battle view
                updateBattleView(columnIndex, animate);

                // Highlight column on desktop table
                table.querySelectorAll('th, td').forEach(cell => {
                    cell.classList.remove('mobile-visible', 'column-highlight');
                });
                table.querySelectorAll(`th:nth-child(${columnIndex}), td:nth-child(${columnIndex})`).forEach(cell => {
                    cell.classList.add('mobile-visible', 'column-highlight');
                });
            }

            function measureNaturalWidth() {
                section.classList.remove('comparison-compact');
                naturalTableWidth = table.scrollWidth;
            }

            function checkCompactMode() {
                const availableWidth = sectionInner.clientWidth;
                const needsCompact = naturalTableWidth > availableWidth;

                if (needsCompact !== isCompact) {
                    isCompact = needsCompact;
                    section.classList.toggle('comparison-compact', isCompact);
                    if (isCompact) {
                        setActiveCompetitor(activeColumn);
                    }
                }
            }

            // Initialize
            setActiveCompetitor(3);
            measureNaturalWidth();
            checkCompactMode();

            // Check on resize
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(checkCompactMode, 50);
            });

            // Handle pill clicks
            pills.forEach(pill => {
                pill.addEventListener('click', () => {
                    const column = parseInt(pill.dataset.column, 10);
                    if (column !== activeColumn) {
                        setActiveCompetitor(column, true);
                    }
                });
            });
        })();

        // Fetch latest release from GitHub and update badge (via proxy to avoid rate limits)
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                const res = await fetch('/api/github?type=release');
                if (!res.ok) return;
                const release = await res.json();

                const badge = document.querySelector('.release-badge');
                if (!badge) return;

                // Update version/description text
                const shinyText = badge.querySelector('.shiny-text');
                if (shinyText) {
                    const title = release.name || release.tag_name;
                    shinyText.textContent = title;
                    shinyText.setAttribute('data-text', title);
                }

                // Update date
                const dateSpan = badge.querySelector('.release-date');
                if (dateSpan) {
                    const date = new Date(release.published_at);
                    const formatted = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                    dateSpan.textContent = formatted;
                }
            } catch (e) {
                console.warn('Failed to fetch latest release:', e);
            }
        });

        // ============================================
        // SHARED API DUMP MANAGER
        // ============================================
        const APIDumpManager = (function() {
            const API_DUMP_URL = 'https://raw.githubusercontent.com/MaximumADHD/Roblox-Client-Tracker/roblox/API-Dump.json';

            let dump = null;
            let classMap = new Map();
            let enumMap = new Map();
            let loadingPromise = null;

            // Value type to rbxjson type mapping (from apiDumpTypes.ts)
            const VALUE_TYPE_TO_RBXJSON = {
                'bool': 'bool', 'int': 'int', 'int64': 'int64', 'float': 'float', 'double': 'double', 'string': 'string',
                'Vector2': 'Vector2', 'Vector2int16': 'Vector2int16', 'Vector3': 'Vector3', 'Vector3int16': 'Vector3int16',
                'CFrame': 'CFrame', 'CoordinateFrame': 'CFrame', 'OptionalCoordinateFrame': 'OptionalCFrame',
                'Color3': 'Color3', 'Color3uint8': 'Color3uint8', 'BrickColor': 'BrickColor',
                'UDim': 'UDim', 'UDim2': 'UDim2', 'Rect': 'Rect',
                'NumberSequence': 'NumberSequence', 'ColorSequence': 'ColorSequence', 'NumberRange': 'NumberRange',
                'Font': 'Font', 'Faces': 'Faces', 'Axes': 'Axes', 'PhysicalProperties': 'PhysicalProperties',
                'Ray': 'Ray', 'Region3': 'Region3', 'Region3int16': 'Region3int16',
                'UniqueId': 'UniqueId', 'SecurityCapabilities': 'SecurityCapabilities',
                'BinaryString': 'BinaryString', 'SharedString': 'SharedString',
                'Content': 'Content', 'ProtectedString': 'ProtectedString',
            };

            async function load() {
                if (dump) return dump;
                if (loadingPromise) return loadingPromise;

                loadingPromise = fetch(API_DUMP_URL)
                    .then(res => res.json())
                    .then(data => {
                        dump = data;
                        buildMaps();
                        console.log(`[RbxSync] Loaded API dump: ${classMap.size} classes, ${enumMap.size} enums`);
                        return dump;
                    })
                    .catch(err => {
                        console.error('[RbxSync] Failed to load API dump:', err);
                        return null;
                    });

                return loadingPromise;
            }

            function buildMaps() {
                if (!dump) return;
                classMap.clear();
                enumMap.clear();
                for (const cls of dump.Classes) classMap.set(cls.Name, cls);
                for (const enumInfo of dump.Enums) enumMap.set(enumInfo.Name, enumInfo);
            }

            function getCreatableClasses() {
                if (!dump) return [];
                return dump.Classes.filter(cls => {
                    const tags = cls.Tags || [];
                    if (tags.includes('NotCreatable')) return false;
                    if (tags.includes('Service')) return false;
                    if (tags.includes('Settings')) return false;
                    if (tags.includes('NotBrowsable')) return false;
                    if (tags.includes('Deprecated')) return false;
                    if (cls.Name.startsWith('RBX')) return false;
                    if (cls.Name.startsWith('_')) return false;
                    if (cls.Name.includes('Internal')) return false;
                    return true;
                });
            }

            function getAllClasses() {
                if (!dump) return [];
                return dump.Classes.filter(cls => {
                    // Only filter out truly internal/hidden classes
                    if (cls.Name.startsWith('_')) return false;
                    if (cls.Name.includes('Internal')) return false;
                    const tags = cls.Tags || [];
                    if (tags.includes('NotBrowsable')) return false;
                    return true;
                });
            }

            function getClassTags(cls) {
                const badges = [];
                const tags = cls.Tags || [];

                if (tags.includes('Service')) badges.push({ label: 'Service', color: 'blue' });
                if (tags.includes('NotCreatable')) badges.push({ label: 'Abstract', color: 'purple' });
                if (tags.includes('Deprecated')) badges.push({ label: 'Deprecated', color: 'orange' });
                if (tags.includes('Settings')) badges.push({ label: 'Settings', color: 'gray' });
                if (cls.Name.startsWith('RBX')) badges.push({ label: 'Internal', color: 'gray' });

                return badges;
            }

            function getClassInfo(className) { return classMap.get(className); }
            function getEnumInfo(enumName) { return enumMap.get(enumName); }
            function getEnumValues(enumName) { return enumMap.get(enumName)?.Items || []; }

            function getInheritanceChain(className) {
                const chain = [];
                let current = classMap.get(className);
                while (current) {
                    chain.push(current.Name);
                    current = current.Superclass ? classMap.get(current.Superclass) : null;
                }
                return chain;
            }

            function getSerializableProperties(className) {
                const allProps = [];
                const seen = new Set();
                const chain = getInheritanceChain(className);

                for (const clsName of chain) {
                    const cls = classMap.get(clsName);
                    if (!cls) continue;

                    for (const member of cls.Members) {
                        if (member.MemberType !== 'Property') continue;
                        if (seen.has(member.Name)) continue;

                        const tags = member.Tags || [];
                        if (tags.includes('Hidden')) continue;
                        if (tags.includes('NotScriptable')) continue;
                        if (tags.includes('ReadOnly')) continue;
                        if (tags.includes('Deprecated')) continue;

                        const security = member.Security || { Read: 'None', Write: 'None' };
                        if (security.Read !== 'None' && security.Read !== 'PluginSecurity') continue;
                        if (security.Write !== 'None' && security.Write !== 'PluginSecurity') continue;

                        const skipProps = ['Parent', 'ClassName', 'Archivable', 'DataCost', 'RobloxLocked', 'Name'];
                        if (skipProps.includes(member.Name)) continue;

                        seen.add(member.Name);
                        allProps.push({
                            name: member.Name,
                            valueType: member.ValueType,
                            definedIn: clsName,
                            category: member.Category || 'Data',
                        });
                    }
                }
                return allProps;
            }

            function getRbxJsonType(valueType) {
                if (!valueType) return null;
                if (valueType.Category === 'Enum') return 'Enum';
                if (valueType.Category === 'Class') return 'Ref';
                return VALUE_TYPE_TO_RBXJSON[valueType.Name] || null;
            }

            return {
                load, getCreatableClasses, getAllClasses, getClassTags, getClassInfo, getEnumInfo, getEnumValues,
                getInheritanceChain, getSerializableProperties, getRbxJsonType, VALUE_TYPE_TO_RBXJSON,
            };
        })();

        // ============================================
        // TEMPLATE GENERATOR
        // ============================================
        const TemplateGenerator = (function() {
            const PRIORITY_BY_CLASS = {
                'Part': ['Anchored', 'CanCollide', 'Size', 'CFrame', 'Color', 'Material', 'Transparency'],
                'MeshPart': ['Anchored', 'CanCollide', 'Size', 'CFrame', 'MeshId', 'TextureID', 'Material'],
                'Frame': ['Size', 'Position', 'AnchorPoint', 'BackgroundColor3', 'BackgroundTransparency'],
                'TextLabel': ['Text', 'TextColor3', 'TextSize', 'Font', 'Size', 'Position', 'BackgroundTransparency'],
                'TextButton': ['Text', 'TextColor3', 'TextSize', 'Font', 'Size', 'Position', 'BackgroundColor3'],
                'ImageLabel': ['Image', 'Size', 'Position', 'BackgroundTransparency', 'ImageColor3'],
                'Sound': ['SoundId', 'Volume', 'Looped', 'PlayOnRemove'],
                'ScreenGui': ['ResetOnSpawn', 'IgnoreGuiInset', 'ZIndexBehavior'],
                'Model': ['PrimaryPart'],
                'ProximityPrompt': ['ActionText', 'ObjectText', 'MaxActivationDistance', 'HoldDuration'],
                'Beam': ['Attachment0', 'Attachment1', 'Color', 'Transparency', 'Width0', 'Width1'],
                'ParticleEmitter': ['Texture', 'Color', 'Size', 'Lifetime', 'Rate', 'Speed'],
                'Attachment': ['CFrame', 'Visible'],
                'Highlight': ['FillColor', 'OutlineColor', 'FillTransparency', 'OutlineTransparency'],
            };

            const DEFAULT_VALUES = {
                'bool': true, 'int': 0, 'int64': 0, 'float': 0, 'double': 0, 'string': '',
                'Content': 'rbxassetid://0', 'ProtectedString': '',
                'Vector2': { x: 0, y: 0 }, 'Vector2int16': { x: 0, y: 0 },
                'Vector3': { x: 0, y: 0, z: 0 }, 'Vector3int16': { x: 0, y: 0, z: 0 },
                'CFrame': { position: [0, 0, 0], rotation: [1, 0, 0, 0, 1, 0, 0, 0, 1] },
                'OptionalCFrame': null,
                'Color3': { r: 1, g: 1, b: 1 }, 'Color3uint8': { r: 255, g: 255, b: 255 },
                'BrickColor': 194,
                'UDim': { scale: 0, offset: 0 },
                'UDim2': { x: { scale: 0, offset: 0 }, y: { scale: 0, offset: 0 } },
                'Rect': { min: { x: 0, y: 0 }, max: { x: 0, y: 0 } },
                'NumberSequence': [{ time: 0, value: 1 }, { time: 1, value: 1 }],
                'ColorSequence': [{ time: 0, color: { r: 1, g: 1, b: 1 } }, { time: 1, color: { r: 1, g: 1, b: 1 } }],
                'NumberRange': { min: 0, max: 1 },
                'Font': { family: 'rbxasset://fonts/families/SourceSansPro.json', weight: 'Regular', style: 'Normal' },
                'Faces': { top: false, bottom: false, left: false, right: false, front: false, back: false },
                'Axes': { x: false, y: false, z: false },
                'PhysicalProperties': null, 'Ray': { origin: { x: 0, y: 0, z: 0 }, direction: { x: 0, y: 1, z: 0 } },
                'Region3': { min: { x: 0, y: 0, z: 0 }, max: { x: 0, y: 0, z: 0 } },
                'Region3int16': { min: { x: 0, y: 0, z: 0 }, max: { x: 0, y: 0, z: 0 } },
                'Ref': null, 'UniqueId': '', 'SecurityCapabilities': 0, 'BinaryString': '', 'SharedString': '',
            };

            const SMART_DEFAULTS = {
                'Anchored': true, 'CanCollide': true, 'Size': { x: 4, y: 1, z: 2 },
                'Transparency': 0, 'BackgroundTransparency': 0, 'Volume': 0.5, 'Looped': false,
                'ResetOnSpawn': false, 'IgnoreGuiInset': true, 'MaxActivationDistance': 10,
                'HoldDuration': 0, 'AlwaysOnTop': true, 'Visible': true,
            };

            function getDefaultValue(propName, rbxJsonType, valueType) {
                if (SMART_DEFAULTS.hasOwnProperty(propName)) return SMART_DEFAULTS[propName];
                if (rbxJsonType === 'Enum' && valueType) {
                    const enumValues = APIDumpManager.getEnumValues(valueType.Name);
                    const firstValue = enumValues[0]?.Name || 'Default';
                    return { enumType: valueType.Name, value: firstValue };
                }
                return DEFAULT_VALUES[rbxJsonType] ?? null;
            }

            function generate(className, maxProperties = 8) {
                const classInfo = APIDumpManager.getClassInfo(className);
                if (!classInfo) return null;

                const allProps = APIDumpManager.getSerializableProperties(className);
                const priority = PRIORITY_BY_CLASS[className] || [];
                const sortedProps = [];
                const seen = new Set();

                for (const propName of priority) {
                    const prop = allProps.find(p => p.name === propName);
                    if (prop && !seen.has(prop.name)) { sortedProps.push(prop); seen.add(prop.name); }
                }
                for (const prop of allProps) {
                    if (!seen.has(prop.name) && prop.definedIn === className) { sortedProps.push(prop); seen.add(prop.name); }
                }
                for (const prop of allProps) {
                    if (!seen.has(prop.name)) { sortedProps.push(prop); seen.add(prop.name); }
                }

                const limitedProps = sortedProps.slice(0, maxProperties);
                const properties = {};
                for (const prop of limitedProps) {
                    const rbxJsonType = APIDumpManager.getRbxJsonType(prop.valueType);
                    if (rbxJsonType) {
                        properties[prop.name] = { type: rbxJsonType, value: getDefaultValue(prop.name, rbxJsonType, prop.valueType) };
                    }
                }

                return { className, properties };
            }

            function toDisplayHTML(template) {
                if (!template) return '<span class="error">Class not found</span>';
                const json = JSON.stringify(template, null, 2);
                return json
                    .replace(/"([^"]+)":/g, '<span class="key">"$1"</span>:')
                    .replace(/: "([^"]*)"/g, ': <span class="string">"$1"</span>')
                    .replace(/: (\d+\.?\d*)/g, ': <span class="number">$1</span>')
                    .replace(/: (true|false)/g, ': <span class="bool">$1</span>')
                    .replace(/: (null)/g, ': <span class="null">$1</span>');
            }

            // Verify type coverage across all creatable classes
            function verifyTypeCoverage() {
                const classes = APIDumpManager.getCreatableClasses();
                const unhandled = new Map();
                let totalProps = 0, handledProps = 0;

                for (const cls of classes) {
                    const props = APIDumpManager.getSerializableProperties(cls.Name);
                    for (const prop of props) {
                        totalProps++;
                        const rbxType = APIDumpManager.getRbxJsonType(prop.valueType);
                        if (rbxType) {
                            handledProps++;
                        } else {
                            const key = `${prop.valueType.Category}:${prop.valueType.Name}`;
                            if (!unhandled.has(key)) unhandled.set(key, []);
                            unhandled.get(key).push(`${cls.Name}.${prop.name}`);
                        }
                    }
                }

                const coverage = ((handledProps / totalProps) * 100).toFixed(1);
                console.log(`Type Coverage: ${coverage}% (${handledProps}/${totalProps} properties)`);
                if (unhandled.size > 0) {
                    console.log('Unhandled types:', Object.fromEntries(unhandled));
                }
                return { coverage, handledProps, totalProps, unhandled: Object.fromEntries(unhandled) };
            }

            return { generate, toDisplayHTML, PRIORITY_BY_CLASS, verifyTypeCoverage };
        })();

        // ============================================
        // ROTATING CLASS NAMES (uses shared APIDumpManager)
        // ============================================
        (function() {
            const container = document.getElementById('rotating-classnames');
            const wrapper = document.querySelector('.rotating-wrapper');
            if (!container || !wrapper) return;

            // VS Code dark theme colors
            const darkColors = [
                '#C586C0', '#4EC9B0', '#CE9178', '#DCDCAA',
                '#D7BA7D', '#9CDCFE', '#B5CEA8', '#F44747',
            ];
            // Light theme colors (darker for readability)
            const lightColors = [
                '#9333ea', '#0f766e', '#c2410c', '#a16207',
                '#92400e', '#0369a1', '#15803d', '#dc2626',
            ];

            function getColors() {
                const isLight = document.documentElement.getAttribute('data-theme') === 'light';
                return isLight ? lightColors : darkColors;
            }

            let allClasses = [];
            let filteredClasses = [];
            let widthCache = new Map();
            let currentIndex = 0;
            let currentSpan = container.querySelector('span');
            let isAnimating = false;
            let intervalId = null;

            const fallbackClassesRaw = [
                'ModuleScript', 'LocalScript', 'Script', 'Part', 'MeshPart', 'Model',
                'Frame', 'TextLabel', 'ScreenGui', 'Sound', 'Animation',
                'RemoteEvent', 'Highlight', 'Beam', 'Decal', 'Texture',
            ];

            const measurer = document.createElement('span');
            measurer.style.cssText = `position:absolute;visibility:hidden;white-space:nowrap;font-weight:600;pointer-events:none;left:-9999px;`;
            document.body.appendChild(measurer);

            function measureWidth(text, forceRecalc = false) {
                const cacheKey = text + '_' + window.innerWidth;
                if (!forceRecalc && widthCache.has(cacheKey)) return widthCache.get(cacheKey);

                // Copy all relevant styles from the actual span
                const computedStyle = getComputedStyle(currentSpan);
                measurer.style.fontSize = computedStyle.fontSize;
                measurer.style.fontFamily = computedStyle.fontFamily;
                measurer.style.fontWeight = computedStyle.fontWeight;
                measurer.style.letterSpacing = computedStyle.letterSpacing;
                measurer.textContent = text;

                const width = measurer.getBoundingClientRect().width;
                widthCache.set(cacheKey, width);
                return width;
            }

            function pluralize(word) {
                if (!word) return word;
                const lower = word.toLowerCase();
                if (lower.endsWith('s') && !lower.endsWith('ss')) return word;
                if (lower.endsWith('s') || lower.endsWith('x') || lower.endsWith('z') || lower.endsWith('ch') || lower.endsWith('sh')) return word + 'es';
                if (lower.endsWith('y') && word.length > 1 && !'aeiou'.includes(lower[lower.length - 2])) return word.slice(0, -1) + 'ies';
                return word + 's';
            }

            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            // Get max character length based on viewport width
            function getMaxLength() {
                const vw = window.innerWidth;
                if (vw < 400) return 6;       // Very small mobile - short words only
                if (vw < 500) return 8;       // Small mobile
                if (vw < 600) return 9;       // Mobile
                if (vw < 900) return 12;      // Tablet
                return 16;                    // Desktop - keeps "to Git." on same line
            }

            // Filter classes by max length for current viewport
            function filterByLength() {
                const maxLen = getMaxLength();
                filteredClasses = allClasses.filter(name => name.length <= maxLen);
                // Ensure we have at least some classes
                if (filteredClasses.length < 10) {
                    filteredClasses = allClasses.filter(name => name.length <= maxLen + 4);
                }
                shuffle(filteredClasses);
            }

            function setWidth(text, forceRecalc = false) {
                wrapper.style.width = Math.ceil(measureWidth(text, forceRecalc)) + 'px';
            }

            function rotateToNext() {
                if (isAnimating || filteredClasses.length === 0) return;
                isAnimating = true;
                const nextIndex = (currentIndex + 1) % filteredClasses.length;
                const nextClass = filteredClasses[nextIndex];
                const colors = getColors();
                const nextColor = colors[nextIndex % colors.length];
                currentSpan.classList.remove('active');
                setTimeout(() => {
                    currentSpan.textContent = nextClass;
                    currentSpan.style.color = nextColor;
                    setWidth(nextClass);
                    requestAnimationFrame(() => {
                        requestAnimationFrame(() => {
                            currentSpan.classList.add('active');
                            currentIndex = nextIndex;
                            isAnimating = false;
                        });
                    });
                }, 350);
            }

            async function init() {
                await APIDumpManager.load();
                const classes = APIDumpManager.getCreatableClasses();
                if (classes.length > 0) {
                    allClasses = classes.map(c => pluralize(c.Name));
                } else {
                    allClasses = fallbackClassesRaw.map(pluralize);
                }

                if (document.fonts?.ready) await document.fonts.ready;

                // Filter by viewport and show first
                filterByLength();
                filteredClasses.slice(0, 30).forEach(cls => measureWidth(cls));

                const firstClass = filteredClasses[0] || 'Scripts';
                currentSpan.textContent = firstClass;
                currentSpan.style.color = getColors()[0];
                setWidth(firstClass);
                currentSpan.classList.add('active');

                setTimeout(() => {
                    intervalId = setInterval(rotateToNext, 2500);
                }, 1000);

                // Update color when theme changes
                const observer = new MutationObserver(() => {
                    const colors = getColors();
                    currentSpan.style.color = colors[currentIndex % colors.length];
                });
                observer.observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] });
            }

            // Update width on resize - keep in sync with CSS font-size changes
            let resizeRAF = null;
            window.addEventListener('resize', () => {
                if (resizeRAF) cancelAnimationFrame(resizeRAF);
                resizeRAF = requestAnimationFrame(() => {
                    // Clear cache and force fresh measurement
                    widthCache.clear();
                    setWidth(currentSpan.textContent, true);
                });
            });

            // Also check if text needs to change for new viewport (debounced)
            let filterTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(filterTimeout);
                filterTimeout = setTimeout(() => {
                    filterByLength();
                    const currentText = currentSpan.textContent;
                    if (!filteredClasses.includes(currentText)) {
                        currentIndex = 0;
                        const newText = filteredClasses[0] || 'Scripts';
                        currentSpan.textContent = newText;
                        widthCache.clear();
                        setWidth(newText, true);
                    }
                }, 300);
            });

            init();
        })();


        // Update section OS toggle (local to each card)
        (function() {
            const updateOsBtns = document.querySelectorAll('.update-os-btn');

            updateOsBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const card = btn.closest('.update-card');
                    const os = btn.dataset.os;

                    // Update buttons within this card
                    card.querySelectorAll('.update-os-btn').forEach(b => {
                        b.classList.toggle('active', b.dataset.os === os);
                    });

                    // Update content within this card
                    card.querySelectorAll('.update-os-content').forEach(content => {
                        content.classList.toggle('active', content.dataset.os === os);
                    });
                });
            });

            // Auto-detect OS and set initial state
            const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
            const defaultOS = isMac ? 'macos' : 'windows';

            document.querySelectorAll('.update-card').forEach(card => {
                const targetBtn = card.querySelector(`.update-os-btn[data-os="${defaultOS}"]`);
                if (targetBtn) {
                    card.querySelectorAll('.update-os-btn').forEach(b => {
                        b.classList.toggle('active', b.dataset.os === defaultOS);
                    });
                    card.querySelectorAll('.update-os-content').forEach(content => {
                        content.classList.toggle('active', content.dataset.os === defaultOS);
                    });
                }
            });
        })();

        // Mode Toggle functionality (Simple/Advanced)
        (function() {
            const modeToggleBtns = document.querySelectorAll('.install-mode-btn, .mode-toggle-btn, .install-toggle-btn[data-mode]');
            const modeContents = document.querySelectorAll('.mode-content');
            let isUserClick = false; // Track if mode change is from user click

            function setMode(mode, fromClick = false) {
                // Update buttons
                modeToggleBtns.forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.mode === mode);
                });

                // Update content blocks
                modeContents.forEach(content => {
                    content.classList.toggle('active', content.dataset.mode === mode);
                });

                // Replay animations when switching to simple mode (only on user click)
                if (mode === 'simple' && fromClick) {
                    const cards = document.querySelectorAll('.install-card-wrapper');
                    const finalStep = document.querySelector('.install-final-step');

                    // Remove visible class
                    cards.forEach(card => card.classList.remove('visible'));
                    if (finalStep) finalStep.classList.remove('visible');

                    // Force reflow and re-add visible class
                    requestAnimationFrame(() => {
                        requestAnimationFrame(() => {
                            cards.forEach(card => card.classList.add('visible'));
                            if (finalStep) finalStep.classList.add('visible');

                            // Fire confetti after animations complete
                            if (window.scheduleInstallConfetti) window.scheduleInstallConfetti(1600);
                        });
                    });
                }

                // Save preference
                localStorage.setItem('rbxsync-install-mode', mode);
            }

            // Set initial mode (from localStorage or default to simple) - no confetti on load
            const savedMode = localStorage.getItem('rbxsync-install-mode');
            setMode(savedMode || 'simple', false);

            // Handle toggle clicks
            modeToggleBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    setMode(btn.dataset.mode, true);
                });
            });
        })();

        // Install section fade-in animation on scroll
        (function() {
            const installCards = document.querySelectorAll('.install-card-wrapper');
            const finalStep = document.querySelector('.install-final-step');
            const installSectionEl = document.querySelector('#install');
            const confettiCanvas = document.getElementById('install-confetti-canvas');

            // Create confetti instance bound to the install section canvas
            let installConfetti = null;
            let confettiTimeout = null;
            let lastConfettiTime = 0;
            const CONFETTI_COOLDOWN = 2000; // Minimum 2s between confetti bursts

            if (confettiCanvas && typeof confetti !== 'undefined' && confetti.create) {
                // Set canvas size to match section
                function resizeCanvas() {
                    if (installSectionEl && confettiCanvas) {
                        confettiCanvas.width = installSectionEl.offsetWidth;
                        confettiCanvas.height = installSectionEl.offsetHeight;
                    }
                }
                resizeCanvas();
                window.addEventListener('resize', resizeCanvas);

                installConfetti = confetti.create(confettiCanvas, { resize: true, useWorker: true });
            }

            // Expose fireConfetti globally so mode toggle can use it
            window.fireInstallConfetti = function() {
                if (!installConfetti) return;

                // Prevent rapid-fire confetti
                const now = Date.now();
                if (now - lastConfettiTime < CONFETTI_COOLDOWN) return;
                lastConfettiTime = now;

                // Clear any pending confetti
                if (confettiTimeout) {
                    clearTimeout(confettiTimeout);
                    confettiTimeout = null;
                }

                // Get the final step position relative to the install section
                const sectionRect = installSectionEl.getBoundingClientRect();
                const stepRect = finalStep ? finalStep.getBoundingClientRect() : null;
                const originY = stepRect
                    ? (stepRect.top - sectionRect.top + stepRect.height * 0.5) / sectionRect.height
                    : 0.4;

                // Fire confetti from both sides
                const defaults = {
                    spread: 50,
                    ticks: 200,
                    gravity: 0.8,
                    decay: 0.96,
                    startVelocity: 18,
                    scalar: 0.7,
                    colors: ['#c23c40', '#ffffff', '#a1a1aa', '#dc4a4f', '#71717a']
                };

                // Reduce confetti on mobile
                const confettiCount = window.innerWidth < 600 ? 20 : 50;

                installConfetti({
                    ...defaults,
                    particleCount: confettiCount,
                    origin: { x: 0, y: originY },
                    angle: 45
                });
                installConfetti({
                    ...defaults,
                    particleCount: confettiCount,
                    origin: { x: 1, y: originY },
                    angle: 135
                });
            }

            // Schedule confetti with debouncing
            window.scheduleInstallConfetti = function(delay) {
                if (confettiTimeout) clearTimeout(confettiTimeout);
                confettiTimeout = setTimeout(window.fireInstallConfetti, delay);
            }

            // Get the cards grid container
            const cardsGrid = document.querySelector('.install-cards-grid');

            // Observer for the cards grid - triggers when cards are actually visible
            const cardsObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        installCards.forEach(card => card.classList.add('visible'));
                        if (finalStep) finalStep.classList.add('visible');

                        // Fire confetti after step 4 appears (0.927s delay + 0.6s transition + small buffer)
                        window.scheduleInstallConfetti(1600);

                        cardsObserver.disconnect();
                    }
                });
            }, { threshold: 0.3, rootMargin: '0px 0px -50px 0px' });

            // Observe the cards grid so animation triggers when cards are visible
            if (cardsGrid) {
                cardsObserver.observe(cardsGrid);
            }
        })();

        // Platform Toggle (unified install controls - controls all OS-specific content)
        (function() {
            const platformBtns = document.querySelectorAll('#platform-toggle .install-toggle-btn');
            const cliOneliners = document.querySelectorAll('.install-oneliner[data-cli-os]');
            const osContents = document.querySelectorAll('.os-content');
            const osInlines = document.querySelectorAll('.os-inline');

            // Auto-detect OS
            const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
            const savedOS = localStorage.getItem('rbxsync-os');
            const defaultOS = savedOS || (isMac ? 'mac' : 'windows');

            function setPlatform(os) {
                // Update unified platform buttons
                platformBtns.forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.platform === os);
                });

                // Show/hide Quick Install oneliners
                cliOneliners.forEach(el => {
                    el.style.display = el.dataset.cliOs === os ? 'flex' : 'none';
                });

                // Update Build from Source OS content
                osContents.forEach(content => {
                    content.classList.toggle('active', content.dataset.os === os);
                });

                // Update inline OS spans
                osInlines.forEach(inline => {
                    inline.classList.toggle('active', inline.dataset.os === os);
                });

                // Save preference
                localStorage.setItem('rbxsync-os', os);
            }

            // Set initial OS
            setPlatform(defaultOS);

            // Handle unified platform toggle clicks
            platformBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    setPlatform(btn.dataset.platform);
                });
            });
        })();

        // Copy button functionality (install section)
        document.querySelectorAll('.copy-btn').forEach(btn => {
            btn.addEventListener('click', async () => {
                const codeBlock = btn.previousElementSibling;
                const textToCopy = codeBlock.dataset.copy || codeBlock.textContent;

                try {
                    await navigator.clipboard.writeText(textToCopy);
                    btn.classList.add('copied');
                    btn.setAttribute('aria-label', 'Copied!');

                    setTimeout(() => {
                        btn.classList.remove('copied');
                        btn.setAttribute('aria-label', 'Copy to clipboard');
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy:', err);
                }
            });
        });

        // CLI command copy - click anywhere on command to copy
        document.querySelectorAll('.cli-command[data-copy]').forEach(cmd => {
            cmd.style.cursor = 'pointer';
            cmd.addEventListener('click', async () => {
                const textToCopy = cmd.dataset.copy;
                const btn = cmd.querySelector('.cli-copy-btn');

                try {
                    await navigator.clipboard.writeText(textToCopy);
                    if (btn) {
                        btn.classList.add('copied');
                        btn.setAttribute('aria-label', 'Copied!');
                        setTimeout(() => {
                            btn.classList.remove('copied');
                            btn.setAttribute('aria-label', 'Copy to clipboard');
                        }, 2000);
                    }
                } catch (err) {
                    console.error('Failed to copy:', err);
                }
            });
        });

        // One-liner copy buttons
        document.querySelectorAll('.copy-oneliner-btn').forEach(btn => {
            btn.addEventListener('click', async () => {
                const textToCopy = btn.dataset.copy;
                try {
                    await navigator.clipboard.writeText(textToCopy);
                    btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>';
                    btn.style.background = '#22c55e';
                    setTimeout(() => {
                        btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>';
                        btn.style.background = '';
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy:', err);
                }
            });
        });

        // ============================================
        // AURORA ANIMATION
        // ============================================
        (function initAurora() {
            const auroraElements = [
                document.querySelector('.class-search-input-wrapper'),
                document.querySelector('.btn-secondary-wrapper'),
                document.querySelector('.extract-video-wrapper')
            ].filter(Boolean);

            if (auroraElements.length === 0) {
                console.warn('Aurora: no elements found');
                return;
            }

            let angle1 = 0, angle2 = 180, angle3 = 90;
            let velocity1 = 0.15, velocity2 = -0.10, velocity3 = 0.08;
            let targetVel1 = 0.15, targetVel2 = -0.10, targetVel3 = 0.08;
            const baseVel1 = 0.15, baseVel2 = -0.10, baseVel3 = 0.08;
            const boostVel1 = 0.35, boostVel2 = -0.25, boostVel3 = 0.18;
            let boostDecayTimeout = null;

            function animateAurora() {
                velocity1 += (targetVel1 - velocity1) * 0.08;
                velocity2 += (targetVel2 - velocity2) * 0.08;
                velocity3 += (targetVel3 - velocity3) * 0.08;

                angle1 = (angle1 + velocity1) % 360;
                angle2 = (angle2 + velocity2) % 360;
                angle3 = (angle3 + velocity3) % 360;
                if (angle2 < 0) angle2 += 360;

                auroraElements.forEach(el => {
                    el.style.setProperty('--aurora-rotate', angle1 + 'deg');
                    el.style.setProperty('--aurora-rotate-2', angle2 + 'deg');
                    el.style.setProperty('--aurora-rotate-3', angle3 + 'deg');
                });

                requestAnimationFrame(animateAurora);
            }
            animateAurora();

            // Hover boost for aurora elements
            function addHoverBoost(el) {
                if (!el) return;
                el.addEventListener('mouseenter', () => {
                    clearTimeout(boostDecayTimeout);
                    targetVel1 = boostVel1;
                    targetVel2 = boostVel2;
                    targetVel3 = boostVel3;
                    boostDecayTimeout = setTimeout(() => {
                        targetVel1 = baseVel1;
                        targetVel2 = baseVel2;
                        targetVel3 = baseVel3;
                    }, 400);
                });

                el.addEventListener('mouseleave', () => {
                    clearTimeout(boostDecayTimeout);
                    targetVel1 = baseVel1;
                    targetVel2 = baseVel2;
                    targetVel3 = baseVel3;
                });
            }

            addHoverBoost(document.querySelector('.btn-secondary-wrapper'));

            // Proximity-based brightness for all aurora elements
            const proximityRadius = 100; // pixels
            let currentBrightness = auroraElements.map(() => 0);
            let targetBrightness = auroraElements.map(() => 0);
            let lastMouseX = 0;
            let lastMouseY = 0;

            // Search focus state (needs to be declared before mousemove listener)
            const searchInput = document.getElementById('class-search-input');
            const searchWrapper = document.querySelector('.class-search-input-wrapper');
            let isSearchFocused = false;
            const searchWrapperIndex = auroraElements.indexOf(searchWrapper);

            function updateBrightness() {
                let needsUpdate = false;
                auroraElements.forEach((el, i) => {
                    currentBrightness[i] += (targetBrightness[i] - currentBrightness[i]) * 0.02;
                    el.style.setProperty('--aurora-brightness', currentBrightness[i]);
                    if (Math.abs(targetBrightness[i] - currentBrightness[i]) > 0.01) {
                        needsUpdate = true;
                    }
                });
                if (needsUpdate) {
                    requestAnimationFrame(updateBrightness);
                }
            }

            function calculateBrightness(clientX, clientY) {
                auroraElements.forEach((el, i) => {
                    // Skip if search is focused and this is the search wrapper
                    if (isSearchFocused && i === searchWrapperIndex) return;

                    const rect = el.getBoundingClientRect();

                    // Calculate distance to nearest edge of element (0 if inside)
                    const dx = Math.max(rect.left - clientX, 0, clientX - rect.right);
                    const dy = Math.max(rect.top - clientY, 0, clientY - rect.bottom);
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < proximityRadius) {
                        const factor = 1 - (distance / proximityRadius);
                        targetBrightness[i] = Math.pow(factor, 0.6);
                    } else {
                        targetBrightness[i] = 0;
                    }
                });
                requestAnimationFrame(updateBrightness);
            }

            document.addEventListener('mousemove', (e) => {
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
                calculateBrightness(e.clientX, e.clientY);
            });

            // Also update on scroll since elements move relative to cursor
            window.addEventListener('scroll', () => {
                calculateBrightness(lastMouseX, lastMouseY);
            }, { passive: true });

            // Search input focus boost (sustained while typing)
            if (searchInput && searchWrapper) {
                searchInput.addEventListener('focus', () => {
                    isSearchFocused = true;
                    clearTimeout(boostDecayTimeout);
                    targetVel1 = boostVel1;
                    targetVel2 = boostVel2;
                    targetVel3 = boostVel3;
                    // Set brightness to max when focused
                    if (searchWrapperIndex >= 0) {
                        targetBrightness[searchWrapperIndex] = 1;
                        requestAnimationFrame(updateBrightness);
                    }
                });

                searchInput.addEventListener('blur', () => {
                    isSearchFocused = false;
                    clearTimeout(boostDecayTimeout);
                    targetVel1 = baseVel1;
                    targetVel2 = baseVel2;
                    targetVel3 = baseVel3;
                    // Reset brightness on blur (will be recalculated by proximity)
                    if (searchWrapperIndex >= 0) {
                        targetBrightness[searchWrapperIndex] = 0;
                        requestAnimationFrame(updateBrightness);
                    }
                });

                // Hover boost for search wrapper (but respect focus state)
                searchWrapper.addEventListener('mouseenter', () => {
                    clearTimeout(boostDecayTimeout);
                    targetVel1 = boostVel1;
                    targetVel2 = boostVel2;
                    targetVel3 = boostVel3;
                    boostDecayTimeout = setTimeout(() => {
                        // Only decay if not focused
                        if (!isSearchFocused) {
                            targetVel1 = baseVel1;
                            targetVel2 = baseVel2;
                            targetVel3 = baseVel3;
                        }
                    }, 400);
                });

                searchWrapper.addEventListener('mouseleave', () => {
                    // Only reset if not focused
                    if (!isSearchFocused) {
                        clearTimeout(boostDecayTimeout);
                        targetVel1 = baseVel1;
                        targetVel2 = baseVel2;
                        targetVel3 = baseVel3;
                    }
                });
            }

        })();

        // ============================================
        // CLASS SEARCH CONTROLLER
        // ============================================
        (function() {
            const input = document.getElementById('class-search-input');
            const dropdown = document.getElementById('class-search-dropdown');
            const countEl = document.getElementById('class-search-count');
            const codeEl = document.getElementById('template-code');
            const nameEl = document.getElementById('template-name');
            const quickPicks = document.querySelectorAll('.format-type-quick');

            if (!input || !dropdown || !codeEl) return;

            let allClasses = [];
            let selectedIndex = -1;
            let results = [];

            // Transition styles
            codeEl.style.transition = 'opacity 0.15s ease, transform 0.15s ease';

            // Fuzzy search with scoring
            function search(query) {
                if (!query.trim()) return allClasses;
                const q = query.toLowerCase();
                const scored = [];

                for (const cls of allClasses) {
                    const name = cls.Name.toLowerCase();
                    let score = 0;

                    if (name === q) score = 100; // Exact match
                    else if (name.startsWith(q)) score = 80 + (q.length / name.length) * 10;
                    else if (name.includes(q)) score = 50 + (q.length / name.length) * 10;
                    else continue;

                    scored.push({ cls, score, name: cls.Name });
                }

                return scored.sort((a, b) => b.score - a.score).map(s => s.cls);
            }

            // Highlight matching text
            function highlightMatch(name, query) {
                if (!query) return name;
                const idx = name.toLowerCase().indexOf(query.toLowerCase());
                if (idx === -1) return name;
                return name.slice(0, idx) +
                    '<span class="match">' + name.slice(idx, idx + query.length) + '</span>' +
                    name.slice(idx + query.length);
            }

            // Render dropdown results
            function render(query) {
                results = search(query);
                selectedIndex = -1;

                if (results.length === 0) {
                    dropdown.innerHTML = '<div class="class-search-empty">No classes found</div>';
                    dropdown.classList.add('open');
                    return;
                }

                dropdown.innerHTML = results.map((cls, i) => {
                    const propCount = APIDumpManager.getSerializableProperties(cls.Name).length;
                    const badges = APIDumpManager.getClassTags(cls);
                    const badgesHtml = badges.length > 0
                        ? `<span class="class-search-badges">${badges.map(b => `<span class="class-badge ${b.color}">${b.label}</span>`).join('')}</span>`
                        : '';
                    return `
                        <div class="class-search-item" data-index="${i}" data-class="${cls.Name}">
                            <div class="class-search-item-row">
                                <span class="class-search-item-name">${highlightMatch(cls.Name, query)}</span>
                                ${badgesHtml}
                            </div>
                            <span class="class-search-item-meta">
                                ${cls.Superclass ? `<span>extends ${cls.Superclass}</span><span class="divider">·</span>` : ''}
                                <span>${propCount} properties</span>
                            </span>
                        </div>
                    `;
                }).join('');

                dropdown.classList.add('open');
            }

            // Select a class and update template
            function selectClass(className) {
                const template = TemplateGenerator.generate(className);
                if (!template) return;

                // Animate out
                codeEl.style.opacity = '0';
                codeEl.style.transform = 'translateY(10px)';

                setTimeout(() => {
                    nameEl.textContent = className;
                    codeEl.innerHTML = TemplateGenerator.toDisplayHTML(template);
                    codeEl.style.opacity = '1';
                    codeEl.style.transform = 'translateY(0)';
                }, 150);

                // Update quick picks active state
                quickPicks.forEach(qp => qp.classList.toggle('active', qp.dataset.class === className));

                // Close dropdown and clear input
                dropdown.classList.remove('open');
                input.value = '';
                input.blur();
            }

            // Keyboard navigation
            function updateSelection(newIndex) {
                const items = dropdown.querySelectorAll('.class-search-item');
                if (items.length === 0) return;

                selectedIndex = Math.max(0, Math.min(newIndex, items.length - 1));
                items.forEach((item, i) => item.classList.toggle('selected', i === selectedIndex));

                // Scroll into view
                items[selectedIndex]?.scrollIntoView({ block: 'nearest' });
            }

            // Event listeners
            input.addEventListener('input', () => render(input.value));

            input.addEventListener('focus', () => {
                if (allClasses.length > 0) render(input.value);
            });

            input.addEventListener('keydown', (e) => {
                if (!dropdown.classList.contains('open')) return;

                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    updateSelection(selectedIndex + 1);
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    updateSelection(selectedIndex - 1);
                } else if (e.key === 'Enter') {
                    e.preventDefault();
                    if (selectedIndex >= 0 && results[selectedIndex]) {
                        selectClass(results[selectedIndex].Name);
                    } else if (results.length > 0) {
                        selectClass(results[0].Name);
                    }
                } else if (e.key === 'Escape') {
                    dropdown.classList.remove('open');
                    input.blur();
                }
            });

            // Click on dropdown item
            dropdown.addEventListener('click', (e) => {
                const item = e.target.closest('.class-search-item');
                if (item) selectClass(item.dataset.class);
            });

            // Close on click outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.class-search-container')) {
                    dropdown.classList.remove('open');
                }
            });

            // Quick picks
            quickPicks.forEach(qp => {
                qp.addEventListener('click', () => selectClass(qp.dataset.class));
            });

            // Initialize
            APIDumpManager.load().then(() => {
                allClasses = APIDumpManager.getAllClasses();
                if (countEl) countEl.textContent = allClasses.length + ' classes';
                console.log(`[RbxSync] Class search ready: ${allClasses.length} classes`);

                // Auto-select Part on load
                selectClass('Part');
            });
        })();

        // ============================================
        // INTERACTIVE SHELL SIMULATOR
        // ============================================
        (function() {
            const shellBody = document.getElementById('shell-body');
            const shellInput = document.getElementById('shell-input');
            const autocomplete = document.getElementById('shell-autocomplete');
            const clearBtn = document.getElementById('shell-clear');

            if (!shellBody || !shellInput) return;

            // Command definitions with simulated output (matching real CLI)
            const COMMANDS = {
                help: {
                    desc: 'Show available commands',
                    output: `<span class="highlight">rbxsync</span> - Roblox game extraction and synchronization tool

<span class="muted">Usage:</span> rbxsync &lt;COMMAND&gt;

<span class="muted">Commands:</span>
  <span class="info">init</span>          Initialize a new RbxSync project
  <span class="info">serve</span>         Start the sync server
  <span class="info">stop</span>          Stop the running sync server
  <span class="info">extract</span>       Extract game from Studio
  <span class="info">sync</span>          Sync local changes to Studio
  <span class="info">diff</span>          Show diff between local and Studio
  <span class="info">status</span>        Show sync status
  <span class="info">build</span>         Build .rbxl or .rbxm file
  <span class="info">build-plugin</span>  Build the Studio plugin
  <span class="info">plugin</span>        Manage Studio plugins
  <span class="info">sourcemap</span>     Generate sourcemap for Luau LSP
  <span class="info">fmt-project</span>   Format .rbxjson files
  <span class="info">debug</span>         Start/stop playtest in Studio
  <span class="info">studio</span>        Launch Roblox Studio
  <span class="info">doc</span>           Open documentation
  <span class="info">update</span>        Update RbxSync
  <span class="info">version</span>       Show version info

<span class="muted">Run</span> rbxsync help &lt;command&gt; <span class="muted">for more info.</span>
<span class="muted">Full reference:</span> <a href="https://docs.rbxsync.dev/cli/commands" target="_blank" class="shell-link">docs.rbxsync.dev/cli/commands</a>`
                },
                init: {
                    desc: 'Initialize new project',
                    output: `Initialized RbxSync project '<span class="info">MyGame</span>' at /Users/dev/MyGame

<span class="muted">Project structure:</span>
  rbxsync.json      - Project configuration
  src/              - Instance tree
  assets/           - Binary assets
  terrain/          - Terrain data

<span class="muted">Next steps:</span>
  1. Open your game in Roblox Studio
  2. Install the RbxSync plugin
  3. Run: <span class="info">rbxsync extract</span>`
                },
                serve: {
                    desc: 'Start sync server',
                    output: `Starting RbxSync server on port <span class="info">44755</span>...
Stop with: rbxsync stop

<span class="success">✓</span> Studio connected (session active)
<span class="info">[watch]</span> File changed: src/ServerScriptService/PlayerData.luau
<span class="success">✓</span> Pushed to Studio (1 file)`
                },
                stop: {
                    desc: 'Stop sync server',
                    output: `<span class="success">✓</span> Server stopped`
                },
                extract: {
                    desc: 'Extract game from Studio',
                    output: `Starting extraction...
Waiting for Studio plugin to send data...

Received <span class="info">12/12</span> chunks...

<span class="success">Extraction complete!</span> Received 12 chunks.`
                },
                sync: {
                    desc: 'Sync changes to Studio',
                    output: `Reading local files...
Found <span class="info">3</span> instances to sync
Syncing to Studio...
<span class="success">✓</span> Successfully synced 3 instances to Studio.`
                },
                diff: {
                    desc: 'Show pending changes',
                    output: `Diff shows changes between local files and Studio.
<span class="muted">(Connect Studio to see live diff)</span>`
                },
                status: {
                    desc: 'Show sync status',
                    output: `Server status:
  <span class="info">status</span>: <span class="success">healthy</span>
  <span class="info">uptime</span>: 342s
  <span class="info">connections</span>: 1

Extraction status:
  <span class="info">complete</span>: true
  <span class="info">chunksReceived</span>: 12`
                },
                build: {
                    desc: 'Build .rbxl/.rbxm file',
                    output: `Building <span class="info">rbxl</span> from "src/"...
<span class="success">✓</span> Built successfully: build/game.rbxl
Size: <span class="info">2847.3 KB</span>`
                },
                'build-plugin': {
                    desc: 'Build Studio plugin',
                    output: `Building plugin from "plugin/src"...
<span class="success">✓</span> Plugin built: build/RbxSync.rbxm

To install: <span class="info">rbxsync build-plugin --install</span>`
                },
                'build-plugin --install': {
                    desc: 'Build and install plugin',
                    output: `Building plugin from "plugin/src"...
<span class="success">✓</span> Plugin built: build/RbxSync.rbxm
Installing plugin to Studio...
<span class="success">✓</span> Installed to: ~/Documents/Roblox/Plugins/RbxSync.rbxm

<span class="muted">Restart Studio to load the plugin.</span>`
                },
                plugin: {
                    desc: 'Manage Studio plugins',
                    output: `<span class="highlight">rbxsync plugin</span> - Manage Roblox Studio plugins

<span class="muted">Usage:</span> rbxsync plugin <span class="info">&lt;COMMAND&gt;</span>

<span class="muted">Commands:</span>
  <span class="info">install</span>    Install a plugin to Studio
  <span class="info">uninstall</span>  Remove a plugin from Studio
  <span class="info">list</span>       List installed plugins`
                },
                'plugin list': {
                    desc: 'List installed plugins',
                    output: `Studio plugins folder: ~/Documents/Roblox/Plugins/

Installed plugins:
  RbxSync.rbxm <span class="muted">(124.5 KB)</span>`
                },
                'plugin install': {
                    desc: 'Install plugin',
                    output: `Installing plugin to Studio...
<span class="success">✓</span> Installed to: ~/Documents/Roblox/Plugins/RbxSync.rbxm

<span class="muted">Restart Studio to load the plugin.</span>`
                },
                sourcemap: {
                    desc: 'Generate sourcemap',
                    output: `Generating sourcemap from "src/"...
<span class="success">✓</span> Sourcemap written to: sourcemap.json

<span class="muted">To use with Luau LSP, add to .luaurc:</span>
{
  "languageMode": "strict"
}`
                },
                'fmt-project': {
                    desc: 'Format .rbxjson files',
                    output: `Formatted: src/ReplicatedStorage/Config.rbxjson
Formatted: src/Workspace/Spawn.rbxjson

<span class="success">✓</span> Formatted 2 file(s).`
                },
                debug: {
                    desc: 'Start/stop playtest in Studio',
                    output: `<span class="highlight">rbxsync debug</span> - Start or stop playtest in Studio

<span class="muted">Usage:</span> rbxsync debug <span class="info">&lt;COMMAND&gt;</span>

<span class="muted">Commands:</span>
  <span class="info">start</span>   Start a playtest session
  <span class="info">stop</span>    Stop the current playtest
  <span class="info">status</span>  Check if playtest is running

<span class="muted">Options:</span>
  <span class="info">--mode</span> &lt;MODE&gt;  Playtest mode: run, play, server [default: run]`
                },
                'debug start': {
                    desc: 'Start playtest',
                    output: `Starting playtest (mode: <span class="info">run</span>)...
<span class="success">✓</span> Playtest started.`
                },
                'debug stop': {
                    desc: 'Stop playtest',
                    output: `Stopping playtest...
<span class="success">✓</span> Playtest stopped.`
                },
                'debug status': {
                    desc: 'Check playtest status',
                    output: `<span class="info">Playtest is running</span> (mode: run)`
                },
                studio: {
                    desc: 'Launch Roblox Studio',
                    output: `Found Roblox Studio at: /Applications/RobloxStudio.app
Launching Roblox Studio...`
                },
                'studio --serve': {
                    desc: 'Launch with server',
                    output: `Found Roblox Studio at: /Applications/RobloxStudio.app
Starting sync server in background...
Launching Roblox Studio...

<span class="muted">Sync server running. Ctrl+C to stop.</span>`
                },
                doc: {
                    desc: 'Open documentation',
                    output: `Opening documentation: <span class="info">https://rbxsync.dev</span>`
                },
                update: {
                    desc: 'Update RbxSync',
                    output: `RbxSync Update
==============
Repository: ~/.rbxsync/repo

1. Pulling latest changes...
   <span class="success">Done!</span>

2. Rebuilding CLI...
   <span class="success">Done!</span>

3. Installing plugin...
   <span class="success">Done!</span>

<span class="success">Update complete!</span>
Restart Studio to load updated plugin.`
                },
                version: {
                    desc: 'Show version',
                    output: `RbxSync <span class="highlight">v0.3.0</span>

Git commit: a1b2c3d

Checking for updates... <span class="success">Up to date!</span>

Documentation: <span class="info">https://rbxsync.dev</span>`
                },
                clear: {
                    desc: 'Clear terminal',
                    action: 'clear'
                }
            };

            let history = [];
            let historyIndex = -1;
            let selectedAutocomplete = -1;

            // Get matching commands for autocomplete
            function getMatches(input) {
                if (!input) return Object.keys(COMMANDS).slice(0, 8);
                const q = input.toLowerCase();
                return Object.keys(COMMANDS)
                    .filter(cmd => cmd.startsWith(q))
                    .slice(0, 6);
            }

            // Render autocomplete dropdown
            function renderAutocomplete(input) {
                const matches = getMatches(input);
                if (matches.length === 0 || (matches.length === 1 && matches[0] === input)) {
                    autocomplete.classList.remove('open');
                    return;
                }

                autocomplete.innerHTML = matches.map((cmd, i) => `
                    <div class="shell-autocomplete-item${i === selectedAutocomplete ? ' selected' : ''}" data-cmd="${cmd}">
                        <span class="cmd-name">${cmd}</span>
                        <span class="cmd-desc">${COMMANDS[cmd].desc}</span>
                    </div>
                `).join('');

                autocomplete.classList.add('open');

                // Click handlers
                autocomplete.querySelectorAll('.shell-autocomplete-item').forEach(item => {
                    item.addEventListener('click', () => {
                        shellInput.value = item.dataset.cmd;
                        autocomplete.classList.remove('open');
                        shellInput.focus();
                    });
                });
            }

            // Execute a command
            function executeCommand(input) {
                const cmd = input.trim().toLowerCase();
                if (!cmd) return;

                // Add to history
                history.push(cmd);
                historyIndex = history.length;

                // Find command - check exact match first, then handle "help <cmd>"
                let command = COMMANDS[cmd];
                let output = command?.output;

                // Handle "help <command>" syntax
                if (!command && cmd.startsWith('help ')) {
                    const subCmd = cmd.slice(5).trim();
                    const targetCmd = COMMANDS[subCmd];
                    if (targetCmd) {
                        output = targetCmd.output;
                        command = { output };
                    }
                }

                // Handle "<command> --help" or "<command> -h" syntax
                if (!command && (cmd.endsWith(' --help') || cmd.endsWith(' -h'))) {
                    const subCmd = cmd.replace(/ --help$/, '').replace(/ -h$/, '').trim();
                    const targetCmd = COMMANDS[subCmd];
                    if (targetCmd) {
                        output = targetCmd.output;
                        command = { output };
                    }
                }

                // Create history item HTML
                const historyItem = document.createElement('div');
                historyItem.className = 'shell-history-item';

                const cmdParts = cmd.split(' ');
                const displayCmd = `<span class="prefix">rbxsync</span> <span class="subcmd">${cmdParts[0]}</span>${cmdParts.length > 1 ? ' <span class="args">' + cmdParts.slice(1).join(' ') + '</span>' : ''}`;

                historyItem.innerHTML = `
                    <div class="shell-history-cmd">
                        <span class="prompt">my-game % </span>
                        <span class="cmd">${displayCmd}</span>
                    </div>
                    <div class="shell-output">${command ? command.output : `<span class="error">error:</span> unrecognized subcommand '<span class="highlight">${cmd}</span>'

<span class="muted">Usage:</span> rbxsync <span class="info">&lt;COMMAND&gt;</span>

For more info, try '<span class="info">help</span>'`}</div>
                `;

                // Handle special actions
                if (command?.action === 'clear') {
                    clearTerminal();
                    return;
                }

                shellBody.appendChild(historyItem);
                shellBody.scrollTop = shellBody.scrollHeight;

                // Clear input
                shellInput.value = '';
                autocomplete.classList.remove('open');
            }

            // Clear terminal
            function clearTerminal() {
                shellBody.innerHTML = '';
            }

            // Input handling
            shellInput.addEventListener('input', () => {
                selectedAutocomplete = -1;
                renderAutocomplete(shellInput.value);
            });

            shellInput.addEventListener('keydown', (e) => {
                const matches = getMatches(shellInput.value);

                if (e.key === 'Tab') {
                    e.preventDefault();
                    if (matches.length > 0) {
                        shellInput.value = matches[selectedAutocomplete >= 0 ? selectedAutocomplete : 0];
                        autocomplete.classList.remove('open');
                    }
                } else if (e.key === 'Enter') {
                    executeCommand(shellInput.value);
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    if (autocomplete.classList.contains('open')) {
                        selectedAutocomplete = Math.max(0, selectedAutocomplete - 1);
                        renderAutocomplete(shellInput.value);
                    } else if (historyIndex > 0) {
                        historyIndex--;
                        shellInput.value = history[historyIndex];
                    }
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    if (autocomplete.classList.contains('open')) {
                        selectedAutocomplete = Math.min(matches.length - 1, selectedAutocomplete + 1);
                        renderAutocomplete(shellInput.value);
                    } else if (historyIndex < history.length - 1) {
                        historyIndex++;
                        shellInput.value = history[historyIndex];
                    } else {
                        historyIndex = history.length;
                        shellInput.value = '';
                    }
                } else if (e.key === 'Escape') {
                    autocomplete.classList.remove('open');
                }
            });

            // Focus input when clicking shell
            document.getElementById('interactive-shell')?.addEventListener('click', (e) => {
                if (!e.target.closest('.shell-clear-btn')) {
                    shellInput.focus();
                }
            });

            // Clear button
            clearBtn?.addEventListener('click', clearTerminal);

            // Close autocomplete on outside click
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.interactive-shell')) {
                    autocomplete.classList.remove('open');
                }
            });
        })();

        // Theme toggle functionality
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;

        // Check for saved theme preference or default to dark
        const savedTheme = localStorage.getItem('theme') || 'dark';
        html.setAttribute('data-theme', savedTheme);

        themeToggle?.addEventListener('click', () => {
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

            // Disable transitions during theme change (except stars)
            html.classList.add('theme-transitioning');
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);

            // Re-enable transitions after theme applied
            requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                    html.classList.remove('theme-transitioning');
                });
            });
        });

        // Fetch GitHub stars (via proxy to avoid rate limits)
        async function fetchGitHubStars() {
            try {
                const response = await fetch('/api/github?type=repo');
                const data = await response.json();
                const starCount = document.getElementById('star-count');
                if (starCount && data.stargazers_count !== undefined) {
                    const count = data.stargazers_count;
                    starCount.textContent = count >= 1000 ? (count / 1000).toFixed(1) + 'k' : count;
                }
            } catch (err) {
                console.log('Could not fetch GitHub stars');
            }
        }
        fetchGitHubStars();

        // Search keyboard shortcut (Cmd/Ctrl + K)
        const searchInput = document.getElementById('search-input');
        document.addEventListener('keydown', (e) => {
            if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                e.preventDefault();
                searchInput?.focus();
            }
            // Escape to blur search
            if (e.key === 'Escape' && document.activeElement === searchInput) {
                searchInput.blur();
            }
        });

        // Search redirect to docs
        searchInput?.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && searchInput.value.trim()) {
                window.open(`https://rbxsync.dev?search=${encodeURIComponent(searchInput.value.trim())}`, '_blank');
            }
        });

        // Intersection Observer for fade-in animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe elements for scroll animations
        document.querySelectorAll('.value-card, .feature-card').forEach((el, i) => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(20px)';
            el.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
            el.style.transitionDelay = (i % 4) * 0.1 + 's';
            observer.observe(el);
        });

        // Staggered animation for testimonials (opacity only, preserve 3D tilt)
        document.querySelectorAll('.testimonial-card').forEach((el, i) => {
            el.style.opacity = '0';
            el.dataset.delay = i * 0.15;

            const testimonialObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.style.opacity = '1';
                        }, parseFloat(entry.target.dataset.delay) * 1000);
                        testimonialObserver.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            testimonialObserver.observe(el);
        });

        // Spotlight card effect
        (function() {
            const cards = document.querySelectorAll('.value-card, .feature-card, .update-card');
            const githubBtn = document.querySelector('.btn-secondary');
            const proximityThreshold = 100; // pixels from card edge to start glowing

            // Track velocity for github button aurora effect
            let lastX = 0, lastY = 0;
            let velocityX = 0, velocityY = 0;
            let currentHue = 0;
            let targetHue = 0;
            let currentSize = 60;
            let targetSize = 60;
            let currentIntensity = 0.6;
            let targetIntensity = 0.6;
            let currentSpotX = 0;
            let currentSpotY = 0;
            let targetSpotX = 0;
            let targetSpotY = 0;
            let isHoveringGithubBtn = false;

            // GitHub button hover - only show spotlight when actually hovering
            if (githubBtn) {
                githubBtn.addEventListener('mouseenter', () => {
                    isHoveringGithubBtn = true;
                    githubBtn.style.setProperty('--glow-opacity', 1);
                });

                githubBtn.addEventListener('mouseleave', () => {
                    isHoveringGithubBtn = false;
                    githubBtn.style.setProperty('--glow-opacity', 0);
                    // Reset to defaults
                    targetSize = 60;
                    targetIntensity = 0.6;
                });
            }

            document.addEventListener('pointermove', (e) => {
                // Handle regular cards with proximity-based glow
                cards.forEach(card => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;

                    const closestX = Math.max(rect.left, Math.min(e.clientX, rect.right));
                    const closestY = Math.max(rect.top, Math.min(e.clientY, rect.bottom));
                    const distance = Math.sqrt(
                        Math.pow(e.clientX - closestX, 2) +
                        Math.pow(e.clientY - closestY, 2)
                    );

                    const opacity = Math.max(0, 1 - (distance / proximityThreshold));
                    card.style.setProperty('--x', x);
                    card.style.setProperty('--y', y);
                    card.style.setProperty('--glow-opacity', opacity);
                });

                // Handle GitHub button separately - track position but opacity controlled by hover
                if (githubBtn && isHoveringGithubBtn) {
                    const rect = githubBtn.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;

                    // Set target position for smooth lerping
                    targetSpotX = x;
                    targetSpotY = y;

                    // Calculate velocity
                    velocityX = e.clientX - lastX;
                    velocityY = e.clientY - lastY;
                    const speed = Math.sqrt(velocityX * velocityX + velocityY * velocityY);

                    // Hue shifts based on position within button + velocity boost
                    const normalizedX = x / rect.width;
                    const normalizedY = y / rect.height;

                    // Create a flowing hue based on position
                    targetHue = (normalizedX * 60) + (normalizedY * 40) + (speed * 2);
                    targetHue = targetHue % 360;

                    // Calculate distance from center of button
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const distFromCenter = Math.sqrt(
                        Math.pow(x - centerX, 2) + Math.pow(y - centerY, 2)
                    );

                    // Max distance is from center to corner
                    const maxDist = Math.sqrt(centerX * centerX + centerY * centerY);
                    const centerProximity = 1 - Math.min(distFromCenter / maxDist, 1);

                    // Size: 50px at edges, 100px at center
                    targetSize = 50 + (centerProximity * 50);

                    // Intensity: 0.5 at edges, 1.0 at center
                    targetIntensity = 0.5 + (centerProximity * 0.5);
                }

                lastX = e.clientX;
                lastY = e.clientY;
            });

            // Smooth animation loop for position, hue, size, and intensity
            function animateSpotlight() {
                if (githubBtn) {
                    // Lerp position with slower factor for smooth trailing
                    currentSpotX += (targetSpotX - currentSpotX) * 0.04;
                    currentSpotY += (targetSpotY - currentSpotY) * 0.04;
                    currentHue += (targetHue - currentHue) * 0.08;
                    currentSize += (targetSize - currentSize) * 0.12;
                    currentIntensity += (targetIntensity - currentIntensity) * 0.1;

                    githubBtn.style.setProperty('--x', currentSpotX);
                    githubBtn.style.setProperty('--y', currentSpotY);
                    githubBtn.style.setProperty('--spotlight-hue', currentHue);
                    githubBtn.style.setProperty('--spotlight-size', currentSize);
                    githubBtn.style.setProperty('--spotlight-intensity', currentIntensity);
                }
                requestAnimationFrame(animateSpotlight);
            }
            animateSpotlight();

            document.addEventListener('mouseleave', () => {
                cards.forEach(card => {
                    card.style.setProperty('--glow-opacity', 0);
                });
                if (githubBtn) {
                    githubBtn.style.setProperty('--glow-opacity', 0);
                    isHoveringGithubBtn = false;
                }
                targetSize = 60;
                targetIntensity = 0.6;
            });
        })();

        // Unified Star/Confetti Particle System with smooth interpolation
        (function() {
            const confettiColors = ['#FF6B6B', '#4ECDC4', '#FFE66D', '#95E1D3', '#F38181', '#AA96DA', '#74b9ff', '#fd79a8'];
            const html = document.documentElement;

            // Color interpolation helpers
            function hexToRgb(hex) {
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? {
                    r: parseInt(result[1], 16),
                    g: parseInt(result[2], 16),
                    b: parseInt(result[3], 16)
                } : { r: 255, g: 255, b: 255 };
            }

            function lerpColor(colorA, colorB, t) {
                const a = typeof colorA === 'string' ? hexToRgb(colorA) : colorA;
                const b = typeof colorB === 'string' ? hexToRgb(colorB) : colorB;
                const r = Math.round(a.r + (b.r - a.r) * t);
                const g = Math.round(a.g + (b.g - a.g) * t);
                const bl = Math.round(a.b + (b.b - a.b) * t);
                return `rgb(${r},${g},${bl})`;
            }

            // Star field height (large enough for smooth looping)
            const FIELD_HEIGHT = 4000;

            const container = document.getElementById('stars-container');

            // ALL particles are DOM elements so they can ALL flutter
            const allStars = [];

            // Reduce star count on mobile for performance and less visual clutter
            const isMobile = window.innerWidth < 600;
            const starMultiplier = isMobile ? 0.3 : (window.innerWidth < 900 ? 0.6 : 1);

            // Create stars in 3 size categories with different parallax depths
            const starLayers = [
                { count: Math.round(250 * starMultiplier), sizeMin: 1, sizeMax: 1.5, parallaxMin: 0.01, parallaxMax: 0.03 },   // small
                { count: Math.round(150 * starMultiplier), sizeMin: 1.5, sizeMax: 2.5, parallaxMin: 0.03, parallaxMax: 0.05 }, // medium
                { count: Math.round(80 * starMultiplier), sizeMin: 2.5, sizeMax: 3.5, parallaxMin: 0.05, parallaxMax: 0.08 }   // large
            ];

            for (const layer of starLayers) {
                for (let i = 0; i < layer.count; i++) {
                    const star = document.createElement('span');
                    star.className = 'twinkle-star';

                    // Random position
                    const baseX = Math.random() * 100;
                    const baseY = Math.random() * 100;
                    star.style.left = baseX + 'vw';
                    star.style.top = baseY + 'vh';

                    // Size based on layer
                    const baseSize = layer.sizeMin + Math.random() * (layer.sizeMax - layer.sizeMin);
                    star.style.width = baseSize + 'px';
                    star.style.height = baseSize + 'px';

                    // Store animation data
                    star._baseY = baseY;
                    star._baseSize = baseSize;
                    star._speed = 0.3 + Math.random() * 0.7;
                    star._parallaxFactor = layer.parallaxMin + Math.random() * (layer.parallaxMax - layer.parallaxMin);
                    star._confettiColorHex = confettiColors[Math.floor(Math.random() * confettiColors.length)];
                    star._confettiColor = hexToRgb(star._confettiColorHex);
                    star._flutterPhase = Math.random() * Math.PI * 2;
                    star._flutterSpeed = 4 + Math.random() * 4;

                    container.appendChild(star);
                    allStars.push(star);
                }
            }

            // Alias for compatibility
            const twinkleStars = allStars;

            // Randomly trigger twinkles (visual sparkle effect)
            function triggerRandomTwinkle() {
                const star = twinkleStars[Math.floor(Math.random() * twinkleStars.length)];
                star.classList.add('twinkle');
                setTimeout(() => star.classList.remove('twinkle'), 600);
                setTimeout(triggerRandomTwinkle, Math.random() * 1500 + 800);
            }
            // Start a few twinkle chains
            for (let i = 0; i < 3; i++) {
                setTimeout(triggerRandomTwinkle, i * 400);
            }

            // Animation state
            let animTime = 0;
            let scrollY = 0;
            let offsetY = 0;
            let currentVelocity = -0.3; // negative = rising, positive = falling
            let targetVelocity = -0.3;
            let currentColorLerp = 0; // 0 = white, 1 = confetti
            let targetColorLerp = 0;
            let currentSizeMultiplier = 1;
            let targetSizeMultiplier = 1;
            let currentFlutter = 0;
            let targetFlutter = 0;


            function animate() {
                animTime += 0.016; // ~60fps
                const isLight = html.getAttribute('data-theme') === 'light';

                // Update targets based on theme
                // Dark: rise slowly (-0.5), Light: fall faster (1.0)
                targetVelocity = isLight ? 1.0 : -0.3;
                targetColorLerp = isLight ? 1 : 0;
                targetSizeMultiplier = isLight ? 1.5 : 1;
                targetFlutter = isLight ? 1 : 0;

                // Velocity interpolation with decelerate-then-accelerate behavior
                // If changing direction (different signs), decelerate to 0 first
                const changingDirection = Math.sign(currentVelocity) !== Math.sign(targetVelocity) && Math.sign(currentVelocity) !== 0;

                // Light mode: no deceleration, just accelerate directly
                // Dark mode: decelerate first, then accelerate
                if (isLight) {
                    // Accelerate directly toward target (slower for gentle confetti fall)
                    currentVelocity += (targetVelocity - currentVelocity) * 0.02;
                } else if (changingDirection && Math.abs(currentVelocity) > 0.02) {
                    // Decelerating toward 0
                    currentVelocity += (0 - currentVelocity) * 0.04;
                } else {
                    // Accelerating toward target velocity
                    currentVelocity += (targetVelocity - currentVelocity) * 0.015;
                }

                currentColorLerp += (targetColorLerp - currentColorLerp) * 0.05;
                currentSizeMultiplier += (targetSizeMultiplier - currentSizeMultiplier) * 0.05;
                currentFlutter += (targetFlutter - currentFlutter) * 0.05;

                // Apply velocity to offset
                offsetY += currentVelocity;

                // Wrap offset to prevent overflow (large range for smooth looping)
                if (offsetY > FIELD_HEIGHT) offsetY -= FIELD_HEIGHT;
                if (offsetY < -FIELD_HEIGHT) offsetY += FIELD_HEIGHT;

                // Animate ALL stars (now DOM elements) with parallax and flutter
                for (const star of twinkleStars) {
                    // Calculate total Y position then wrap
                    let totalY = star._baseY + (offsetY * star._speed * 0.02);
                    // Add parallax offset from scrolling
                    totalY += scrollY * star._parallaxFactor * -0.1;
                    // Wrap around 0-100 range
                    totalY = ((totalY % 100) + 100) % 100;
                    // Calculate offset from initial position for translateY
                    const yOffset = totalY - star._baseY;

                    // Base size - slightly bigger in confetti mode for flutter visibility
                    const confettiSizeBoost = 1 + currentFlutter * 0.5; // 1.5x bigger in confetti mode
                    const starSize = star._baseSize * currentSizeMultiplier * confettiSizeBoost;

                    // Flutter effect - 3D tumbling (only in light/confetti mode)
                    const flutterAmount = currentFlutter; // 0 in dark mode, 1 in light mode
                    // Advance flutter phase based on velocity (faster movement = faster spin)
                    star._flutterPhase += Math.abs(currentVelocity) * star._flutterSpeed * 0.008;
                    const flutter = Math.sin(star._flutterPhase);

                    // scaleY: goes thin (0.1) when edge-on, full (1.0) when face-on
                    const scaleY = 0.1 + 0.9 * Math.abs(flutter);
                    const effectiveScaleY = 1 - flutterAmount * (1 - scaleY); // Interpolate to 1 in dark mode

                    // Rotation: tilts back and forth as it tumbles
                    const rotation = flutterAmount * flutter * 30; // -30 to +30 degrees

                    // Apply width, height, and transform (translateY + rotation for GPU acceleration)
                    star.style.width = starSize + 'px';
                    star.style.height = (starSize * effectiveScaleY) + 'px';
                    star.style.transform = `translateY(${yOffset}vh) rotate(${rotation}deg)`;

                    // Shading: darken when edge-on to simulate 3D
                    const darkness = (1 - effectiveScaleY) * 0.6;
                    const shadedColor = {
                        r: Math.round(star._confettiColor.r * (1 - darkness)),
                        g: Math.round(star._confettiColor.g * (1 - darkness)),
                        b: Math.round(star._confettiColor.b * (1 - darkness))
                    };
                    const finalColor = lerpColor({ r: 255, g: 255, b: 255 }, shadedColor, currentColorLerp);
                    star.style.backgroundColor = finalColor;

                    // Opacity
                    star.style.opacity = 0.5 + (0.4 * currentColorLerp);
                }

                requestAnimationFrame(animate);
            }

            window.addEventListener('scroll', function() {
                scrollY = window.scrollY;
            }, { passive: true });

            // Start animation
            animate();
        })();

        // Live Terminal Typing Animation
        (function() {
            const terminal = document.getElementById('live-terminal');
            if (!terminal) return;

            const terminalLine = terminal.querySelector('.terminal-line');
            const typedText = terminal.querySelector('.typed-text');
            const outputs = terminal.querySelectorAll('.terminal-output');
            const command = terminalLine.dataset.command;

            let hasAnimated = false;

            function typeCommand(text, element, callback) {
                let i = 0;
                element.classList.add('typing');
                element.style.width = 'auto';

                function type() {
                    if (i < text.length) {
                        element.textContent += text.charAt(i);
                        i++;
                        setTimeout(type, 50 + Math.random() * 30);
                    } else {
                        element.classList.remove('typing');
                        element.classList.add('done');
                        if (callback) callback();
                    }
                }
                type();
            }

            function showOutputs() {
                let delay = 0;
                outputs.forEach((output, index) => {
                    const outputDelay = parseInt(output.dataset.delay) || 300;
                    delay += outputDelay;
                    setTimeout(() => {
                        output.classList.add('visible');
                    }, delay);
                });

                // Loop the animation after all outputs shown
                setTimeout(() => {
                    resetAnimation();
                }, delay + 3000);
            }

            function resetAnimation() {
                // Reset state
                typedText.textContent = '';
                typedText.classList.remove('typing', 'done');
                typedText.style.width = '0';
                terminalLine.classList.remove('visible');
                outputs.forEach(o => o.classList.remove('visible'));

                // Start again after a pause
                setTimeout(startAnimation, 1000);
            }

            function startAnimation() {
                terminalLine.classList.add('visible');
                setTimeout(() => {
                    typeCommand(command, typedText, showOutputs);
                }, 300);
            }

            // Intersection Observer to trigger animation when visible
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && !hasAnimated) {
                        hasAnimated = true;
                        startAnimation();
                    }
                });
            }, { threshold: 0.3 });

            observer.observe(terminal);
        })();

        // 3D Tilt Effect for Testimonial Cards
        (function() {
            const cards = document.querySelectorAll('.testimonial-card');
            const maxTilt = 15; // Maximum tilt in degrees

            cards.forEach(card => {
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;

                    // Calculate tilt (inverted for natural feel)
                    const tiltX = ((y - centerY) / centerY) * -maxTilt;
                    const tiltY = ((x - centerX) / centerX) * maxTilt;

                    // Calculate shine position (percentage)
                    const shineX = (x / rect.width) * 100;
                    const shineY = (y / rect.height) * 100;

                    card.style.setProperty('--tilt-x', `${tiltX}deg`);
                    card.style.setProperty('--tilt-y', `${tiltY}deg`);
                    card.style.setProperty('--shine-x', `${shineX}%`);
                    card.style.setProperty('--shine-y', `${shineY}%`);
                });

                card.addEventListener('mouseleave', () => {
                    // Smooth reset
                    card.style.transition = 'transform 0.5s ease-out, box-shadow 0.3s ease-out';
                    card.style.setProperty('--tilt-x', '0deg');
                    card.style.setProperty('--tilt-y', '0deg');
                    card.style.setProperty('--shine-x', '50%');
                    card.style.setProperty('--shine-y', '50%');

                    // Reset transition after animation
                    setTimeout(() => {
                        card.style.transition = 'transform 0.15s ease-out, box-shadow 0.15s ease-out, border-color 0.15s ease-out';
                    }, 500);
                });

                card.addEventListener('mouseenter', () => {
                    card.style.transition = 'transform 0.15s ease-out, box-shadow 0.15s ease-out, border-color 0.15s ease-out';
                });
            });
        })();

        // Command Palette
        (function() {
            const searchInput = document.getElementById('search-input');
            const backdrop = document.getElementById('command-palette-backdrop');
            const modal = document.getElementById('command-palette');
            const input = document.getElementById('command-palette-input');
            const resultsContainer = document.getElementById('command-palette-results');
            const closeBtn = document.getElementById('command-palette-close');

            // Documentation index - static for now, will fetch from docs site later
            const docsIndex = [
                // Getting Started
                { title: 'Introduction', desc: 'What is RbxSync and why use it', path: '/getting-started/', section: 'Getting Started', icon: 'book' },
                { title: 'Installation', desc: 'Install CLI, plugin, and VS Code extension', path: '/getting-started/installation', section: 'Getting Started', icon: 'download' },
                { title: 'Quick Start', desc: 'Create your first RbxSync project', path: '/getting-started/quick-start', section: 'Getting Started', icon: 'rocket' },

                // CLI
                { title: 'CLI Overview', desc: 'Command line interface basics', path: '/cli/', section: 'CLI', icon: 'terminal' },
                { title: 'CLI Commands', desc: 'Full command reference', path: '/cli/commands', section: 'CLI', icon: 'terminal' },
                { title: 'Build Commands', desc: 'Building and deploying projects', path: '/cli/build', section: 'CLI', icon: 'package' },

                // Plugin
                { title: 'Studio Plugin', desc: 'Roblox Studio plugin overview', path: '/plugin/', section: 'Plugin', icon: 'puzzle' },
                { title: 'Plugin Installation', desc: 'Install and configure the plugin', path: '/plugin/installation', section: 'Plugin', icon: 'download' },
                { title: 'Plugin Usage', desc: 'Auto-extract and console capture', path: '/plugin/usage', section: 'Plugin', icon: 'play' },

                // VS Code
                { title: 'VS Code Extension', desc: 'Extension overview and features', path: '/vscode/', section: 'VS Code', icon: 'code' },
                { title: 'VS Code Commands', desc: 'All extension commands', path: '/vscode/commands', section: 'VS Code', icon: 'list' },
                { title: 'E2E Testing', desc: 'AI-powered end-to-end testing', path: '/vscode/e2e-testing', section: 'VS Code', icon: 'flask' },

                // File Formats
                { title: 'File Formats', desc: 'Overview of all file types', path: '/file-formats/', section: 'File Formats', icon: 'file' },
                { title: 'Luau Scripts', desc: '.luau and .server.luau conventions', path: '/file-formats/luau', section: 'File Formats', icon: 'file-code' },
                { title: '.rbxjson Format', desc: 'JSON format for instances', path: '/file-formats/rbxjson', section: 'File Formats', icon: 'braces' },
                { title: 'Property Types', desc: 'All supported property types', path: '/file-formats/property-types', section: 'File Formats', icon: 'list' },

                // MCP
                { title: 'MCP Integration', desc: 'AI agent integration overview', path: '/mcp/', section: 'MCP', icon: 'bot' },
                { title: 'MCP Setup', desc: 'Configure MCP client', path: '/mcp/setup', section: 'MCP', icon: 'settings' },
                { title: 'MCP Tools', desc: 'Complete tool reference', path: '/mcp/tools', section: 'MCP', icon: 'wrench' },

                // Other
                { title: 'Troubleshooting', desc: 'Common issues and solutions', path: '/troubleshooting', section: 'Help', icon: 'help-circle' },
            ];

            let selectedIndex = 0;
            let currentResults = [];

            const icons = {
                'book': '<path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/><path d="M8 7h6"/><path d="M8 11h8"/>',
                'download': '<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/>',
                'rocket': '<path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/>',
                'terminal': '<polyline points="4 17 10 11 4 5"/><line x1="12" x2="20" y1="19" y2="19"/>',
                'package': '<path d="m7.5 4.27 9 5.15"/><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/>',
                'puzzle': '<path d="M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.315 8.69c.23-.23.556-.338.877-.29.493.074.84.504 1.02.968a2.5 2.5 0 1 0 3.237-3.237c-.464-.18-.894-.527-.967-1.02a1.026 1.026 0 0 1 .289-.877l1.568-1.568A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z"/>',
                'play': '<polygon points="5 3 19 12 5 21 5 3"/>',
                'code': '<polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/>',
                'list': '<line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/>',
                'flask': '<path d="M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2"/><path d="M8.5 2h7"/><path d="M7 16h10"/>',
                'file': '<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/>',
                'file-code': '<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="m10 13-2 2 2 2"/><path d="m14 17 2-2-2-2"/>',
                'braces': '<path d="M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1"/><path d="M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1"/>',
                'bot': '<path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/>',
                'settings': '<path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/>',
                'wrench': '<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>',
                'help-circle': '<circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/>',
            };

            function getIcon(name) {
                return `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">${icons[name] || icons['file']}</svg>`;
            }

            function open() {
                backdrop.classList.add('open');
                input.value = '';
                input.focus();
                selectedIndex = 0;
                search('');
                document.body.style.overflow = 'hidden';
            }

            function close() {
                backdrop.classList.remove('open');
                document.body.style.overflow = '';
            }

            function highlightMatch(text, query) {
                if (!query) return text;
                const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
                return text.replace(regex, '<mark>$1</mark>');
            }

            function search(query) {
                query = query.toLowerCase().trim();

                if (!query) {
                    // Show all results grouped by section
                    currentResults = docsIndex;
                } else {
                    // Filter results
                    currentResults = docsIndex.filter(item =>
                        item.title.toLowerCase().includes(query) ||
                        item.desc.toLowerCase().includes(query) ||
                        item.section.toLowerCase().includes(query)
                    );
                }

                renderResults(query);
            }

            function renderResults(query) {
                if (currentResults.length === 0) {
                    resultsContainer.innerHTML = `
                        <div class="command-palette-empty">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/>
                            </svg>
                            <div>No results found for "${query}"</div>
                        </div>
                    `;
                    return;
                }

                // Group by section
                const groups = {};
                currentResults.forEach(item => {
                    if (!groups[item.section]) groups[item.section] = [];
                    groups[item.section].push(item);
                });

                let html = '';
                let globalIndex = 0;

                for (const [section, items] of Object.entries(groups)) {
                    html += `<div class="command-palette-group">`;
                    html += `<div class="command-palette-group-label">${section}</div>`;

                    items.forEach(item => {
                        const isSelected = globalIndex === selectedIndex;
                        html += `
                            <a href="https://docs.rbxsync.dev${item.path}" class="command-palette-item${isSelected ? ' selected' : ''}" data-index="${globalIndex}">
                                <div class="command-palette-item-icon">${getIcon(item.icon)}</div>
                                <div class="command-palette-item-content">
                                    <div class="command-palette-item-title">${highlightMatch(item.title, query)}</div>
                                    <div class="command-palette-item-desc">${item.desc}</div>
                                </div>
                            </a>
                        `;
                        globalIndex++;
                    });

                    html += `</div>`;
                }

                resultsContainer.innerHTML = html;

                // Add click handlers
                resultsContainer.querySelectorAll('.command-palette-item').forEach(el => {
                    el.addEventListener('click', (e) => {
                        // Let the link navigate naturally
                        close();
                    });
                });
            }

            function navigate(direction) {
                const maxIndex = currentResults.length - 1;
                selectedIndex = Math.max(0, Math.min(maxIndex, selectedIndex + direction));

                // Update selection
                resultsContainer.querySelectorAll('.command-palette-item').forEach((el, i) => {
                    el.classList.toggle('selected', i === selectedIndex);
                });

                // Scroll into view
                const selected = resultsContainer.querySelector('.command-palette-item.selected');
                if (selected) {
                    selected.scrollIntoView({ block: 'nearest' });
                }
            }

            function selectCurrent() {
                const selected = resultsContainer.querySelector('.command-palette-item.selected');
                if (selected) {
                    selected.click();
                }
            }

            // Event listeners
            searchInput.addEventListener('click', (e) => {
                e.preventDefault();
                open();
            });

            searchInput.addEventListener('focus', (e) => {
                e.target.blur();
                open();
            });

            // Mobile search button
            const mobileSearchBtn = document.getElementById('search-mobile-btn');
            if (mobileSearchBtn) {
                mobileSearchBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    open();
                });
            }

            closeBtn.addEventListener('click', close);

            backdrop.addEventListener('click', (e) => {
                if (e.target === backdrop) close();
            });

            input.addEventListener('input', (e) => {
                selectedIndex = 0;
                search(e.target.value);
            });

            document.addEventListener('keydown', (e) => {
                // Cmd/Ctrl + K to open
                if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                    e.preventDefault();
                    if (backdrop.classList.contains('open')) {
                        close();
                    } else {
                        open();
                    }
                }

                // Handle modal keyboard navigation
                if (backdrop.classList.contains('open')) {
                    if (e.key === 'Escape') {
                        e.preventDefault();
                        close();
                    } else if (e.key === 'ArrowDown') {
                        e.preventDefault();
                        navigate(1);
                    } else if (e.key === 'ArrowUp') {
                        e.preventDefault();
                        navigate(-1);
                    } else if (e.key === 'Enter') {
                        e.preventDefault();
                        selectCurrent();
                    }
                }
            });
        })();

        // Fade out page loader once everything is ready
        (function() {
            const loader = document.getElementById('page-loader');
            if (loader) {
                // Small delay to ensure everything has rendered
                requestAnimationFrame(() => {
                    requestAnimationFrame(() => {
                        loader.classList.add('fade-out');
                        // Remove from DOM after transition
                        setTimeout(() => loader.remove(), 300);
                    });
                });
            }
        })();

    </script>
</body>
</html>
